import{a as ge}from"./chunk-2KFHIC7C.js";import{a as x,d as ve}from"./chunk-FBWHH6JU.js";import{a as w,b as P,c as he,d as Fe}from"./chunk-UEPNQQPW.js";import{a as k}from"./chunk-DNX6FE6Q.js";import{a as se,b as pe,c as ce,d as de,e as fe}from"./chunk-3OLZPOF4.js";import{b as Z,c as ee,d as te,e as ie,f as A,h as b,j as oe,l as re,m as ne,r as le,u as ae,v as me}from"./chunk-RQYECNT5.js";import{b as N,c as ue}from"./chunk-IMD2KKFX.js";import{A as V,F as g,G as H,Ha as y,Ia as z,Ja as M,K as _,L as S,R as j,U as O,V as p,W as F,Za as W,_a as J,aa as G,ca as c,cb as K,da as $,ja as r,ka as n,la as m,lb as X,ma as C,mb as I,na as d,nb as R,oa as U,qb as Q,rb as Y,ta as f,ua as u,va as h,xa as s,ya as D}from"./chunk-TK5UYZ3D.js";var be=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=g({type:i,selectors:[["app-profile"]],decls:1,vars:0,template:function(t,o){t&1&&m(0,"router-outlet")},dependencies:[X]});let l=i;return l})();var Pe=["imageUploadComponentReference"],T=(()=>{let i=class i{constructor(){this.saveProfile=new j,this.isSubmitted=!1,this.profileForm=new A({})}ngOnInit(){this.initProfileForm()}initProfileForm(){this.profileForm=new A({hotelName:new b("",ee.required),createdBy:new b(""),about:new b(""),socialMediaLink:new b(""),email:new b(""),phone:new b(""),address:new b(""),website:new b("")})}onSubmit(){this.saveProfile.emit()}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=g({type:i,selectors:[["app-profile-form"]],viewQuery:function(t,o){if(t&1&&f(Pe,5,x),t&2){let a;u(a=h())&&(o.imageUpload=a.first)}},outputs:{saveProfile:"saveProfile"},decls:52,vars:3,consts:[["imageUploadComponentReference",""],[3,"ngSubmit","formGroup"],[1,"row","mb-3"],["for","profileImage",1,"col-md-4","col-lg-3","col-form-label"],[1,"col-md-6"],["hidden","",1,"row","mb-3"],["for","createdBy",1,"col-md-4","col-lg-3","col-form-label"],[1,"col-md-8","col-lg-9"],["formControlName","createdBy","name","createdBy","type","text","id","createdBy",1,"form-control"],["for","hotelName",1,"col-md-4","col-lg-3","col-form-label"],[1,"text-danger"],["formControlName","hotelName","name","hotelName","type","text","id","hotelName","required","",1,"form-control"],["for","about",1,"col-md-4","col-lg-3","col-form-label"],["formControlName","about","rows","3","name","about",1,"form-control"],["for","address",1,"col-md-4","col-lg-3","col-form-label"],["formControlName","address","name","address","type","text","id","address",1,"form-control"],["for","phone",1,"col-md-4","col-lg-3","col-form-label"],["formControlName","phone","name","phone","type","tel","id","phone",1,"form-control"],["for","email",1,"col-md-4","col-lg-3","col-form-label"],["formControlName","email","name","email","type","email","id","email","required","",1,"form-control"],["for","socialMediaLink",1,"col-md-4","col-lg-3","col-form-label"],["formControlName","socialMediaLink","name","socialMediaLink","type","text","id","socialMediaLink",1,"form-control"],["for","website",1,"col-md-4","col-lg-3","col-form-label"],["formControlName","website","name","website","type","text","id","website",1,"form-control"],[1,"text-center"],["type","submit",1,"btn","btn-primary"]],template:function(t,o){if(t&1){let a=C();r(0,"form",1),d("ngSubmit",function(){return _(a),S(o.onSubmit())}),r(1,"div",2)(2,"label",3),s(3,"Profile Image"),n(),r(4,"div",4),m(5,"app-general-image-upload",null,0),n()(),r(7,"div",5)(8,"label",6),s(9,"Created By"),n(),r(10,"div",7),m(11,"input",8),n()(),r(12,"div",2)(13,"label",9)(14,"span",10),s(15,"* "),n(),s(16,"Hotel Name"),n(),r(17,"div",7),m(18,"input",11),n()(),r(19,"div",2)(20,"label",12),s(21,"About"),n(),r(22,"div",7),m(23,"textarea",13),n()(),r(24,"div",2)(25,"label",14),s(26,"Address"),n(),r(27,"div",7),m(28,"input",15),n()(),r(29,"div",2)(30,"label",16),s(31,"Phone"),n(),r(32,"div",7),m(33,"input",17),n()(),r(34,"div",2)(35,"label",18),s(36,"Email"),n(),r(37,"div",7),m(38,"input",19),n()(),r(39,"div",2)(40,"label",20),s(41,"Social Media Links"),n(),r(42,"div",7),m(43,"input",21),n()(),r(44,"div",2)(45,"label",22),s(46,"Website"),n(),r(47,"div",7),m(48,"input",23),n()(),r(49,"div",24)(50,"button",25),s(51,"Save Changes"),n()()()}t&2&&(c("formGroup",o.profileForm),p(18),$("is-invalid",o.profileForm.controls.hotelName.invalid&&o.isSubmitted))},dependencies:[oe,Z,te,ie,le,re,ne,x]});let l=i;return l})();var Ie=["profileFormComponentReference"],Ne=["successToastComponentReference"],Le=["errorToastComponentReference"],Ve=["deleteModalOneComponentReference"],He=()=>({name:"View Restaurant Profile",link:"#/home/admin/profile"}),Me=()=>({name:"Create New Profile",link:"#/home/admin/profile/create-new-restaurant"}),Re=(l,i)=>[l,i],Ce=(()=>{let i=class i{constructor(e,t){this.router=e,this.profileService=t,this.isSavingData=!1}onSave(){this.profileForm.isSubmitted=!0,this.profileForm.profileForm.valid&&this.createProfile()}createProfile(){let e=this.getProfileData();console.log(e),this.profileService.createProfile(e).subscribe({next:t=>{console.log(t),localStorage.setItem("hotel_id",t.id),this.profileForm.imageUpload.isFileChanged?this.updateProfileImage():this.router.navigateByUrl("home/admin/profile/view-edit-hotel/"+t.id)},error:t=>{console.log(t),this.errorToast.openToast()}})}updateProfileImage(){this.isSavingData=!0;let e=new FormData;e.append("profile_image",this.profileForm.imageUpload.file),e.append("hotel",localStorage.getItem("hotel_id")),e.append("created_by",localStorage.getItem("personal_id")),e.append("hotel_name",this.profileForm.profileForm.controls.hotelName.value),this.profileService.updateProfile(e).subscribe({next:t=>{console.log(t),this.router.navigateByUrl("home/admin/profile/view-edit-hotel/"+t.id)},error:t=>{console.log(t)},complete:()=>{this.isSavingData=!1}})}getProfileData(){return{created_by:localStorage.getItem("personal_id"),hotel_name:this.profileForm.profileForm.controls.hotelName.value,email:this.profileForm.profileForm.controls.email.value,about:this.profileForm.profileForm.controls.about.value,phone:this.profileForm.profileForm.controls.phone.value,address:this.profileForm.profileForm.controls.address.value,social_links:this.profileForm.profileForm.controls.socialMediaLink.value,website:this.profileForm.profileForm.controls.website.value}}};i.\u0275fac=function(t){return new(t||i)(F(I),F(k))},i.\u0275cmp=g({type:i,selectors:[["app-create-new-hotel"]],viewQuery:function(t,o){if(t&1&&(f(Ie,5,T),f(Ne,5,w),f(Le,5,P),f(Ve,5,he)),t&2){let a;u(a=h())&&(o.profileForm=a.first),u(a=h())&&(o.successToast=a.first),u(a=h())&&(o.errorToast=a.first),u(a=h())&&(o.deleteModalOne=a.first)}},decls:12,vars:7,consts:[["profileFormComponentReference",""],["errorToastComponentReference",""],["successToastComponentReference",""],[3,"pageTitle","navItems"],[1,"section","profile"],[1,"row"],[1,"col-md-8"],[1,"card","profile-edit"],[1,"card-body","pt-5"],[3,"saveProfile"]],template:function(t,o){if(t&1){let a=C();m(0,"app-topnav",3),r(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8)(6,"app-profile-form",9,0),d("saveProfile",function(){return _(a),S(o.onSave())}),n()()()()()(),m(8,"app-error-toast",null,1)(10,"app-success-toast",null,2)}t&2&&c("pageTitle","Profile")("navItems",M(4,Re,y(2,He),y(3,Me)))},dependencies:[N,w,P,T]});let l=i;return l})();var ke=["profileFormComponentReference"],xe=["successToastComponentReference"],Ue=["errorToastComponentReference"],Qe=()=>({name:"View Hotel Profile",link:"#/home/admin/profile"}),Ae=l=>[l],B=(()=>{let i=class i{constructor(e,t){this.router=e,this.profileService=t,this.hotelName="Hotel Name",this.apiUrl=Y.apiBaseUrl,this.profileImage="",this.isSavingData=!1}ngAfterViewInit(){this.getProfile()}onSave(){this.profileForm.isSubmitted=!0,this.profileForm.profileForm.valid&&(this.updateProfile(),this.profileForm.imageUpload.isFileChanged&&this.uploadProfileImage())}getProfile(){this.profileService.getProfile().subscribe({next:e=>{console.log(e),this.setProfileData(e)},error:e=>{console.log(e)}})}updateProfile(){let e=this.getProfileData();console.log(e),this.profileService.updateProfile(e).subscribe({next:t=>{console.log(t),this.successToast.openToast()},error:t=>{console.log(t),this.errorToast.openToast()}})}uploadProfileImage(){this.isSavingData=!0;let e=new FormData;e.append("profile_image",this.profileForm.imageUpload.file),e.append("hotel",localStorage.getItem("hotel_id")),e.append("created_by",localStorage.getItem("personal_id")),e.append("hotel_name",this.profileForm.profileForm.controls.hotelName.value),this.profileService.updateProfile(e).subscribe({next:t=>{console.log(t)},error:t=>{console.log(t),this.errorToast.openToast(),this.isSavingData=!1},complete:()=>{this.isSavingData=!1}})}setProfileData(e){this.hotelName=e.hotel_name||"Hotel Name",this.profileImage=e.profile_image||"",this.profileForm.profileForm.controls.hotelName.setValue(e.hotel_name),this.profileForm.profileForm.controls.email.setValue(e.email),this.profileForm.profileForm.controls.phone.setValue(e.phone),this.profileForm.profileForm.controls.address.setValue(e.address),this.profileForm.profileForm.controls.about.setValue(e.about),this.profileForm.profileForm.controls.createdBy.setValue(e.created_by),this.profileForm.imageUpload.setImageSrc(e.profile_image),this.profileForm.profileForm.controls.about.setValue(e.about),this.profileForm.profileForm.controls.socialMediaLink.setValue(e.social_links),this.profileForm.profileForm.controls.website.setValue(e.website)}getProfileData(){return{hotel_name:this.profileForm.profileForm.controls.hotelName.value,created_by:this.profileForm.profileForm.controls.createdBy.value,about:this.profileForm.profileForm.controls.about.value,social_links:this.profileForm.profileForm.controls.socialMediaLink.value,email:this.profileForm.profileForm.controls.email.value,phone:this.profileForm.profileForm.controls.phone.value,address:this.profileForm.profileForm.controls.address.value,website:this.profileForm.profileForm.controls.website.value}}};i.\u0275fac=function(t){return new(t||i)(F(I),F(k))},i.\u0275cmp=g({type:i,selectors:[["app-view-edit-hotel"]],viewQuery:function(t,o){if(t&1&&(f(ke,5,T),f(xe,5,w),f(Ue,5,P)),t&2){let a;u(a=h())&&(o.profileForm=a.first),u(a=h())&&(o.successToast=a.first),u(a=h())&&(o.errorToast=a.first)}},decls:35,vars:8,consts:[["profileFormComponentReference",""],["errorToastComponentReference",""],["successToastComponentReference",""],[3,"pageTitle","navItems"],[1,"section","profile"],[1,"row"],[1,"col-md-3"],[1,"card"],[1,"card-body","profile-card","pt-4","d-flex","flex-column","align-items-center"],["alt","Profile",3,"src"],[1,"social-links","mt-2"],["href","#",1,"twitter"],[1,"bi","bi-twitter"],["href","#",1,"facebook"],[1,"bi","bi-facebook"],["href","#",1,"instagram"],[1,"bi","bi-instagram"],["href","#",1,"linkedin"],[1,"bi","bi-linkedin"],[1,"card-body"],["routerLink","/home/admin/profile/hotel-list",1,"btn","btn-secondary","w-100"],[1,"bi","bi-box-arrow-in-right"],[1,"col-md-8"],[1,"card","profile-edit"],[1,"card-header"],[3,"saveProfile"],[3,"message"]],template:function(t,o){if(t&1){let a=C();m(0,"app-topnav",3),r(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8),m(6,"img",9),r(7,"h2"),s(8),n(),r(9,"div",10)(10,"a",11),m(11,"i",12),n(),r(12,"a",13),m(13,"i",14),n(),r(14,"a",15),m(15,"i",16),n(),r(16,"a",17),m(17,"i",18),n()()()(),r(18,"div",7)(19,"div",19)(20,"button",20),s(21," Switch Accounts "),m(22,"i",21),n()()()(),r(23,"div",22)(24,"div",23)(25,"div",24)(26,"h5"),s(27,"View Edit Profile"),n()(),r(28,"div",19)(29,"app-profile-form",25,0),d("saveProfile",function(){return _(a),S(o.onSave())}),n()()()()()(),m(31,"app-error-toast",null,1)(33,"app-success-toast",26,2)}t&2&&(c("pageTitle","Profile")("navItems",z(6,Ae,y(5,Qe))),p(6),c("src",o.apiUrl+o.profileImage,O),p(2),D(o.hotelName),p(25),c("message","Profile updated successfully!"))},dependencies:[R,N,w,P,T]});let l=i;return l})();var qe=()=>({name:"View Hotel Profile",link:"#/home/admin/profile"}),Be=()=>({name:"My Hotels List",link:"#/home/admin/profile/hotel-list"}),je=(l,i)=>[l,i];function Oe(l,i){if(l&1){let v=C();r(0,"tr",19),d("click",function(){let t=_(v).$implicit,o=U();return S(o.gotoProfile(t.hotel.id))}),r(1,"td"),s(2),n(),r(3,"td"),s(4),n(),r(5,"td"),s(6),n(),r(7,"td"),s(8),n()()}if(l&2){let v=i.$implicit;p(2),D(v.hotel.hotel_name),p(2),D(v.hotel.email),p(2),D(v.hotel.phone),p(2),D(v.hotel.address)}}function Ge(l,i){if(l&1&&(r(0,"tr")(1,"td",20),m(2,"app-table-loader",21),n()()),l&2){let v=U();p(2),c("isLoading",v.isFetchingListData)("isNoData",v.isDataAvailable)}}var ye=(()=>{let i=class i{constructor(e,t){this.router=e,this.usersService=t,this.hotelListData=[],this.isFetchingListData=!1,this.isDataAvailable=!0,this.filterQuery="",this.pagination={currentPage:0,totalPages:0,totalItems:0},this.sorting={currentField:"created_at",currentDirection:"-"}}ngOnInit(){this.getAllUserHotels()}getAllUserHotels(){this.isFetchingListData=!0,this.usersService.getAllUserHotels().subscribe({next:e=>{console.log(e),this.hotelListData=e.results,this.pagination.currentPage=e.current_page-1,this.pagination.totalPages=e.total_pages,this.pagination.totalItems=e.count,this.isDataAvailable=this.pagination.totalItems>0,this.isFetchingListData=!1},error:e=>{console.error(e),this.isFetchingListData=!1}})}pageSelected(e){this.pagination.currentPage=e,this.getAllUserHotels()}columnSorted(e){this.sorting.currentField=e.field,this.sorting.currentDirection=e.direction,this.getAllUserHotels()}tableFiltered(e){this.filterQuery=e,this.getAllUserHotels()}gotoProfile(e){localStorage.setItem("hotel_id",e),this.router.navigateByUrl("home/admin/profile/view-edit-hotel/"+e)}};i.\u0275fac=function(t){return new(t||i)(F(I),F(ge))},i.\u0275cmp=g({type:i,selectors:[["app-hotel-list"]],decls:31,vars:28,consts:[[3,"pageTitle","navItems"],[1,"row"],[1,"col-md-3"],[1,"card"],[1,"card-body"],["routerLink","/home/admin/profile/create-new-hotel",1,"btn","btn-primary","w-100"],[1,"bi","bi-box-arrow-in-right"],[1,"col-md-9","mx-auto"],[1,"card-title"],[1,"d-inline-block","w-100","mb-3"],[3,"tableFiltered","placeholder"],[1,"table-responsive"],[1,"table","table-sm","table-hover","table-bordered"],["width","30%"],[3,"columnSorted","columnTitle","thisField","currentField","currentDirection"],["width","20%"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"pageSelected","totalItems","currentPage"],[3,"click"],["colspan","4"],[3,"isLoading","isNoData"]],template:function(t,o){t&1&&(m(0,"app-topnav",0),r(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5),s(6," Create New Hotel "),m(7,"i",6),n()()()(),r(8,"div",7)(9,"div",3)(10,"div",4)(11,"h5",8),s(12,"Hotel List"),n(),r(13,"div",9)(14,"app-table-filtering",10),d("tableFiltered",function(E){return o.tableFiltered(E)}),n()(),r(15,"div",11)(16,"table",12)(17,"thead")(18,"tr")(19,"th",13)(20,"app-table-sorting",14),d("columnSorted",function(){return o.columnSorted({field:"hotel_name",direction:o.sorting.currentDirection==="-"?"+":"-"})}),n()(),r(21,"th",13)(22,"app-table-sorting",14),d("columnSorted",function(){return o.columnSorted({field:"email",direction:o.sorting.currentDirection==="-"?"+":"-"})}),n()(),r(23,"th",15)(24,"app-table-sorting",14),d("columnSorted",function(){return o.columnSorted({field:"address",direction:o.sorting.currentDirection==="-"?"+":"-"})}),n()(),r(25,"th",15)(26,"app-table-sorting",14),d("columnSorted",function(){return o.columnSorted({field:"address",direction:o.sorting.currentDirection==="-"?"+":"-"})}),n()()()(),r(27,"tbody"),G(28,Oe,9,4,"tr",16)(29,Ge,3,2,"tr",17),n()()(),r(30,"app-table-pagination",18),d("pageSelected",function(E){return o.pageSelected(E)}),n()()()()()),t&2&&(c("pageTitle","Profile")("navItems",M(25,je,y(23,qe),y(24,Be))),p(14),c("placeholder","Search Hotels"),p(6),c("columnTitle","Hotel Name")("thisField","hotel_name")("currentField",o.sorting.currentField)("currentDirection",o.sorting.currentDirection),p(2),c("columnTitle","Email")("thisField","email")("currentField",o.sorting.currentField)("currentDirection",o.sorting.currentDirection),p(2),c("columnTitle","Phone")("thisField","phone")("currentField",o.sorting.currentField)("currentDirection",o.sorting.currentDirection),p(2),c("columnTitle","Location")("thisField","address")("currentField",o.sorting.currentField)("currentDirection",o.sorting.currentDirection),p(2),c("ngForOf",o.hotelListData),p(),c("ngIf",o.isFetchingListData||!o.isDataAvailable),p(),c("totalItems",o.pagination.totalItems)("currentPage",o.pagination.currentPage))},dependencies:[W,J,R,N,pe,ce,de,se]});let l=i;return l})();var $e=[{path:"",component:be,children:[{path:"",component:B},{path:"create-new-hotel",component:Ce},{path:"view-edit-hotel/:id",component:B},{path:"hotel-list",component:ye}]}],we=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=H({type:i}),i.\u0275inj=V({imports:[Q.forChild($e),Q]});let l=i;return l})();var Bt=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=H({type:i}),i.\u0275inj=V({imports:[K,ae,me,we,ue,fe,ve,Fe]});let l=i;return l})();export{Bt as ProfileModule};
