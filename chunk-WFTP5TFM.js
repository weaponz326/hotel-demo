import{a as R}from"./chunk-2KFHIC7C.js";import{d as Ge}from"./chunk-FBWHH6JU.js";import{a as E,b as A,c as Z,d as ze}from"./chunk-UEPNQQPW.js";import{a as Qe}from"./chunk-DNX6FE6Q.js";import{a as Y,b as Oe,c as je,d as $e,e as Be}from"./chunk-3OLZPOF4.js";import{b as V,c as ne,d as N,e as k,f as M,g as Te,h as v,i as Pe,j as L,l as J,m as H,n as Ve,o as Ne,p as ke,r as Me,u as Le,v as Re}from"./chunk-RQYECNT5.js";import{b as I,c as qe}from"./chunk-IMD2KKFX.js";import{A as B,Aa as T,Ba as ge,C as he,Ca as _e,Da as Se,Ea as be,F as S,G as q,Ha as y,Ia as ye,Ja as $,K as g,Ka as De,L as _,La as Ce,Na as Fe,U as O,V as l,W as b,Ya as Ue,Za as z,_a as W,a as ae,aa as G,b as le,bb as we,ca as d,cb as Ie,d as te,da as ie,fb as Ee,ja as i,k as me,ka as r,la as c,lb as Ae,ma as x,mb as P,na as u,oa as D,p as ce,qb as re,ra as ve,rb as xe,s as pe,ta as C,u as de,ua as F,v as ue,va as U,xa as s,ya as h,z as fe,za as j}from"./chunk-TK5UYZ3D.js";var We=(()=>{let n=class n{};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=S({type:n,selectors:[["app-users"]],decls:1,vars:0,template:function(o,t){o&1&&c(0,"router-outlet")},dependencies:[Ae]});let a=n;return a})();var nt=()=>({name:"All Users",link:"#/home/users/users/users"}),ot=a=>[a];function st(a,n){if(a&1){let p=x();i(0,"tr",18),u("click",function(){let o=g(p).$implicit,t=D();return _(t.viewUserDetails(o.id))}),i(1,"td"),s(2),r(),i(3,"td"),s(4),r(),i(5,"td"),s(6),r(),i(7,"td"),s(8),r()()}if(a&2){let p=n.$implicit;l(2),T("",p.user==null?null:p.user.first_name," ",p.user==null?null:p.user.last_name,""),l(2),h(p.access_level),l(2),h(p.user==null?null:p.user.phone),l(2),h(p.user_status)}}function at(a,n){if(a&1&&(i(0,"tr")(1,"td",19),c(2,"app-table-loader",20),r()()),a&2){let p=D();l(2),d("isLoading",p.isFetchingListData)("isNoData",p.isDataAvailable)}}var Ye=(()=>{let n=class n{constructor(e,o){this.router=e,this.usersService=o,this.isFetchingListData=!1,this.isDataAvailable=!0,this.filterQuery="",this.pagination={currentPage:0,totalPages:0,totalItems:0},this.sorting={currentField:"created_at",currentDirection:"-"},this.userListData=[]}ngAfterViewInit(){this.getAllUser()}getAllUser(){this.isFetchingListData=!0,this.usersService.getAllUser().subscribe({next:e=>{console.log(e),this.userListData=e.results,this.pagination.currentPage=e.current_page,this.pagination.totalPages=e.total_pages,this.pagination.totalItems=e.count,this.isDataAvailable=this.pagination.totalItems>0},error:e=>{console.log(e),this.isDataAvailable=!1},complete:()=>{this.isFetchingListData=!1}})}pageSelected(){this.getAllUser()}columnSorted(e){console.log(e),this.sorting.currentField=e.field,this.sorting.currentDirection=e.direction,this.getAllUser()}tableFiltered(e){this.filterQuery=e,this.getAllUser()}viewUserDetails(e){localStorage.setItem("hotel_user_id",e),this.router.navigate(["/home/admin/users/edit-view-user/",e])}goToInviteUser(){this.router.navigate(["/home/admin/users/invite-user"])}};n.\u0275fac=function(o){return new(o||n)(b(P),b(R))},n.\u0275cmp=S({type:n,selectors:[["app-all-users"]],decls:27,vars:26,consts:[[3,"pageTitle","navItems"],[1,"row"],[1,"col-md-9"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"d-inline-block","w-100","mb-3"],[1,"btn","btn-primary","btn-sm","mb-3","grid-add-btn",3,"click"],[3,"tableFiltered","placeholder"],[1,"table-responsive"],[1,"table","table-sm","table-hover","table-bordered"],["width","25%"],[3,"columnSorted","columnTitle","thisField","currentField","currentDirection"],["width","20%"],["width","35%"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"pageSelected","totalItems","currentPage"],[3,"click"],["colspan","4"],[3,"isLoading","isNoData"]],template:function(o,t){o&1&&(c(0,"app-topnav",0),i(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),s(6,"Users"),r(),i(7,"div",6)(8,"button",7),u("click",function(){return t.goToInviteUser()}),s(9," Invite User "),r(),i(10,"app-table-filtering",8),u("tableFiltered",function(f){return t.tableFiltered(f)}),r()(),i(11,"div",9)(12,"table",10)(13,"thead")(14,"tr")(15,"th",11)(16,"app-table-sorting",12),u("columnSorted",function(f){return t.columnSorted(f)}),r()(),i(17,"th",13)(18,"app-table-sorting",12),u("columnSorted",function(f){return t.columnSorted(f)}),r()(),i(19,"th",13)(20,"app-table-sorting",12),u("columnSorted",function(f){return t.columnSorted(f)}),r()(),i(21,"th",14)(22,"app-table-sorting",12),u("columnSorted",function(f){return t.columnSorted(f)}),r()()()(),i(23,"tbody"),G(24,st,9,5,"tr",15)(25,at,3,2,"tr",16),r()()(),i(26,"app-table-pagination",17),u("pageSelected",function(){return t.pageSelected()}),r()()()()()),o&2&&(d("pageTitle","Users")("navItems",ye(24,ot,y(23,nt))),l(10),d("placeholder","Search Users"),l(6),d("columnTitle","Full Name")("thisField","user")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),l(2),d("columnTitle","Access Level")("thisField","access_level")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),l(2),d("columnTitle","Phone")("thisField","phone")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),l(2),d("columnTitle","User Status")("thisField","user_status")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),l(2),d("ngForOf",t.userListData),l(),d("ngIf",t.isFetchingListData||!t.isDataAvailable),l(),d("totalItems",t.pagination.totalItems)("currentPage",t.pagination.currentPage))},dependencies:[z,W,I,Oe,je,$e,Y]});let a=n;return a})();var Q=(()=>{let n=class n{constructor(){this.userForm=new M({})}ngOnInit(){console.log("User Form Component Initialized"),this.initUserForm(),this.userData?(console.log("User Data Received:",this.userData),this.populateForm(this.userData)):console.log("No user data received.")}initUserForm(){this.userForm=new M({first_name:new v({value:"",disabled:!0}),last_name:new v({value:"",disabled:!0}),email:new v({value:"",disabled:!0}),phone:new v({value:"",disabled:!0}),city:new v({value:"",disabled:!0}),state:new v({value:"",disabled:!0}),country:new v({value:"",disabled:!0}),zipcode:new v({value:"",disabled:!0}),birthday:new v({value:"",disabled:!0}),website:new v({value:"",disabled:!0}),social_links:new v({value:"",disabled:!0}),bio:new v({value:"",disabled:!0})})}populateForm(e){console.log("Populating user form with data:",e),this.userForm.patchValue({first_name:e.first_name,last_name:e.last_name,email:e.email,phone:e.phone,city:e.city,state:e.state,country:e.country,zipcode:e.zipcode,birthday:e.birthday,website:e.website,social_links:e.social_links,bio:e.bio})}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=S({type:n,selectors:[["app-user-form"]],inputs:{userData:"userData"},decls:37,vars:1,consts:[[3,"formGroup"],[1,"row","mb-1"],[1,"col-md-4"],["for","first_name",1,"float-md-end","float-sm-start","col-form-label"],[1,"col-md-8"],["type","text","id","first_name","formControlName","first_name",1,"form-control"],["for","last_name",1,"float-md-end","float-sm-start","col-form-label"],["type","text","id","last_name","formControlName","last_name",1,"form-control"],["for","email",1,"float-md-end","float-sm-start","col-form-label"],["type","email","id","email","formControlName","email",1,"form-control"],["for","phone",1,"float-md-end","float-sm-start","col-form-label"],["type","tel","id","phone","formControlName","phone",1,"form-control"],["for","city",1,"float-md-end","float-sm-start","col-form-label"],["type","text","id","city","formControlName","city",1,"form-control"],["for","country",1,"float-md-end","float-sm-start","col-form-label"],["type","text","id","country","formControlName","country",1,"form-control"]],template:function(o,t){o&1&&(i(0,"form",0)(1,"div",1)(2,"div",2)(3,"label",3),s(4,"First Name:"),r()(),i(5,"div",4),c(6,"input",5),r()(),i(7,"div",1)(8,"div",2)(9,"label",6),s(10,"Last Name:"),r()(),i(11,"div",4),c(12,"input",7),r()(),i(13,"div",1)(14,"div",2)(15,"label",8),s(16,"Email:"),r()(),i(17,"div",4),c(18,"input",9),r()(),i(19,"div",1)(20,"div",2)(21,"label",10),s(22,"Phone Number:"),r()(),i(23,"div",4),c(24,"input",11),r()(),i(25,"div",1)(26,"div",2)(27,"label",12),s(28,"City:"),r()(),i(29,"div",4),c(30,"input",13),r()(),i(31,"div",1)(32,"div",2)(33,"label",14),s(34,"Country:"),r()(),i(35,"div",4),c(36,"input",15),r()()()),o&2&&d("formGroup",t.userForm)},dependencies:[L,V,N,k,J,H]});let a=n;return a})();var K=(()=>{let n=class n{constructor(e){this.http=e,this.apiBaseUrl=xe.apiBaseUrl}getProfile(){return this.http.get(`${this.apiBaseUrl}/personal/admin/personal-profile/personal-profile/${localStorage.getItem("personal_id")}`)}getProfile2(){return this.http.get(`${this.apiBaseUrl}/personal/admin/personal-profile/personal-profile/${localStorage.getItem("personal_profile_id")}`)}getSearchUserProfile(){return this.http.get(`${this.apiBaseUrl}/personal/admin/personal-profile/personal-profile/${localStorage.getItem("personal_search_user_id")}`)}updateProfile(e){return this.http.put(`${this.apiBaseUrl}/personal/admin/personal-profile/personal-profile/${localStorage.getItem("personal_id")}`,e)}getAllPersonalProfiles(){return this.http.get(`${this.apiBaseUrl}/personal/admin/personal-profile/search-list/`)}getAllPersonalProfileByName(e){return this.http.get(`${this.apiBaseUrl}/personal/admin/personal-profile/search-list?search=${e}`)}};n.\u0275fac=function(o){return new(o||n)(he(Ee))},n.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"});let a=n;return a})();var pt=["userFormComponentReference"],dt=["successToastComponentReference"],ut=["errorToastComponentReference"],ft=()=>({name:"All Users",link:"#/home/admin/users"}),ht=()=>({name:"Invite User",link:"#/home/admin/users/invite-user"}),vt=(a,n)=>[a,n],gt=(a,n)=>({"btn-success":a,"btn-outline-success":n});function _t(a,n){if(a&1){let p=x();i(0,"tr",19)(1,"td",20),u("click",function(){let o=g(p).$implicit,t=D();return _(t.viewUserDetails(o.id))}),c(2,"img",21),r(),i(3,"td",20),u("click",function(){let o=g(p).$implicit,t=D();return _(t.viewUserDetails(o.id))}),s(4),r(),i(5,"td",20),u("click",function(){let o=g(p).$implicit,t=D();return _(t.viewUserDetails(o.id))}),s(6),r(),i(7,"td",20),u("click",function(){let o=g(p).$implicit,t=D();return _(t.viewUserDetails(o.id))}),s(8),r(),i(9,"td")(10,"button",22),u("click",function(){let o=g(p).$implicit,t=D();return _(t.inviteUser(o.id))}),i(11,"span"),s(12),r()()()()}if(a&2){let p=n.$implicit,e=D();l(2),d("src",p.profile_image||"../assets/images/default.jpg",O),l(2),T(" ",p.first_name," ",p.last_name," "),l(2),j(" ",p==null?null:p.email," "),l(2),j(" ",p.phone," "),l(2),d("ngClass",$(8,gt,!p.isInvited,p.isInvited))("disabled",e.isSavingData||p.isInvited),l(2),h(p.isInvited?"Invited":"Invite")}}function St(a,n){if(a&1&&(i(0,"tr")(1,"td",23),c(2,"app-table-loader",24),r()()),a&2){let p=D();l(2),d("isLoading",p.isFetchingListData)("isNoData",p.isDataAvailable)}}var Xe=(()=>{let n=class n{constructor(e,o,t){this.router=e,this.usersService=o,this.profileService=t,this.destroy$=new te,this.searchTerms=new te,this.isSavingData=!1,this.isFetchingListData=!1,this.isDataAvailable=!0,this.filterQuery="",this.search="",this.pagination={currentPage:0,totalPages:0,totalItems:0},this.sorting={currentField:"created_at",currentDirection:"-"},this.userListData=[]}ngAfterViewInit(){this.getAllUsers(),this.searchTerms.pipe(ce(300),pe(),de(e=>(this.isFetchingListData=!0,this.profileService.getAllPersonalProfileByName(e))),ue(this.destroy$)).subscribe({next:e=>{this.updateUserList(e),console.log(e)},error:e=>{console.log(e),this.isDataAvailable=!1,this.userListData=[],this.isFetchingListData=!1}})}getAllUsers(){this.isFetchingListData=!0,this.profileService.getAllPersonalProfiles().subscribe({next:e=>{this.updateUserList(e)},error:e=>{console.log(e),this.isDataAvailable=!1,this.userListData=[],this.isFetchingListData=!1},complete:()=>{this.isFetchingListData=!1}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}searchProfiles(e){this.searchTerms.next(e)}pageSelected(){this.getAllUsers()}columnSorted(e){this.sorting.currentField=e.field,this.sorting.currentDirection=e.direction,this.getAllUsers()}tableFiltered(e){this.filterQuery=e,this.getAllUsers()}viewUserDetails(e){localStorage.setItem("personal_search_user_id",e),this.router.navigate(["/home/admin/users/invite-user/profile-info/",e])}inviteUser(e){this.isSavingData=!0;let o=this.userListData.findIndex(m=>m.id===e),t=this.getUserData(e);t?(console.log("Payload data:",JSON.stringify(t,null,2)),this.usersService.inviteUser(t).subscribe({next:m=>{console.log("Response:",JSON.stringify(m,null,2)),localStorage.setItem("user_personal_id",m.id),this.successToast.openToast(),this.userListData[o].isInvited=!0},error:m=>{console.log("Error:",JSON.stringify(m,null,2)),this.errorToast.openToast(),this.isSavingData=!1},complete:()=>{this.isSavingData=!1}})):(console.log("Error: User data is not valid"),this.isSavingData=!1)}getUserData(e){return{user:e,hotel:localStorage.getItem("hotel_id"),message:`Dear [User],

We would like to invite you to join our hotel as a user!

Please click on Accept to accept the invitation.

We look forward to having you as part of our team!

Best regards.`,invite_expiry:new Date().toISOString().split("T")[0],invitation_status:"Awaiting"}}updateUserList(e){if(e&&e.length>0){let o=e.map(t=>this.usersService.getUserInvites(t.id));me(o).subscribe({next:t=>{this.userListData=e.map((m,f)=>le(ae({},m),{isInvited:t[f]?.invited||!1})),this.pagination.currentPage=e.current_page,this.pagination.totalPages=e.total_pages,this.pagination.totalItems=e.length,this.isDataAvailable=e.length>0},error:t=>{console.error(t),this.userListData=[],this.isDataAvailable=!1},complete:()=>{this.isFetchingListData=!1}})}else this.userListData=[],this.isDataAvailable=!1,this.isFetchingListData=!1}};n.\u0275fac=function(o){return new(o||n)(b(P),b(R),b(K))},n.\u0275cmp=S({type:n,selectors:[["app-invite-user"]],viewQuery:function(o,t){if(o&1&&(C(pt,5,Q),C(dt,5,E),C(ut,5,A)),o&2){let m;F(m=U())&&(t.userForm=m.first),F(m=U())&&(t.successToast=m.first),F(m=U())&&(t.errorToast=m.first)}},decls:40,vars:14,consts:[["successToastComponentReference",""],["errorToastComponentReference",""],[3,"pageTitle","navItems"],[1,"container","mt-5"],[1,"row","justify-content-center","mb-4"],[1,"col-md-8"],["id","search-form",3,"ngSubmit"],[1,"input-group","mb-3"],["type","text","placeholder","Search for name","id","search","name","search","aria-label","Recipient's username","aria-describedby","basic-addon2",1,"form-control",3,"ngModelChange","input","ngModel"],["type","submit",1,"btn","input-group-text"],[1,"feather","icon-search"],[1,"row","justify-content-center"],[1,"col-md-10"],[1,"mb-3"],[1,"table-responsive"],[1,"table","table-hover"],["style","cursor: pointer",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"message"],[2,"cursor","pointer"],[3,"click"],["alt","Profile Image",2,"width","50px","height","40px",3,"src"],["type","button",1,"btn",3,"click","ngClass","disabled"],["colspan","5"],[3,"isLoading","isNoData"]],template:function(o,t){if(o&1){let m=x();c(0,"app-topnav",2),i(1,"div",3)(2,"div",4)(3,"div",5)(4,"form",6),u("ngSubmit",function(){return g(m),_(t.searchProfiles(t.filterQuery))}),i(5,"div",7)(6,"input",8),be("ngModelChange",function(ee){return g(m),Se(t.filterQuery,ee)||(t.filterQuery=ee),_(ee)}),u("input",function(){return g(m),_(t.searchProfiles(t.filterQuery))}),r(),i(7,"button",9),c(8,"i",10),r()()()()(),i(9,"div",11)(10,"div",12)(11,"div",13),s(12," Showing "),i(13,"b"),s(14),r(),s(15," out of "),i(16,"b"),s(17),r(),s(18," results "),r(),i(19,"div",14)(20,"table",15)(21,"thead")(22,"tr")(23,"th"),s(24,"Image"),r(),i(25,"th"),s(26,"Name"),r(),i(27,"th"),s(28,"Email"),r(),i(29,"th"),s(30,"Phone"),r(),i(31,"th"),s(32,"Invite"),r()()(),i(33,"tbody"),G(34,_t,13,11,"tr",16)(35,St,3,2,"tr",17),r()()()()()(),c(36,"app-success-toast",18,0)(38,"app-error-toast",18,1)}o&2&&(d("pageTitle","Users")("navItems",$(11,vt,y(9,ft),y(10,ht))),l(6),_e("ngModel",t.filterQuery),l(8),h(t.userListData.length),l(3),h(t.pagination.totalItems),l(17),d("ngForOf",t.userListData),l(),d("ngIf",t.isFetchingListData||t.userListData.length===0),l(),d("message","Invitation Sent Successfully!"),l(2),d("message","Error sending invitation. Please try again later."))},dependencies:[Ue,z,W,L,V,N,k,Pe,Te,I,Y,E,A]});let a=n;return a})();var X=(()=>{let n=class n{constructor(){this.userAccessForm=new M({}),this.isSubmitted=!1}ngOnInit(){this.initUserAccessForm(),this.userData&&this.populateForm(this.userData)}initUserAccessForm(){this.userAccessForm=new M({user_id:new v(""),access_level:new v("",ne.required),user_status:new v("",ne.required),hotel_name:new v({value:"",disabled:!0}),hotel_address:new v({value:"",disabled:!0})})}populateForm(e){this.userAccessForm.controls.user_id.setValue(e.user.id),this.userAccessForm.controls.access_level.setValue(e.access_level),this.userAccessForm.controls.user_status.setValue(e.user_status),this.userAccessForm.controls.hotel_name.setValue(e.hotel.hotel_name),this.userAccessForm.controls.hotel_address.setValue(e.hotel.address)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=S({type:n,selectors:[["app-user-access-form"]],inputs:{userData:"userData"},decls:43,vars:5,consts:[[3,"formGroup"],["hidden","",1,"row","mb-1"],[1,"col-md-4"],["for","user_id",1,"float-md-end","float-sm-start","col-form-label"],[1,"col-md-8"],["type","text","id","user_id","formControlName","user_id",1,"form-control"],[1,"row","mb-1"],["for","access_level",1,"float-md-end","float-sm-start","col-form-label"],["id","access_level","formControlName","access_level","required","",1,"form-select"],["value","Admin"],["value","Manager"],["value","User"],["for","user_status",1,"float-md-end","float-sm-start","col-form-label"],["id","user_status","formControlName","user_status","required","",1,"form-select"],["value","Active"],["value","Inactive",1,"text-danger"],["value","Pending",1,"text-warning"],["for","hotel_name",1,"float-md-end","float-sm-start","col-form-label"],["type","text","id","hotel_name","formControlName","hotel_name",1,"form-control"],["for","hotel_address",1,"float-md-end","float-sm-start","col-form-label"],["type","text","id","hotel_address","formControlName","hotel_address",1,"form-control"]],template:function(o,t){o&1&&(i(0,"form",0)(1,"div",1)(2,"div",2)(3,"label",3),s(4,"User ID:"),r()(),i(5,"div",4),c(6,"input",5),r()(),i(7,"div",6)(8,"div",2)(9,"label",7),s(10,"Access Level:"),r()(),i(11,"div",4)(12,"select",8)(13,"option",9),s(14,"Admin"),r(),i(15,"option",10),s(16,"Manager"),r(),i(17,"option",11),s(18,"User"),r()()()(),i(19,"div",6)(20,"div",2)(21,"label",12),s(22,"User Status:"),r()(),i(23,"div",4)(24,"select",13)(25,"option",14),s(26,"Active"),r(),i(27,"option",15),s(28,"Inactive"),r(),i(29,"option",16),s(30,"Pending"),r()()()(),i(31,"div",6)(32,"div",2)(33,"label",17),s(34,"Hotel Name:"),r()(),i(35,"div",4),c(36,"input",18),r()(),i(37,"div",6)(38,"div",2)(39,"label",19),s(40,"Hotel Address:"),r()(),i(41,"div",4),c(42,"textarea",20),r()()()),o&2&&(d("formGroup",t.userAccessForm),l(12),ie("in-valid",t.userAccessForm.controls.access_level.invalid&&t.isSubmitted),l(12),ie("in-valid",t.userAccessForm.controls.user_status.invalid&&t.isSubmitted))},dependencies:[L,Ne,ke,V,Ve,N,k,Me,J,H]});let a=n;return a})();var yt=["userFormComponentReference"],Dt=["successToastComponentReference"],Ct=["errorToastComponentReference"],Ft=["deleteModalOneComponentReference"],Ut=["userAccessFormComponentReference"],wt=()=>({name:"All Users",link:"#/home/admin/users"}),It=()=>({name:"View-Edit User",link:"#/home/admin/users/edit-view-user"}),Et=(a,n)=>[a,n],et=(()=>{let n=class n{constructor(e,o,t){this.router=e,this.userService=o,this.profileService=t,this.isFetchingData=!1,this.isSavingData=!1,this.isDeletingData=!1}ngAfterViewInit(){this.getUserData()}onSaved(){this.userAccessFormComponent.isSubmitted=!0,this.userAccessFormComponent.userAccessForm.valid&&this.updateUser()}onDelete(){this.deleteModalOne.openModal()}getUserData(){this.isFetchingData=!0,this.userService.getHotelUser().subscribe({next:e=>{console.log("Profile data:",e),this.setUserData(e),this.isFetchingData=!1},error:e=>{console.log(e),this.isFetchingData=!1}})}updateUser(){this.isSavingData=!0;let e=this.getAllUserData();if(!e){console.error("Invalid data. Update operation aborted."),this.isSavingData=!1;return}console.log("Payload data:",JSON.stringify(e,null,2)),this.userService.updateUser(e).subscribe({next:o=>{console.log("Response:",o),this.isSavingData=!1,this.successToast.openToast()},error:o=>{console.log("Error:",o),this.isSavingData=!1}})}deleteUser(){this.isDeletingData=!0,this.userService.deleteUser().subscribe({next:e=>{console.log(e),this.isDeletingData=!1,this.router.navigateByUrl("/home/admin/settings/user-accounts/")},error:e=>{console.log(e),this.isDeletingData=!1,this.errorToast.openToast()}})}setUserData(e){console.log("Setting user form data:",e),this.userData=e.user,this.userAccessData={id:e.id,access_level:e.access_level,user_status:e.user_status,user:e.user,hotel:e.hotel},this.userFormComponent&&this.userFormComponent.populateForm(this.userData),this.userAccessFormComponent&&this.userAccessFormComponent.populateForm(this.userAccessData)}getAllUserData(){if(!this.userAccessFormComponent)return console.error("Form components are not available"),null;let e=this.userAccessFormComponent.userAccessForm.value;return console.error(e.user_id),{hotel:localStorage.getItem("hotel_id"),user:e.user_id,access_level:e.access_level,user_status:e.user_status}}cancel(){this.router.navigate(["/home/admin/users"])}};n.\u0275fac=function(o){return new(o||n)(b(P),b(R),b(Qe))},n.\u0275cmp=S({type:n,selectors:[["app-edit-view-user"]],viewQuery:function(o,t){if(o&1&&(C(yt,5,Q),C(Dt,5,E),C(Ct,5,A),C(Ft,5,Z),C(Ut,5,X)),o&2){let m;F(m=U())&&(t.userFormComponent=m.first),F(m=U())&&(t.successToast=m.first),F(m=U())&&(t.errorToast=m.first),F(m=U())&&(t.deleteModalOne=m.first),F(m=U())&&(t.userAccessFormComponent=m.first)}},decls:29,vars:12,consts:[["userFormComponentReference",""],["userAccessFormComponentReference",""],["errorToastComponentReference",""],["successToastComponentReference",""],["deleteModalOneComponentReference",""],[3,"pageTitle","navItems"],[1,"row"],[1,"col-md-6"],[1,"card"],[1,"card-body"],[1,"card-title"],[3,"userData"],[1,"col","mt-3"],["type","button",1,"btn","btn-sm","btn-success","float-end","ms-2","form-control-btn",3,"click","disabled"],["type","button",1,"btn","btn-sm","btn-warning","float-end","ms-2","form-control-btn",3,"click","disabled"],["type","button",1,"btn","btn-sm","btn-danger","float-end","ms-2","form-control-btn",3,"click","disabled"],[3,"confirmEvent"]],template:function(o,t){if(o&1){let m=x();c(0,"app-topnav",5),i(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9)(5,"h5",10),s(6,"View-Edit User"),r(),c(7,"app-user-form",11,0),r()()(),i(9,"div",7)(10,"div",8)(11,"div",9)(12,"h5",10),s(13,"User Access Control"),r(),c(14,"app-user-access-form",11,1),i(16,"div",12)(17,"button",13),u("click",function(){return g(m),_(t.onSaved())}),s(18," Save "),r(),i(19,"button",14),u("click",function(){return g(m),_(t.cancel())}),s(20," Cancel "),r(),i(21,"button",15),u("click",function(){return g(m),_(t.onDelete())}),s(22," Delete "),r()()()()()(),c(23,"app-error-toast",null,2)(25,"app-success-toast",null,3),i(27,"app-delete-modal-one",16,4),u("confirmEvent",function(){return g(m),_(t.deleteUser())}),r()}o&2&&(d("pageTitle","Users")("navItems",$(9,Et,y(7,wt),y(8,It))),l(7),d("userData",t.userData),l(7),d("userData",t.userAccessData),l(3),d("disabled",t.isFetchingData||t.isSavingData),l(2),d("disabled",t.isFetchingData),l(2),d("disabled",t.isFetchingData||t.isDeletingData))},dependencies:[I,Z,E,A,Q,X]});let a=n;return a})();var At=()=>({name:"All Users",link:"#/home/admin/users"}),xt=()=>({name:"Invite Users",link:"#/home/admin/users/invite-user"}),Tt=()=>({name:"User Profile Info",link:"#/home/admin/users/profile-info"}),Pt=(a,n,p)=>[a,n,p],tt=(()=>{let n=class n{constructor(e){this.profileService=e,this.userProfile={}}ngOnInit(){this.getUserProfile()}getUserProfile(){this.profileService.getSearchUserProfile().subscribe({next:e=>{this.userProfile=e},error:e=>{console.log(e)}})}getAge(e){let o=new Date(e),t=new Date,m=t.getFullYear()-o.getFullYear(),f=t.getMonth()-o.getMonth();return(f<0||f===0&&t.getDate()<o.getDate())&&m--,m}};n.\u0275fac=function(o){return new(o||n)(b(K))},n.\u0275cmp=S({type:n,selectors:[["app-profile-info"]],decls:81,vars:30,consts:[[3,"pageTitle","navItems"],[1,"container","my-5"],[1,"row"],["data-aos","fade-right",1,"col-lg-4"],["alt","Profile Image","alt","User avatar",1,"img-responsive",2,"width","400px","height","400px",3,"src"],["data-aos","fade-left",1,"col-lg-8","pt-4","pt-lg-0","content"],[1,"fst-italic"],[1,"col-lg-6"],[1,"mb-3"],[1,"bi","bi-chevron-right"],["target","_blank",3,"href"],[1,"col-lg-12"],[1,"mt-4"]],template:function(o,t){o&1&&(c(0,"app-topnav",0),i(1,"div",1)(2,"div",2)(3,"div",3),c(4,"img",4),r(),i(5,"div",5)(6,"h3"),s(7),r(),i(8,"p",6),s(9),r(),i(10,"div",2)(11,"div",7)(12,"ul")(13,"li",8),c(14,"i",9),i(15,"strong"),s(16,"Birthday: "),r(),i(17,"span"),s(18),Ce(19,"date"),r()(),i(20,"li",8),c(21,"i",9),i(22,"strong"),s(23,"Website: "),r(),i(24,"span")(25,"a",10),s(26),r()()(),i(27,"li",8),c(28,"i",9),i(29,"strong"),s(30,"Phone: "),r(),i(31,"span"),s(32),r()(),i(33,"li",8),c(34,"i",9),i(35,"strong"),s(36,"Location: "),r(),i(37,"span"),s(38),r()(),i(39,"li",8),c(40,"i",9),i(41,"strong"),s(42,"Zipcode: "),r(),i(43,"span"),s(44),r()()()(),i(45,"div",7)(46,"ul")(47,"li",8),c(48,"i",9),i(49,"strong"),s(50,"Age: "),r(),i(51,"span"),s(52),r()(),i(53,"li",8),c(54,"i",9),i(55,"strong"),s(56,"Degree: "),r(),i(57,"span"),s(58),r()(),i(59,"li",8),c(60,"i",9),i(61,"strong"),s(62,"Email: "),r(),i(63,"span"),s(64),r()(),i(65,"li",8),c(66,"i",9),i(67,"strong"),s(68,"Interests: "),r(),i(69,"span"),s(70),r()(),i(71,"li",8),c(72,"i",9),i(73,"strong"),s(74,"Social Links: "),r(),i(75,"span"),s(76),r()()()(),i(77,"div",11)(78,"ul")(79,"li",12),s(80),r()()()()()()()),o&2&&(d("pageTitle","Users")("navItems",De(26,Pt,y(23,At),y(24,xt),y(25,Tt))),l(4),d("src",t.userProfile.profile_image||"../assets/images/default.jpg",O),l(3),T("",t.userProfile.first_name," ",t.userProfile.last_name,""),l(2),h(t.userProfile.bio),l(9),h(Fe(19,20,t.userProfile.birthday,"MMMM d, y")),l(7),ve("href",t.userProfile.website,O),l(),h(t.userProfile.website),l(6),h(t.userProfile.phone),l(6),ge("",t.userProfile.city,", ",t.userProfile.state,", ",t.userProfile.country,""),l(6),h(t.userProfile.zipcode),l(8),h(t.getAge(t.userProfile.birthday)),l(6),h(t.userProfile.degree||"N/A"),l(6),h(t.userProfile.email),l(6),h(t.userProfile.interests||"N/A"),l(6),h(t.userProfile.social_links||"N/A"),l(4),j("Bio: ",t.userProfile.bio,""))},dependencies:[I,we]});let a=n;return a})();var Vt=[{path:"",component:We,children:[{path:"",component:Ye},{path:"edit-view-user/:id",component:et},{path:"invite-user",component:Xe},{path:"invite-user/profile-info/:id",component:tt}]}],it=(()=>{let n=class n{};n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=q({type:n}),n.\u0275inj=B({imports:[re.forChild(Vt),re]});let a=n;return a})();var Vi=(()=>{let n=class n{};n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=q({type:n}),n.\u0275inj=B({imports:[Ie,Le,Re,it,qe,Be,Ge,ze]});let a=n;return a})();export{Vi as UsersModule};
