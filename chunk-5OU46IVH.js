import{a as Me}from"./chunk-PWEP6JZV.js";import{a as A}from"./chunk-RZE7YYSQ.js";import"./chunk-K5QABCWY.js";import"./chunk-FBWHH6JU.js";import{a as M}from"./chunk-DQC53J6Z.js";import{b as Q}from"./chunk-227JUHIO.js";import{a as O,b as L,c as N,d as Ne}from"./chunk-UEPNQQPW.js";import"./chunk-JRFFUKYU.js";import"./chunk-MFPXOXAK.js";import{a as W,b as Oe,c as X,d as Z,e as ee}from"./chunk-3OLZPOF4.js";import{b as ge,c as _e,d as be,e as ve,f as Ce,j as Se,k as Fe,l as ye,m as Ie,n as we,o as De,p as Te,q as Ee,t as Ve,u as Re,v as Be}from"./chunk-RQYECNT5.js";import{b as B,c as Le}from"./chunk-IMD2KKFX.js";import{A as q,F as S,G as j,Ga as ue,Ha as I,Ia as pe,Ja as U,K as f,L as k,La as w,Ma as D,Q as ie,R as le,V as a,W as C,Za as H,_a as z,a as G,aa as $,ab as he,b as P,ba as oe,bb as Y,ca as m,cb as J,da as ae,ga as se,ha as me,ia as de,ja as n,ka as r,kb as fe,la as d,lb as ke,ma as y,mb as R,na as u,nb as K,oa as V,qb as ne,ta as g,ua as _,va as b,xa as s,ya as F}from"./chunk-TK5UYZ3D.js";var Qe=(()=>{let i=class i{};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=S({type:i,selectors:[["app-checkin-checkout"]],decls:1,vars:0,template:function(o,t){o&1&&d(0,"router-outlet")},dependencies:[ke]});let l=i;return l})();var Ye=()=>({name:"All Check-In",link:"#/home/guests/checkin-checkout/all-checkin"}),Je=l=>[l];function Ke(l,i){if(l&1){let p=y();n(0,"tr",16),u("click",function(){let o=f(p).$implicit,t=V();return k(t.viewCheckInDetails(o.id))}),n(1,"td"),s(2),r(),n(3,"td"),s(4),r(),n(5,"td"),s(6),w(7,"date"),r(),n(8,"td"),s(9),w(10,"date"),r()()}if(l&2){let p=i.$implicit;a(2),F(p.guest==null?null:p.guest.guest_name),a(2),F(p.room==null?null:p.room.room_number),a(2),F(D(7,4,p.check_in_date)),a(3),F(D(10,6,p.check_out_date))}}function We(l,i){if(l&1&&(n(0,"tr")(1,"td",17),d(2,"app-table-loader",18),r()()),l&2){let p=V();a(2),m("isLoading",p.isFetchingListData)("isNoData",p.isDataAvailable)}}var ce=(()=>{let i=class i{constructor(e,o){this.router=e,this.checkInOutService=o,this.checkIns=[],this.isFetchingListData=!0,this.isDataAvailable=!0,this.filterQuery="",this.pagination={currentPage:0,totalPages:0,totalItems:0},this.sorting={currentField:"created_at",currentDirection:"-"}}pageSelected(){this.getCheckIns()}columnSorted(e){console.log(e),this.sorting.currentField=e.field,this.sorting.currentDirection=e.direction,this.getCheckIns()}tableFiltered(e){this.filterQuery=e,this.getCheckIns()}ngAfterViewInit(){this.getCheckIns()}getCheckIns(){this.checkInOutService.getAllCheckInOuts().subscribe({next:e=>{console.log(e.results),this.checkIns=e.results,this.pagination.currentPage=e.current_page,this.pagination.totalPages=e.total_pages,this.pagination.totalItems=e.count,this.pagination.totalItems==0&&(this.isDataAvailable=!1)},error:e=>{console.error("Error occurred:",e),this.checkIns=[],this.isFetchingListData=!1},complete:()=>{console.log("Request completed"),this.isFetchingListData=!1}})}viewCheckInDetails(e){localStorage.setItem("hotel_check_in_check_out_id",e),this.router.navigate(["/home/guests/checkin-checkout/edit-view-checkin-checkout/",e])}goToCreateCheckIn(){this.router.navigate(["/home/checkIns/checkIns/create-checkIn"])}};i.\u0275fac=function(o){return new(o||i)(C(R),C(M))},i.\u0275cmp=S({type:i,selectors:[["app-all-checkin-checkout"]],decls:26,vars:24,consts:[[3,"pageTitle","navItems"],[1,"row"],[1,"col-md-9"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"d-inline-block","w-100","mb-3"],["routerLink","/home/guests/checkin-checkout/create-checkin",1,"btn","btn-primary","grid-add-btn"],[3,"placeholder"],[1,"table-responsive"],[1,"table","table-sm","table-hover","table-bordered"],["width","40%"],[3,"columnSorted","columnTitle","thisField","currentField","currentDirection"],["width","20%"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"click"],["colspan","4"],[3,"isLoading","isNoData"]],template:function(o,t){o&1&&(d(0,"app-topnav",0),n(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),s(6,"All Check-In"),r(),n(7,"div",6)(8,"a",7),s(9,"New Check-In "),r(),d(10,"app-table-filtering",8),r(),n(11,"div",9)(12,"table",10)(13,"thead")(14,"tr")(15,"th",11)(16,"app-table-sorting",12),u("columnSorted",function(h){return t.columnSorted(h)}),r()(),n(17,"th",13)(18,"app-table-sorting",12),u("columnSorted",function(h){return t.columnSorted(h)}),r()(),n(19,"th",13)(20,"app-table-sorting",12),u("columnSorted",function(h){return t.columnSorted(h)}),r()(),n(21,"th",13)(22,"app-table-sorting",12),u("columnSorted",function(h){return t.columnSorted(h)}),r()()()(),n(23,"tbody"),$(24,Ke,11,8,"tr",14)(25,We,3,2,"tr",15),r()()()()()()()),o&2&&(m("pageTitle","Check-In / Check-Out")("navItems",pe(22,Je,I(21,Ye))),a(10),m("placeholder","search check-in"),a(6),m("columnTitle","Guest Name")("thisField","guest_name")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),a(2),m("columnTitle","Room Number")("thisField","room_number")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),a(2),m("columnTitle","Check-In Date")("thisField","check_in_date")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),a(2),m("columnTitle","Check-Out Date")("thisField","check_out_date")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),a(2),m("ngForOf",t.checkIns),a(),m("ngIf",t.isFetchingListData||!t.isDataAvailable))},dependencies:[H,z,K,B,X,Z,W,Y]});let l=i;return l})();var te=function(l){return l.Confirmed="confirmed",l.Pending="pending",l.Checked_in="checked_in",l.Checked_out="checked_out",l.Cancelled="cancelled",l}(te||{});var Xe=["openButtonElementReference"],Ze=["closeButtonElementReference"];function et(l,i){if(l&1){let p=y();n(0,"tr",22),u("click",function(){let o=f(p).$implicit,t=V();return k(t.selectRow(o))}),n(1,"td"),s(2),r(),n(3,"td"),s(4),w(5,"date"),r(),n(6,"td"),s(7),w(8,"date"),r(),n(9,"td"),s(10),r()()}if(l&2){let p=i.$implicit;a(2),F(p.guest==null?null:p.guest.guest_name),a(2),F(D(5,4,p.planned_check_in_date)),a(3),F(D(8,6,p.planned_check_in_date)),a(3),F(p.room==null?null:p.room.room_number)}}function tt(l,i){if(l&1&&(n(0,"tr")(1,"td",23),d(2,"app-table-loader",24),r()()),l&2){let p=V();a(2),m("isLoading",p.isFetchingListData)("isNoData",p.isDataAvailable)}}var x=(()=>{let i=class i{constructor(e){this.bookingService=e,this.rowSelected=new le,this.closeTarget="",this.bookingsListData=[],this.isFetchingListData=!1,this.isDataAvailable=!0,this.filterQuery="",this.pagination={currentPage:0,totalPages:0,totalItems:0},this.sorting={currentField:"created_at",currentDirection:"-"}}openModal(){this.bookingsListData=[],this.getAllBookings(),this.openButton.nativeElement.click()}getAllBookings(){this.isFetchingListData=!0,this.bookingService.getAllHotelBookings().subscribe({next:e=>{console.log(e),this.bookingsListData=e.results,this.pagination.currentPage=e.current_page,this.pagination.totalPages=e.total_pages,this.pagination.totalItems=e.count,this.isFetchingListData=!1,this.pagination.totalItems==0&&(this.isDataAvailable=!1)},error:e=>{console.log(e)}})}pageSelected(){this.getAllBookings()}columnSorted(e){console.log(e),this.sorting.currentField=e.field,this.sorting.currentDirection=e.direction,this.getAllBookings()}tableFiltered(e){this.filterQuery=e,this.getAllBookings()}selectRow(e){this.rowSelected.emit(e),this.closeButton.nativeElement.click(),console.log(e)}};i.\u0275fac=function(o){return new(o||i)(C(Me))},i.\u0275cmp=S({type:i,selectors:[["app-select-booking"]],viewQuery:function(o,t){if(o&1&&(g(Xe,5,ie),g(Ze,5,ie)),o&2){let c;_(c=b())&&(t.openButton=c.first),_(c=b())&&(t.closeButton=c.first)}},inputs:{closeTarget:"closeTarget"},outputs:{rowSelected:"rowSelected"},standalone:!0,features:[ue],decls:32,vars:24,consts:[["openButtonElementReference",""],["closeButtonElementReference",""],["data-bs-toggle","modal","data-bs-target","#selectBookingModal",3,"hidden"],["id","selectBookingModal","tabindex","-1","aria-labelledby","selectBookingModalLabel","aria-hidden","true",1,"modal","fade","select-table-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header","bg-light"],["id","selectBookingModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close","data-bs-toggle","modal",1,"btn-close"],[1,"modal-body"],[1,"d-inline-block","w-100","mb-2"],[3,"tableFiltered","placeholder"],[1,"table-responsive"],[1,"table","table-sm","table-hover","table-bordered"],["width","30%"],[3,"columnSorted","columnTitle","thisField","currentField","currentDirection"],["width","15%"],["width","25%"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"totalItems"],["data-bs-dismiss","modal","data-bs-toggle","modal",3,"hidden"],[3,"click"],["colspan","5"],[3,"isLoading","isNoData"]],template:function(o,t){if(o&1){let c=y();n(0,"button",2,0),s(2,` Launch demo modal
`),r(),n(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"span",7),s(8,"Select Hotel Booking"),r(),d(9,"button",8),r(),n(10,"div",9)(11,"div",10)(12,"app-table-filtering",11),u("tableFiltered",function(){return f(c),k(t.tableFiltered)}),r()(),n(13,"div",12)(14,"table",13)(15,"thead")(16,"tr")(17,"th",14)(18,"app-table-sorting",15),u("columnSorted",function(v){return f(c),k(t.columnSorted(v))}),r()(),n(19,"th",16)(20,"app-table-sorting",15),u("columnSorted",function(v){return f(c),k(t.columnSorted(v))}),r()(),n(21,"th",14)(22,"app-table-sorting",15),u("columnSorted",function(v){return f(c),k(t.columnSorted(v))}),r()(),n(23,"th",17)(24,"app-table-sorting",15),u("columnSorted",function(v){return f(c),k(t.columnSorted(v))}),r()()()(),n(25,"tbody"),$(26,et,11,8,"tr",18)(27,tt,3,2,"tr",19),r()(),d(28,"app-table-pagination",20),r()(),n(29,"button",21,1),s(31," Launch demo modal "),r()()()()}o&2&&(m("hidden",!0),a(9),oe("data-bs-target",t.closeTarget),a(3),m("placeholder","Search Bookings"),a(6),m("columnTitle","Guest Name")("thisField","name")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),a(2),m("columnTitle","Planned Check-In Date")("thisField","check_in_date")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),a(2),m("columnTitle","Planned Check-Out Date")("thisField","check_out_date")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),a(2),m("columnTitle","Room No.")("thisField","room_number")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),a(2),m("ngForOf",t.bookingsListData),a(),m("ngIf",!t.isFetchingListData||!t.isDataAvailable),a(),m("totalItems",t.bookingsListData.length),a(),m("hidden",!0),oe("data-bs-target",t.closeTarget))},dependencies:[J,H,z,Y,ee,Oe,X,Z,W]});let l=i;return l})();var ot=["selectGuestComponentReference"],nt=["selectBookingComponentReference"],rt=["selectRoomComponentReference"];function ct(l,i){if(l&1&&(n(0,"option"),s(1),w(2,"titlecase"),r()),l&2){let p=i.$implicit;a(),F(D(2,1,p))}}var T=(()=>{let i=class i{constructor(e){this.formBuilder=e,this.selectedGuestId="",this.selectedBookingId="",this.selectedRoomId="",this.isSubmitted=!1,this.checkInStatusOptions=Object.values(te),this.checkinForm=new Ce({}),this.isDisabled=!1}ngOnInit(){this.initializeFormData()}initializeFormData(){this.checkinForm=this.formBuilder.group({id:[{value:"",disabled:!0}],created_at:[{value:"",disabled:!0}],updated_at:[{value:"",disabled:!0}],deleted_at:[{value:"",disabled:!0}],hotel:[{value:"",disabled:!0}],guest:["",{disabled:!0,validators:_e.required}],room:[{value:"",disabled:!0}],booking:[{value:"",disabled:!0}],number_of_nights:[{value:0,disabled:!1}],check_in_date:[new Date],check_out_date:[new Date],checkin_id:[""],note:[""],status:[te.Checked_in]})}guestRowSelected(e){this.selectedGuestId=e?.id,this.checkinForm.controls.guest.setValue(e?.guest_name),console.log(e)}bookingRowSelected(e){this.selectedBookingId=e?.id,this.checkinForm.controls.booking.setValue(e?.guest?.guest_name),this.checkinForm.controls.room.setValue(e?.room?.room_number),this.selectedRoomId=e.room?.id,console.log(e)}roomRowSelected(e){this.selectedRoomId=e?.id,this.checkinForm.controls.room.setValue(e?.room_number),console.log(e)}};i.\u0275fac=function(o){return new(o||i)(C(Ve))},i.\u0275cmp=S({type:i,selectors:[["app-checkin-form"]],viewQuery:function(o,t){if(o&1&&(g(ot,5,Q),g(nt,5,x),g(rt,5,A)),o&2){let c;_(c=b())&&(t.selectGuest=c.first),_(c=b())&&(t.selectBooking=c.first),_(c=b())&&(t.selectRoom=c.first)}},decls:75,vars:3,consts:[["selectGuestComponentReference",""],["selectBookingComponentReference",""],["selectRoomComponentReference",""],[1,"module-form-control","form-group","row",3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"row","mb-1"],[1,"col-md-4"],["for","guest",1,"float-md-end","float-sm-start","col-form-label"],[1,"col-md-8"],[1,"input-group","w-100"],["id","guest","name","guest","formControlName","guest","readonly","",1,"form-control"],["type","button","title","Select Guest",1,"btn","btn-secondary",3,"click"],[1,"bi","bi-window"],["for","booking",1,"float-md-end","float-sm-start","col-form-label"],["id","booking","name","booking","formControlName","booking",1,"form-control"],["type","button","title","Select Booking",1,"btn","btn-secondary",3,"click"],["for","room",1,"float-md-end","float-sm-start","col-form-label"],["type","text","id","room","name","room","formControlName","room",1,"form-control"],["type","button","title","Select Room",1,"btn","btn-secondary",3,"click"],["for","number_of_nights",1,"float-md-end","float-sm-start","col-form-label"],["type","number","readonly","","min","0","id","number_of_nights","name","number_of_nights","formControlName","number_of_nights",1,"form-control"],["for","checkin_id",1,"float-md-end","float-sm-start","col-form-label"],["type","text","min","0","id","checkin_id","name","checkin_id","formControlName","checkin_id",1,"form-control"],["for","note",1,"float-md-end","float-sm-start","col-form-label"],["rows","3","id","note","name","note","formControlName","note",1,"form-control"],["for","check_in_date",1,"float-md-end","float-sm-start","col-form-label"],["type","date","id","check_in_date","name","check_in_date","formControlName","check_in_date",1,"form-control"],["for","status",1,"float-md-end","float-sm-start","col-form-label"],["id","status","name","status","formControlName","status",1,"form-control","form-select"],["for","check_out_date",1,"float-md-end","float-sm-start","col-form-label"],["type","date","id","check_out_date","name","check_out_date","formControlName","check_out_date",1,"form-control"],[3,"rowSelected"]],template:function(o,t){if(o&1){let c=y();n(0,"form",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"label",8),s(6,"Guest Name:"),r()(),n(7,"div",9)(8,"div",10),d(9,"input",11),n(10,"button",12),u("click",function(){return f(c),k(t.selectGuest.openModal())}),d(11,"i",13),r()()()(),n(12,"div",6)(13,"div",7)(14,"label",14),s(15,"Booking:"),r()(),n(16,"div",9)(17,"div",10),d(18,"input",15),n(19,"button",16),u("click",function(){return f(c),k(t.selectBooking.openModal())}),d(20,"i",13),r()()()(),n(21,"div",6)(22,"div",7)(23,"label",17),s(24,"Room No.:"),r()(),n(25,"div",9)(26,"div",10),d(27,"input",18),n(28,"button",19),u("click",function(){return f(c),k(t.selectRoom.openModal())}),d(29,"i",13),r()()()(),n(30,"div",6)(31,"div",7)(32,"label",20),s(33,"Number of Nights:"),r()(),n(34,"div",9),d(35,"input",21),r()(),n(36,"div",6)(37,"div",7)(38,"label",22),s(39,"Check-In ID :"),r()(),n(40,"div",9),d(41,"input",23),r()()(),n(42,"div",5)(43,"div",6)(44,"div",7)(45,"label",24),s(46,"Additional Notes:"),r()(),n(47,"div",9),d(48,"textarea",25),r()(),n(49,"div",6)(50,"div",7)(51,"label",26),s(52,"Checked-In Date/Time:"),r()(),n(53,"div",9),d(54,"input",27),r()(),n(55,"div",6)(56,"div",7)(57,"label",28),s(58,"Status:"),r()(),n(59,"div",9)(60,"select",29),me(61,ct,3,3,"option",null,se),r()()(),n(63,"div",6)(64,"div",7)(65,"label",30),s(66,"Checked-Out Date/Time:"),r()(),n(67,"div",9),d(68,"input",31),r()()()()(),n(69,"app-select-guest",32,0),u("rowSelected",function(v){return f(c),k(t.guestRowSelected(v))}),r(),n(71,"app-select-booking",32,1),u("rowSelected",function(v){return f(c),k(t.bookingRowSelected(v))}),r(),n(73,"app-select-room",32,2),u("rowSelected",function(v){return f(c),k(t.roomRowSelected(v))}),r()}o&2&&(m("formGroup",t.checkinForm),a(9),ae("is-invalid",t.checkinForm.controls.guest.invalid&&t.isSubmitted),a(52),de(t.checkInStatusOptions))},dependencies:[Se,De,Te,ge,Fe,we,be,ve,Ee,ye,Ie,Q,x,A,he]});let l=i;return l})();var lt=["successToastComponentReference"],at=["errorToastComponentReference"],st=["deleteModalOneComponentReference"],mt=()=>({name:"All Check-In",link:"#/home/guests/checkin-checkout"}),dt=()=>({name:"New Check-In",link:"#/home/guests/checkin-checkout/create-checkin"}),ut=(l,i)=>[l,i],qe=(()=>{let i=class i{constructor(e,o){this.checkInsService=e,this.router=o,this.isLoading=!1}onSave(){this.checkinForm.isSubmitted=!0,this.checkinForm.checkinForm.valid&&this.handleCreateCheckInOut()}handleCreateCheckInOut(){let e=this.getCheckInOutFormData();this.createCheckInOut(e)}handleCancelForm(){this.router.navigate(["/home/guests/checkin-checkout"])}getCheckInOutFormData(){let e=this.checkinForm.checkinForm.value,o=P(G({},e),{booking:this.checkinForm.selectedBookingId,guest:this.checkinForm.selectedGuestId,hotel:localStorage.getItem("hotel_id"),room:this.checkinForm.selectedRoomId});return console.log({updatedFormData:o}),o}createCheckInOut(e){this.isLoading=!0;let o=localStorage.getItem("hotel_id"),t=P(G({},e),{hotel:o});console.log(t),this.checkInsService.createCheckInOut(t).subscribe({next:()=>{console.log("CheckInOut has been created successfully"),this.isLoading=!1,this.successToast.openToast()},error:c=>{console.log(c.message),this.errorToast.openToast()},complete:()=>{console.log("Complete checkIn posting action"),this.router.navigate(["/home/guests/checkin-checkout"]),this.isLoading=!1}})}};i.\u0275fac=function(o){return new(o||i)(C(M),C(R))},i.\u0275cmp=S({type:i,selectors:[["app-create-check-in"]],viewQuery:function(o,t){if(o&1&&(g(T,5),g(lt,5,O),g(at,5,L),g(st,5,N)),o&2){let c;_(c=b())&&(t.checkinForm=c.first),_(c=b())&&(t.successToast=c.first),_(c=b())&&(t.errorToast=c.first),_(c=b())&&(t.deleteModal=c.first)}},decls:13,vars:9,consts:[[3,"pageTitle","navItems"],[1,"row"],[1,"col"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"mt-3"],["type","submit",1,"btn","btn-sm","btn-success","float-end","ms-2","form-control-btn",3,"click","disabled"],["type","reset",1,"btn","btn-sm","btn-warning","float-end","ms-2","form-control-btn",3,"click","disabled"]],template:function(o,t){o&1&&(d(0,"app-topnav",0),n(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),s(6,"Add New Check-In"),r(),d(7,"app-checkin-form"),n(8,"div",6)(9,"button",7),u("click",function(){return t.onSave()}),s(10," Save "),r(),n(11,"button",8),u("click",function(){return t.handleCancelForm()}),s(12," Cancel "),r()()()()()()),o&2&&(m("pageTitle","Check-In / Check-Out")("navItems",U(6,ut,I(4,mt),I(5,dt))),a(9),m("disabled",t.isLoading),a(2),m("disabled",t.isLoading))},dependencies:[B,T]});let l=i;return l})();var pt=["checkinForm"],ht=["successToastComponentReference"],ft=["errorToastComponentReference"],kt=["deleteModalOneComponentReference"],gt=()=>({name:"All Check-In",link:"#/home/guests/checkin-checkout/all-checkin-checkout"}),_t=()=>({name:"Edit-View Check-In",link:"#/home/guests/checkin-checkout/edit-view-checkin/1"}),bt=(l,i)=>[l,i],je=(()=>{let i=class i{constructor(e,o,t){this.route=e,this.router=o,this.checkinService=t,this.checkinId="",this.expectedCheckinId="",this.isLoading=!1}onSave(){this.checkinForm.isSubmitted=!0,this.checkinForm.checkinForm.valid&&this.handleUpdateCheckin()}onDelete(){this.deleteModal.openModal()}ngOnInit(){this.checkinId=this.route.snapshot.params.checkinId}ngAfterViewInit(){this.getCheckin()}getCheckin(){this.isLoading=!0,this.checkinService.getCheckInOutById(this.checkinId).subscribe({next:e=>{console.log("Successfully retrieved restaurant checkin",e),this.setCheckinFormData(e),this.expectedCheckin=e,this.expectedCheckinId=e.id,this.isLoading=!1},error:e=>{console.error(`Error retrieving restaurant checkin: ${e.message}`),this.isLoading=!1},complete:()=>{this.isLoading=!1,console.log("Fetching complete")}})}setCheckinFormData(e){this.checkinForm.checkinForm.patchValue(e),this.checkinForm.checkinForm.controls.guest.setValue(e.guest?.guest_name),this.checkinForm.checkinForm.controls.booking.setValue(e.booking?.booking_id),this.checkinForm.checkinForm.controls.room.setValue(e.room?.room_number);let o=this.formatDate(new Date(e.check_in_date)),t=this.formatDate(new Date(e.check_out_date));this.checkinForm.checkinForm.controls.check_in_date.setValue(o),this.checkinForm.checkinForm.controls.check_out_date.setValue(t);let c=this.calculateNumberOfNights(new Date(e.check_in_date),new Date(e.check_out_date));this.checkinForm.checkinForm.controls.number_of_nights.setValue(c)}formatDate(e){let o=e.getFullYear(),t=(e.getMonth()+1).toString().padStart(2,"0"),c=e.getDate().toString().padStart(2,"0");return`${o}-${t}-${c}`}calculateNumberOfNights(e,o){let t=new Date(e).setHours(0,0,0,0),v=(new Date(o).setHours(0,0,0,0)-t)/(1e3*3600*24);return Math.floor(v)}handleUpdateCheckin(){this.isLoading=!0;let e=P(G({},this.checkinForm.checkinForm.value),{hotel:localStorage.getItem("hotel_id")});console.log(e),this.checkinService.updateCheckInOutById(this.checkinId,e).subscribe({next:o=>{"Checkin update successful";this.isLoading=!1,this.successToast.openToast(),this.router.navigateByUrl("/home/guests/checkin-checkout")},error:o=>{console.log(o.message),this.errorToast.openToast(),this.isLoading=!1}})}handleDeleteCheckin(){this.isLoading=!0,this.checkinService.deleteCheckInOutById(this.checkinId).subscribe({next:e=>{console.log(e),this.successToast.openToast(),this.router.navigateByUrl("/home/checkins/checkins"),this.isLoading=!1},error:e=>{console.log(e),this.errorToast.openToast(),this.isLoading=!1}})}handleCancelEvent(){this.router.navigate(["/home/checkins/checkins"])}};i.\u0275fac=function(o){return new(o||i)(C(fe),C(R),C(M))},i.\u0275cmp=S({type:i,selectors:[["app-edit-view-check-in"]],viewQuery:function(o,t){if(o&1&&(g(pt,5,T),g(ht,5,O),g(ft,5,L),g(kt,5,N)),o&2){let c;_(c=b())&&(t.checkinForm=c.first),_(c=b())&&(t.successToast=c.first),_(c=b())&&(t.errorToast=c.first),_(c=b())&&(t.deleteModal=c.first)}},decls:33,vars:10,consts:[["checkinForm",""],["errorToastComponentReference",""],["successToastComponentReference",""],["deleteModalOneComponentReference",""],[3,"pageTitle","navItems"],[1,"row"],[1,"col"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card","py-3"],[1,"mt-3"],["type","submit",1,"btn","btn-sm","btn-success","float-end","ms-2","form-control-btn",3,"click","disabled"],["type","reset",1,"btn","btn-sm","btn-warning","float-end","ms-2","form-control-btn",3,"click","disabled"],["type","reset",1,"btn","btn-sm","btn-danger","float-end","ms-2","form-control-btn",3,"click","disabled"],[1,"col-md-6"],["routerLink","/home/finance/bills/create-bill",1,"btn","btn-secondary"],[1,"bi","bi-box-arrow-in-right"],[3,"confirmEvent"]],template:function(o,t){if(o&1){let c=y();d(0,"app-topnav",4),n(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"h5",9),s(6,"View Check-In"),r(),d(7,"app-checkin-form",null,0),r()()()(),n(9,"div",5)(10,"div",6)(11,"div",10)(12,"div",8)(13,"div",11)(14,"button",12),u("click",function(){return f(c),k(t.onSave())}),s(15," Save "),r(),n(16,"button",13),u("click",function(){return f(c),k(t.handleCancelEvent())}),s(17," Cancel "),r(),n(18,"button",14),u("click",function(){return f(c),k(t.onDelete())}),s(19," Delete "),r()()()()()(),n(20,"div",5)(21,"div",15)(22,"div",10)(23,"div",8)(24,"button",16),s(25," Create Bill "),d(26,"i",17),r()()()()(),d(27,"app-error-toast",null,1)(29,"app-success-toast",null,2),n(31,"app-delete-modal-one",18,3),u("confirmEvent",function(){return f(c),k(t.handleDeleteCheckin())}),r()}o&2&&(m("pageTitle","Check-In / Check-Out")("navItems",U(7,bt,I(5,gt),I(6,_t))),a(14),m("disabled",t.isLoading),a(2),m("disabled",t.isLoading),a(2),m("disabled",t.isLoading))},dependencies:[K,B,N,O,L,T]});let l=i;return l})();var vt=[{path:"",component:Qe,children:[{path:"",component:ce},{path:"all-checkin-checkout",component:ce},{path:"create-checkin",component:qe},{path:"edit-view-checkin-checkout/:checkinId",component:je}]}],$e=(()=>{let i=class i{};i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=j({type:i}),i.\u0275inj=q({imports:[ne.forChild(vt),ne]});let l=i;return l})();var Vi=(()=>{let i=class i{};i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=j({type:i}),i.\u0275inj=q({imports:[J,Re,Be,$e,Le,ee,Q,x,A,Ne]});let l=i;return l})();export{Vi as CheckinCheckoutModule};
