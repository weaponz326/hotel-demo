import{a as Le}from"./chunk-RZE7YYSQ.js";import"./chunk-K5QABCWY.js";import{a as qe}from"./chunk-PODTOE5Y.js";import{a as ne}from"./chunk-TZ4ME6VN.js";import{a as V,d as Ve}from"./chunk-FBWHH6JU.js";import{a as Ne}from"./chunk-TMGJ6XNB.js";import"./chunk-DQC53J6Z.js";import{a as M,b as k,c as te,d as Re}from"./chunk-UEPNQQPW.js";import{a as ie}from"./chunk-JRFFUKYU.js";import"./chunk-MFPXOXAK.js";import"./chunk-6TRWRYDX.js";import{a as X,b as Z,c as B,d as ee,e as ke}from"./chunk-3OLZPOF4.js";import{b as Ce,c as se,d as Ae,e as Q,f as U,g as Y,h,j as P,l as we,m as Ee,n as De,o as J,p as W,r as Te,u as Ie,v as Me}from"./chunk-RQYECNT5.js";import{b as A,c as xe}from"./chunk-IMD2KKFX.js";import{A as G,C as de,F as v,G as H,Ha as S,Ia as z,Ja as L,K as y,Ka as fe,L as C,La as ve,Ma as he,V as c,W as F,Za as q,_a as K,aa as R,ab as ge,ca as d,cb as _e,da as ae,fb as be,ja as t,ka as i,la as m,lb as Se,ma as E,mb as T,na as p,nb as Fe,oa as N,qb as re,rb as ye,sa as pe,ta as g,ua as _,va as b,xa as s,ya as D,z as ce,za as ue}from"./chunk-TK5UYZ3D.js";var Qe=(()=>{let n=class n{};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=v({type:n,selectors:[["app-assets"]],decls:1,vars:0,template:function(o,r){o&1&&m(0,"router-outlet")},dependencies:[Se]});let a=n;return a})();var I=(()=>{let n=class n{constructor(e){this.http=e,this.apiBaseUrl=ye.apiBaseUrl}createAsset(e){return this.http.post(`${this.apiBaseUrl}/hotel/infrastructure/assets/assets/`,e)}getAllHotelAsset(){return this.http.get(`${this.apiBaseUrl}/hotel/infrastructure/assets/assets?hotel=${localStorage.getItem("hotel_id")}`)}getAsset(){return this.http.get(`${this.apiBaseUrl}/hotel/infrastructure/assets/assets/${localStorage.getItem("hotel_asset_id")}`)}updateAsset(e){return this.http.put(`${this.apiBaseUrl}/hotel/infrastructure/assets/assets/${localStorage.getItem("hotel_asset_id")}`,e)}deleteAsset(){return this.http.delete(`${this.apiBaseUrl}/hotel/infrastructure/assets/assets/${localStorage.getItem("hotel_asset_id")}`)}createMaintenance(e){return this.http.post(`${this.apiBaseUrl}/hotel/infrastructure/assets/asset-maintenance_requests/`,e)}getAllMaintenance(){return this.http.get(`${this.apiBaseUrl}/hotel/infrastructure/assets/maintenance?hotel=${localStorage.getItem("hotel_id")}`)}getMaintenance(){return this.http.get(`${this.apiBaseUrl}/hotel/infrastructure/assets/maintenance/${localStorage.getItem("hotel_asset_maintenance_request_id")}`)}updateMaintenance(e){return this.http.put(`${this.apiBaseUrl}/hotel/infrastructure/assets/maintenance/${localStorage.getItem("hotel_asset_maintenance_request_id")}`,e)}deleteMaintenance(){return this.http.delete(`${this.apiBaseUrl}/hotel/infrastructure/assets/maintenance/${localStorage.getItem("hotel_asset_maintenance_request_id")}`)}};n.\u0275fac=function(o){return new(o||n)(de(be))},n.\u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"});let a=n;return a})();var Ze=()=>({name:"All Assets",link:"#/home/assets/assets/all-assets"}),et=a=>[a];function tt(a,n){if(a&1){let f=E();t(0,"tr",21),p("click",function(){let o=y(f).$implicit,r=N();return C(r.viewAssetDetails(o.id))}),t(1,"td"),s(2),i(),t(3,"td"),s(4),i(),t(5,"td"),s(6),i(),t(7,"td"),s(8),i()()}if(a&2){let f=n.$implicit;c(2),D(f.asset_name),c(2),D(f.asset_number),c(2),D(f.asset_type),c(2),D(f.status)}}function it(a,n){if(a&1&&(t(0,"tr")(1,"td",22),m(2,"app-table-loader",23),i()()),a&2){let f=N();c(2),d("isLoading",f.isFetchingListData)("isNoData",f.isDataAvailable)}}var le=(()=>{let n=class n{constructor(e,o){this.router=e,this.assetsService=o,this.isFetchingListData=!1,this.isDataAvailable=!0,this.filterQuery="",this.pagination={currentPage:0,totalPages:0,totalItems:0},this.sorting={currentField:"created_at",currentDirection:"-"},this.assetListData=[]}ngAfterViewInit(){this.getAllHotelAsset()}getAllHotelAsset(){this.isFetchingListData=!0,this.assetsService.getAllHotelAsset().subscribe({next:e=>{console.log(e),this.assetListData=e.results,this.pagination.currentPage=e.current_page,this.pagination.totalPages=e.total_pages,this.pagination.totalItems=e.count,this.pagination.totalItems==0&&(this.isDataAvailable=!1)},error:e=>{console.log(e)},complete:()=>{this.isFetchingListData=!1}})}pageSelected(){this.getAllHotelAsset()}columnSorted(e){console.log(e),this.sorting.currentField=e.field,this.sorting.currentDirection=e.direction,this.getAllHotelAsset()}tableFiltered(e){this.filterQuery=e,this.getAllHotelAsset()}viewAssetDetails(e){localStorage.setItem("hotel_asset_id",e),this.router.navigate(["/home/infrastructure/assets/edit-view-asset/",e])}goToCreateAsset(){this.router.navigate(["/home/infrastructure/assets/create-asset"])}};n.\u0275fac=function(o){return new(o||n)(F(T),F(I))},n.\u0275cmp=v({type:n,selectors:[["app-all-assets"]],decls:31,vars:27,consts:[[3,"pageTitle","navItems"],[1,"row"],[1,"col-md-9"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"d-inline-block","w-100","mb-3"],[1,"btn","btn-primary","btn-sm","mb-3","grid-add-btn",3,"click"],[3,"tableFiltered","placeholder"],[1,"table-responsive"],[1,"table","table-sm","table-hover","table-bordered"],["width","30%"],[3,"columnSorted","columnTitle","thisField","currentField","currentDirection"],["width","15%"],["width","35%"],["width","20%"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"pageSelected","totalItems","currentPage"],[1,"col-md-3"],["link","/home/infrastructure/assets/all-maintenance","name","Go to All Maintenance"],[3,"click"],["colspan","4"],[3,"isLoading","isNoData"]],template:function(o,r){o&1&&(m(0,"app-topnav",0),t(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),s(6,"Assets"),i(),t(7,"div",6)(8,"button",7),p("click",function(){return r.goToCreateAsset()}),s(9," Add New Asset "),i(),t(10,"app-table-filtering",8),p("tableFiltered",function(u){return r.tableFiltered(u)}),i()(),t(11,"div",9)(12,"table",10)(13,"thead")(14,"tr")(15,"th",11)(16,"app-table-sorting",12),p("columnSorted",function(u){return r.columnSorted(u)}),i()(),t(17,"th",13)(18,"app-table-sorting",12),p("columnSorted",function(u){return r.columnSorted(u)}),i()(),t(19,"th",14)(20,"app-table-sorting",12),p("columnSorted",function(u){return r.columnSorted(u)}),i()(),t(21,"th",15)(22,"app-table-sorting",12),p("columnSorted",function(u){return r.columnSorted(u)}),i()()()(),t(23,"tbody"),R(24,tt,9,4,"tr",16)(25,it,3,2,"tr",17),i()()(),t(26,"app-table-pagination",18),p("pageSelected",function(){return r.pageSelected()}),i()()()(),t(27,"div",19)(28,"div",3)(29,"div",4),m(30,"app-page-link-button",20),i()()()()),o&2&&(d("pageTitle","Assets")("navItems",z(25,et,S(24,Ze))),c(10),d("placeholder","Search Assets"),c(6),d("columnTitle","Asset Name")("thisField","asset_name")("currentField",r.sorting.currentField)("currentDirection",r.sorting.currentDirection),c(2),d("columnTitle","Asset No#")("thisField","asset_number")("currentField",r.sorting.currentField)("currentDirection",r.sorting.currentDirection),c(2),d("columnTitle","Type")("thisField","asset_type")("currentField",r.sorting.currentField)("currentDirection",r.sorting.currentDirection),c(2),d("columnTitle","Status")("thisField","status")("currentField",r.sorting.currentField)("currentDirection",r.sorting.currentDirection),c(2),d("ngForOf",r.assetListData),c(),d("ngIf",r.isFetchingListData||!r.isDataAvailable),c(),d("totalItems",r.pagination.totalItems)("currentPage",r.pagination.currentPage)("totalItems",r.pagination.totalItems))},dependencies:[q,K,A,Z,B,ee,X,ie]});let a=n;return a})();var me=function(a){return a.Furniture="furniture",a.Equipment="equipment",a.Software="software",a.Hardware="hardware",a.Network="network",a.Service="service",a.Other="other",a.Room="room",a.Kitchen="kitchen",a.Bar="bar",a.Pool="pool",a.Gym="gym",a.Spa="spa",a.ConferenceRoom="conference_room",a.Restaurant="restaurant",a.Lounge="lounge",a.Reception="reception",a}(me||{});var ot=["imageUploadComponentReference"];function at(a,n){if(a&1&&(t(0,"option",30),s(1),ve(2,"titlecase"),i()),a&2){let f=n.$implicit;d("value",f),c(),ue(" ",he(2,2,f)," ")}}var x=(()=>{let n=class n{constructor(){this.assetForm=new U({}),this.assetTypes=Object.values(me),this.isSubmitted=!1}ngOnInit(){this.initAssetForm()}initAssetForm(){this.assetForm=new U({asset_name:new h("",se.required),asset_type:new h(""),asset_number:new h(""),model:new h(""),location:new h(""),manufacturer:new h(""),serial_number:new h(""),acquisition_date:new h("",se.required),status:new h("Active")})}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=v({type:n,selectors:[["app-asset-form"]],viewQuery:function(o,r){if(o&1&&g(ot,5,V),o&2){let l;_(l=b())&&(r.imageUpload=l.first)}},decls:74,vars:6,consts:[["imageUploadComponentReference",""],[3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"row","mb-1"],[1,"col-md-4"],["for","asset_name",1,"float-md-end","float-sm-start","col-form-label"],[1,"text-danger"],[1,"col-md-8"],["type","text","id","asset_name","name","asset_name","formControlName","asset_name","required","",1,"form-control"],["for","asset_type",1,"float-md-end","float-sm-start","col-form-label"],["id","asset_type","name","asset_type","formControlName","asset_type","required","",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["for","asset_number",1,"float-md-end","float-sm-start","col-form-label"],["type","text","id","asset_number","name","asset_number","formControlName","asset_number","required","",1,"form-control"],["for","model",1,"float-md-end","float-sm-start","col-form-label"],["type","text","id","model","name","model","formControlName","model",1,"form-control"],["for","location",1,"float-md-end","float-sm-start","col-form-label"],["type","text","id","location","name","location","formControlName","location",1,"form-control"],["for","manufacturer",1,"float-md-end","float-sm-start","col-form-label"],["type","text","id","manufacturer","name","manufacturer","formControlName","manufacturer",1,"form-control"],["for","serial_number",1,"float-md-end","float-sm-start","col-form-label"],["type","text","id","serial_number","name","serial_number","formControlName","serial_number",1,"form-control"],["for","acquisition_date",1,"float-md-end","float-sm-start","col-form-label"],["type","date","id","acquisition_date","name","acquisition_date","formControlName","acquisition_date",1,"form-control"],["for","status",1,"float-md-end","float-sm-start","col-form-label"],["id","status","name","status","formControlName","status","required","",1,"form-control"],["value","Active"],["value","Inactive"],["for","description",1,"float-md-end","float-sm-start","col-form-label"],[3,"value"]],template:function(o,r){o&1&&(t(0,"form",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"label",6)(6,"span",7),s(7," *"),i(),s(8," Asset Name:"),i()(),t(9,"div",8),m(10,"input",9),i()(),t(11,"div",4)(12,"div",5)(13,"label",10),s(14,"Asset Type:"),i()(),t(15,"div",8)(16,"select",11),R(17,at,3,4,"option",12),i()()(),t(18,"div",4)(19,"div",5)(20,"label",13),s(21,"Asset Number:"),i()(),t(22,"div",8),m(23,"input",14),i()(),t(24,"div",4)(25,"div",5)(26,"label",15),s(27,"Model:"),i()(),t(28,"div",8),m(29,"input",16),i()(),t(30,"div",4)(31,"div",5)(32,"label",17),s(33,"Location:"),i()(),t(34,"div",8),m(35,"input",18),i()(),t(36,"div",4)(37,"div",5)(38,"label",19),s(39,"Manufacturer:"),i()(),t(40,"div",8),m(41,"input",20),i()(),t(42,"div",4)(43,"div",5)(44,"label",21),s(45,"Serial Number:"),i()(),t(46,"div",8),m(47,"input",22),i()()(),t(48,"div",3)(49,"div",4)(50,"div",5)(51,"label",23)(52,"span",7),s(53," *"),i(),s(54," Acquisition Date:"),i()(),t(55,"div",8),m(56,"input",24),i()(),t(57,"div",4)(58,"div",5)(59,"label",25),s(60,"Status:"),i()(),t(61,"div",8)(62,"select",26)(63,"option",27),s(64,"Active"),i(),t(65,"option",28),s(66,"Inactive"),i()()()(),t(67,"div",4)(68,"div",5)(69,"label",29),s(70,"Asset Image:"),i()(),t(71,"div",8),m(72,"app-general-image-upload",null,0),i()()()()()),o&2&&(d("formGroup",r.assetForm),c(10),ae("is-invalid",r.assetForm.controls.asset_name.invalid&&r.isSubmitted),c(7),d("ngForOf",r.assetTypes),c(39),ae("is-invalid",r.assetForm.controls.acquisition_date.invalid&&r.isSubmitted))},dependencies:[q,P,J,W,Ce,De,Ae,Q,Te,we,Ee,V,ge]});let a=n;return a})();var lt=["assetFormComponentReference"],mt=["successToastComponentReference"],ct=["errorToastComponentReference"],dt=()=>({name:"All Assets",link:"#/home/infrastructure/assets"}),pt=()=>({name:"Create Asset",link:"#/home/infrastructure/create-asset"}),ut=(a,n)=>[a,n],$e=(()=>{let n=class n{constructor(e,o){this.router=e,this.assetService=o,this.isSavingData=!1}onSave(){this.assetForm.isSubmitted=!0,this.assetForm.assetForm.valid&&this.createAsset()}createAsset(){this.isSavingData=!0;let e=this.getAssetData();console.log(e),this.assetService.createAsset(e).subscribe({next:o=>{console.log(o),localStorage.setItem("hotel_asset_id",o.id),this.assetForm.imageUpload.isFileChanged?this.updateAssetImage():this.router.navigateByUrl("/home/infrastructure/assets/edit-view-asset/"+o.id),this.isSavingData=!1},error:o=>{console.log(o),this.errorToast.openToast(),this.isSavingData=!1}})}updateAssetImage(){let e=new FormData;e.append("asset_image",this.assetForm.imageUpload.file),e.append("hotel",localStorage.getItem("hotel_id")),e.append("asset_name",this.assetForm.assetForm.controls.asset_name.value),this.assetService.updateAsset(e).subscribe({next:o=>{console.log(o),this.router.navigateByUrl("/home/infrastructure/assets/edit-view-asset/"+localStorage.getItem("hotel_asset_id"))},error:o=>{console.log(o),this.errorToast.openToast()},complete:()=>{this.isSavingData=!1}})}getAssetData(){return{hotel:localStorage.getItem("hotel_id"),asset_name:this.assetForm.assetForm.controls.asset_name.value,asset_type:this.assetForm.assetForm.controls.asset_type.value,asset_number:this.assetForm.assetForm.controls.asset_number.value,model:this.assetForm.assetForm.controls.model.value,location:this.assetForm.assetForm.controls.location.value,manufacturer:this.assetForm.assetForm.controls.manufacturer.value,serial_number:this.assetForm.assetForm.controls.serial_number.value,acquisition_date:this.assetForm.assetForm.controls.acquisition_date.value,status:this.assetForm.assetForm.controls.status.value}}cancel(){this.router.navigate(["/home/infrastructure/assets"])}};n.\u0275fac=function(o){return new(o||n)(F(T),F(I))},n.\u0275cmp=v({type:n,selectors:[["app-create-asset"]],viewQuery:function(o,r){if(o&1&&(g(lt,5,x),g(mt,5,M),g(ct,5,k)),o&2){let l;_(l=b())&&(r.assetForm=l.first),_(l=b())&&(r.successToast=l.first),_(l=b())&&(r.errorToast=l.first)}},decls:17,vars:9,consts:[["assetFormComponentReference",""],["errorToastComponentReference",""],["successToastComponentReference",""],[3,"pageTitle","navItems"],[1,"row"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"col"],["type","submit",1,"btn","btn-sm","btn-success","float-end","ms-2","form-control-btn",3,"click","disabled"],["type","reset",1,"btn","btn-sm","btn-warning","float-end","ms-2","form-control-btn",3,"click","disabled"]],template:function(o,r){if(o&1){let l=E();m(0,"app-topnav",3),t(1,"div",4)(2,"div",5)(3,"div",6)(4,"h5",7),s(5,"Add New Asset"),i(),m(6,"app-asset-form",null,0),t(8,"div",8)(9,"button",9),p("click",function(){return y(l),C(r.onSave())}),s(10," Save "),i(),t(11,"button",10),p("click",function(){return y(l),C(r.cancel())}),s(12," Cancel "),i()()()()(),m(13,"app-error-toast",null,1)(15,"app-success-toast",null,2)}o&2&&(d("pageTitle","Assets")("navItems",L(6,ut,S(4,dt),S(5,pt))),c(9),d("disabled",r.isSavingData),c(2),d("disabled",r.isSavingData))},dependencies:[A,M,k,x]});let a=n;return a})();var ft=()=>({name:"All Assets",link:"#/home/infrastructure/assets"}),vt=()=>({name:"View Asset",link:"#/home/infrastructure/assets/view-asset/1"}),ht=()=>({name:"Asset Tracking",link:"#/home/infrastructure/assets/track-asset/1"}),gt=(a,n,f)=>[a,n,f],je=(()=>{let n=class n{};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=v({type:n,selectors:[["app-track-asset"]],decls:52,vars:12,consts:[[3,"pageTitle","navItems"],[1,"row"],[1,"col-md-6"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"row","mb-1"],[1,"col-md-4"],["for","name",1,"float-md-end","float-sm-start","col-form-label"],[1,"col-md-8"],["type","text","id","name","name","name","required","",1,"form-control"],["for","type",1,"float-md-end","float-sm-start","col-form-label"],["type","text","id","type","name","type","required","",1,"form-control"],["for","location",1,"float-md-end","float-sm-start","col-form-label"],["type","text","id","location","name","location",1,"form-control"],[1,"btn","btn-primary","grid-add-btn","mb-3"],[1,"table-responsive"],[1,"table","table-bordered","table-hover"],[3,"columnTitle"]],template:function(o,r){o&1&&(m(0,"app-topnav",0),t(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),s(6,"Asset Details"),i(),t(7,"form")(8,"div",6)(9,"div",7)(10,"label",8),s(11,"Asset Name:"),i()(),t(12,"div",9),m(13,"input",10),i()(),t(14,"div",6)(15,"div",7)(16,"label",11),s(17,"Asset Type:"),i()(),t(18,"div",9),m(19,"input",12),i()(),t(20,"div",6)(21,"div",7)(22,"label",13),s(23,"Location:"),i()(),t(24,"div",9),m(25,"input",14),i()()()()()()(),t(26,"div",1)(27,"div",9)(28,"div",3)(29,"div",4)(30,"h5",5),s(31,"Asset Allocation & Tracking"),i(),t(32,"button",15),s(33,"Allocate Asset"),i(),t(34,"div",16)(35,"table",17)(36,"thead")(37,"tr")(38,"th"),m(39,"app-table-sorting",18),i(),t(40,"th"),m(41,"app-table-sorting",18),i(),t(42,"th"),m(43,"app-table-sorting",18),i()()(),t(44,"tbody")(45,"tr")(46,"td"),s(47,"The guy it was assigned to"),i(),t(48,"td"),s(49,"Today"),i(),t(50,"td"),s(51,"Yesterday"),i()()()()()()()()()),o&2&&(d("pageTitle","Assets")("navItems",fe(8,gt,S(5,ft),S(6,vt),S(7,ht))),c(39),d("columnTitle","Recipient"),c(2),d("columnTitle","Allocation Date"),c(2),d("columnTitle","Return Date"))},dependencies:[P,Q,Y,A,B]});let a=n;return a})();var _t=["assetFormComponentReference"],bt=["imageUploadComponentReference"],St=["successToastComponentReference"],Ft=["errorToastComponentReference"],yt=["deleteModalOneComponentReference"],Ct=()=>({name:"All Assets",link:"#/home/infrastructure/assets"}),At=()=>({name:"Edit View Asset",link:"#/home/infrastructure/assets/view-asset"}),wt=(a,n)=>[a,n],Ge=(()=>{let n=class n{constructor(e,o){this.router=e,this.assetService=o,this.isLoading=!1,this.assetId=localStorage.getItem("hotel_asset_id")}ngAfterViewInit(){this.getAsset()}onSave(){this.assetForm.isSubmitted=!0,this.assetForm.assetForm.valid&&this.updateAsset()}onDelete(){this.deleteModalOne.openModal()}getAsset(){this.isLoading=!0,this.assetService.getAsset().subscribe({next:e=>{console.log(e),this.setAssetData(e),this.isLoading=!1},error:e=>{console.log(e),this.isLoading=!1}})}updateAsset(){let e=this.getAssetData();this.isLoading=!0,this.assetService.updateAsset(e).subscribe({next:o=>{console.log(o),this.assetForm.imageUpload.isFileChanged&&this.updateAssetImage(),this.isLoading=!1,this.successToast.openToast()},error:o=>{console.log(o),this.errorToast.openToast(),this.isLoading=!1}})}updateAssetImage(){let e=new FormData;e.append("asset_image",this.assetForm.imageUpload.file),e.append("asset_name",this.assetForm.assetForm.controls.asset_name.value),e.append("acquisition_date",this.assetForm.assetForm.controls.acquisition_date.value),e.append("hotel",localStorage.getItem("hotel_id")),this.isLoading=!0,this.assetService.updateAsset(e).subscribe({next:o=>{console.log(o),this.router.navigateByUrl("/home/infrastructure/assets")},error:o=>{console.log(o),this.isLoading=!1,this.errorToast.openToast()},complete:()=>{this.isLoading=!1}})}deleteAsset(){this.isLoading=!0,this.assetService.deleteAsset().subscribe({next:e=>{console.log(e),this.isLoading=!1,this.router.navigateByUrl("/home/infrastructure/assets")},error:e=>{console.log(e),this.isLoading=!1}})}cancel(){this.router.navigate(["/home/infrastructure/assets"])}setAssetData(e){this.assetForm.assetForm.controls.asset_name.setValue(e.asset_name),this.assetForm.assetForm.controls.asset_type.setValue(e.asset_type),this.assetForm.assetForm.controls.asset_number.setValue(e.asset_number),this.assetForm.imageUpload.setImageSrc(e.asset_image),this.assetForm.assetForm.controls.model.setValue(e.model),this.assetForm.assetForm.controls.location.setValue(e.location),this.assetForm.assetForm.controls.manufacturer.setValue(e.manufacturer),this.assetForm.assetForm.controls.serial_number.setValue(e.serial_number),this.assetForm.assetForm.controls.acquisition_date.setValue(e.acquisition_date),this.assetForm.assetForm.controls.status.setValue(e.status)}getAssetData(){return{hotel:localStorage.getItem("hotel_id"),asset_name:this.assetForm.assetForm.controls.asset_name.value,asset_type:this.assetForm.assetForm.controls.asset_type.value,asset_number:this.assetForm.assetForm.controls.asset_number.value,model:this.assetForm.assetForm.controls.model.value,location:this.assetForm.assetForm.controls.location.value,manufacturer:this.assetForm.assetForm.controls.manufacturer.value,serial_number:this.assetForm.assetForm.controls.serial_number.value,acquisition_date:this.assetForm.assetForm.controls.acquisition_date.value,status:this.assetForm.assetForm.controls.status.value}}};n.\u0275fac=function(o){return new(o||n)(F(T),F(I))},n.\u0275cmp=v({type:n,selectors:[["app-edit-view-asset"]],viewQuery:function(o,r){if(o&1&&(g(_t,5,x),g(bt,5,V),g(St,5,M),g(Ft,5,k),g(yt,5,te)),o&2){let l;_(l=b())&&(r.assetForm=l.first),_(l=b())&&(r.imagesUpload=l.first),_(l=b())&&(r.successToast=l.first),_(l=b())&&(r.errorToast=l.first),_(l=b())&&(r.deleteModalOne=l.first)}},decls:34,vars:12,consts:[["assetFormComponentReference",""],["errorToastComponentReference",""],["successToastComponentReference",""],["deleteModalOneComponentReference",""],[3,"pageTitle","navItems"],[1,"row"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"mt-3"],["type","submit",1,"btn","btn-sm","btn-success","float-end","ms-2","form-control-btn",3,"click","disabled"],["type","reset",1,"btn","btn-sm","btn-warning","float-end","ms-2","form-control-btn",3,"click","disabled"],["type","reset",1,"btn","btn-sm","btn-danger","float-end","ms-2","form-control-btn",3,"click","disabled"],[1,"col-md-3"],[1,"btn","btn-secondary","w-100",3,"routerLink"],[1,"bi","bi-box-arrow-in-right"],["routerLink","/home/infrastructure/assets/asset-maintenance/",1,"btn","btn-secondary","w-100"],[3,"confirmEvent"]],template:function(o,r){if(o&1){let l=E();m(0,"app-topnav",4),t(1,"div",5)(2,"div",6)(3,"div",7)(4,"h5",8),s(5,"Edit View Asset"),i(),m(6,"app-asset-form",null,0),t(8,"div",9)(9,"button",10),p("click",function(){return y(l),C(r.onSave())}),s(10," Save "),i(),t(11,"button",11),p("click",function(){return y(l),C(r.cancel())}),s(12," Cancel "),i(),t(13,"button",12),p("click",function(){return y(l),C(r.onDelete())}),s(14," Delete "),i()()()()(),t(15,"div",5)(16,"div",13)(17,"div",6)(18,"div",7)(19,"button",14),s(20," View Asset Allocation "),m(21,"i",15),i()()()(),t(22,"div",13)(23,"div",6)(24,"div",7)(25,"button",16),s(26," View Asset Maintenance "),m(27,"i",15),i()()()()(),m(28,"app-error-toast",null,1)(30,"app-success-toast",null,2),t(32,"app-delete-modal-one",17,3),p("confirmEvent",function(){return y(l),C(r.deleteAsset())}),i()}o&2&&(d("pageTitle","Assets")("navItems",L(9,wt,S(7,Ct),S(8,At))),c(9),d("disabled",r.isLoading),c(2),d("disabled",r.isLoading),c(2),d("disabled",r.isLoading),c(6),pe("routerLink","/home/infrastructure/assets/",r.assetId,"/track-asset"))},dependencies:[Fe,A,te,M,k,x]});let a=n;return a})();var Et=()=>({name:"All Maintenances",link:"#/home/infrastructure/assets/all-maintenance"}),Dt=a=>[a];function Tt(a,n){if(a&1){let f=E();t(0,"tr",21),p("click",function(){let o=y(f).$implicit,r=N();return C(r.viewMaintenanceDetails(o.id))}),t(1,"td"),s(2),i(),t(3,"td"),s(4),i(),t(5,"td"),s(6),i(),t(7,"td"),s(8),i()()}if(a&2){let f=n.$implicit;c(2),D(f.maintenance_title),c(2),D(f.urgency),c(2),D(f.type),c(2),D(f.status)}}function It(a,n){if(a&1&&(t(0,"tr")(1,"td",22),m(2,"app-table-loader",23),i()()),a&2){let f=N();c(2),d("isLoading",f.isFetchingListData)("isNoData",f.isDataAvailable)}}var He=(()=>{let n=class n{constructor(e,o){this.router=e,this.maintenanceService=o,this.isFetchingListData=!1,this.isDataAvailable=!0,this.filterQuery="",this.pagination={currentPage:0,totalPages:0,totalItems:0},this.sorting={currentField:"created_at",currentDirection:"-"},this.maintenanceListData=[]}ngAfterViewInit(){this.getAllMaintenance()}getAllMaintenance(){this.isFetchingListData=!0,this.maintenanceService.getAllMaintenance().subscribe({next:e=>{console.log(e),this.maintenanceListData=e.results,this.pagination.currentPage=e.current_page,this.pagination.totalPages=e.total_pages,this.pagination.totalItems=e.count,this.pagination.totalItems==0&&(this.isDataAvailable=!1)},error:e=>{console.log(e)},complete:()=>{this.isFetchingListData=!1}})}pageSelected(){this.getAllMaintenance()}columnSorted(e){console.log(e),this.sorting.currentField=e.field,this.sorting.currentDirection=e.direction,this.getAllMaintenance()}tableFiltered(e){this.filterQuery=e,this.getAllMaintenance()}viewMaintenanceDetails(e){localStorage.setItem("hotel_maintenance_id",e),this.router.navigate(["/home/infrastructure/assets/all-maintenance/edit-view-maintenance/",e])}goToCreateMaintenance(){this.router.navigate(["/home/infrastructure/assets/all-maintenance/create-maintenance"])}};n.\u0275fac=function(o){return new(o||n)(F(T),F(I))},n.\u0275cmp=v({type:n,selectors:[["app-all-maintenance"]],decls:31,vars:27,consts:[[3,"pageTitle","navItems"],[1,"row"],[1,"col-md-9"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"d-inline-block","w-100","mb-3"],[1,"btn","btn-primary","btn-sm","mb-3","grid-add-btn",3,"click"],[3,"tableFiltered","placeholder"],[1,"table-responsive"],[1,"table","table-sm","table-hover","table-bordered"],["width","15%"],[3,"columnSorted","columnTitle","thisField","currentField","currentDirection"],["width","30%"],["width","35%"],["width","20%"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"pageSelected","totalItems","currentPage"],[1,"col-md-3"],["link","/home/infrastructure/assets/all-assets","name","Go to All Assets"],[3,"click"],["colspan","4"],[3,"isLoading","isNoData"]],template:function(o,r){o&1&&(m(0,"app-topnav",0),t(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),s(6,"Maintenances"),i(),t(7,"div",6)(8,"button",7),p("click",function(){return r.goToCreateMaintenance()}),s(9," Add New Maintenance "),i(),t(10,"app-table-filtering",8),p("tableFiltered",function(u){return r.tableFiltered(u)}),i()(),t(11,"div",9)(12,"table",10)(13,"thead")(14,"tr")(15,"th",11)(16,"app-table-sorting",12),p("columnSorted",function(u){return r.columnSorted(u)}),i()(),t(17,"th",13)(18,"app-table-sorting",12),p("columnSorted",function(u){return r.columnSorted(u)}),i()(),t(19,"th",14)(20,"app-table-sorting",12),p("columnSorted",function(u){return r.columnSorted(u)}),i()(),t(21,"th",15)(22,"app-table-sorting",12),p("columnSorted",function(u){return r.columnSorted(u)}),i()()()(),t(23,"tbody"),R(24,Tt,9,4,"tr",16)(25,It,3,2,"tr",17),i()()(),t(26,"app-table-pagination",18),p("pageSelected",function(){return r.pageSelected()}),i()()()(),t(27,"div",19)(28,"div",3)(29,"div",4),m(30,"app-page-link-button-back",20),i()()()()),o&2&&(d("pageTitle","Assets")("navItems",z(25,Dt,S(24,Et))),c(10),d("placeholder","Search Maintenances"),c(6),d("columnTitle","Title")("thisField","maintenance_title")("currentField",r.sorting.currentField)("currentDirection",r.sorting.currentDirection),c(2),d("columnTitle","Urgency")("thisField","urgency")("currentField",r.sorting.currentField)("currentDirection",r.sorting.currentDirection),c(2),d("columnTitle","Type")("thisField","type")("currentField",r.sorting.currentField)("currentDirection",r.sorting.currentDirection),c(2),d("columnTitle","Status")("thisField","status")("currentField",r.sorting.currentField)("currentDirection",r.sorting.currentDirection),c(2),d("ngForOf",r.maintenanceListData),c(),d("ngIf",r.isFetchingListData||!r.isDataAvailable),c(),d("totalItems",r.pagination.totalItems)("currentPage",r.pagination.currentPage)("totalItems",r.pagination.totalItems))},dependencies:[q,K,A,Z,B,ee,X,ne]});let a=n;return a})();var Mt=["selectCheckInComponentReference"],kt=["selectServiceComponentReference"],xt=["selectRoomComponentReference"],oe=(()=>{let n=class n{constructor(){this.maintenanceForm=new U({}),this.selectedCheckInId="",this.selectedServiceId="",this.selectedRoomId=""}ngOnInit(){this.initMaintenanceForm()}initMaintenanceForm(){this.maintenanceForm=new U({service:new h({value:"",disabled:!0}),check_in:new h({value:"",disabled:!0}),service_maintenance_id:new h(""),staff_assigned_to:new h(""),maintenance_date_time:new h(""),party_size:new h(""),special_maintenances:new h(""),status:new h("pending")})}serviceRowSelected(e){this.selectedServiceId=e?.id,this.maintenanceForm.controls.service.setValue(e?.service_name)}checkinRowSelected(e){this.selectedCheckInId=e?.id,this.maintenanceForm.controls.check_in.setValue(e?.checkin_id)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=v({type:n,selectors:[["app-maintenance-form"]],viewQuery:function(o,r){if(o&1&&(g(Mt,5,Ne),g(kt,5,qe),g(xt,5,Le)),o&2){let l;_(l=b())&&(r.selectCheckIn=l.first),_(l=b())&&(r.selectService=l.first),_(l=b())&&(r.selectRoom=l.first)}},decls:77,vars:0,consts:[[1,"row"],[1,"col-md-6"],[1,"row","mb-1"],[1,"col-md-4"],["for","maintnenanceTitle",1,"float-md-end","float-sm-start","col-form-label"],[1,"col-md-8"],["type","text","id","maintnenanceTitle","name","maintnenanceTitle",1,"form-control"],["for","description",1,"float-md-end","float-sm-start","col-form-label"],["rows","3","id","description","name","description",1,"form-control"],["for","urgency",1,"float-md-end","float-sm-start","col-form-label"],["id","urgency","name","urgency",1,"form-control"],["value",""],["for","contact",1,"float-md-end","float-sm-start","col-form-label"],["type","tel","id","contact","name","contact",1,"form-control"],["for","type",1,"float-md-end","float-sm-start","col-form-label"],["type","text","id","type","name","type",1,"form-control"],["for","submittedAt",1,"float-md-end","float-sm-start","col-form-label"],["type","datetime-local","id","submittedAt","name","submittedAt",1,"form-control"],["for","status",1,"float-md-end","float-sm-start","col-form-label"],["type","text","id","status","name","status",1,"form-control"],["for","progress",1,"float-md-end","float-sm-start","col-form-label"],["type","range","id","progress","name","progress",1,"form-control","mt-1"],["for","assignedStaff",1,"float-md-end","float-sm-start","col-form-label"],[1,"input-group","w-100"],["id","assignedStaff","name","assignedStaff",1,"form-control"],["type","button",1,"btn","btn-secondary"],[1,"bi","bi-window"],["for","completed",1,"float-md-end","float-sm-start","col-form-label"],["type","date","id","completed","name","completed",1,"form-control"]],template:function(o,r){o&1&&(t(0,"form")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"label",4),s(6,"Maintenance Title:"),i()(),t(7,"div",5),m(8,"input",6),i()(),t(9,"div",2)(10,"div",3)(11,"label",7),s(12,"Description:"),i()(),t(13,"div",5),m(14,"textarea",8),i()(),t(15,"div",2)(16,"div",3)(17,"label",9),s(18,"Urgency:"),i()(),t(19,"div",5)(20,"select",10)(21,"option",11),s(22,"Very High Urgency"),i(),t(23,"option",11),s(24,"High Urgency"),i(),t(25,"option",11),s(26,"Moderate Urgency"),i(),t(27,"option",11),s(28,"Low Urgency"),i(),t(29,"option",11),s(30,"Very Low Urgency"),i()()()(),t(31,"div",2)(32,"div",3)(33,"label",12),s(34,"Contact Info:"),i()(),t(35,"div",5),m(36,"input",13),i()(),t(37,"div",2)(38,"div",3)(39,"label",14),s(40,"Type:"),i()(),t(41,"div",5),m(42,"input",15),i()()(),t(43,"div",1)(44,"div",2)(45,"div",3)(46,"label",16),s(47,"Submitted At:"),i()(),t(48,"div",5),m(49,"input",17),i()(),t(50,"div",2)(51,"div",3)(52,"label",18),s(53,"Status:"),i()(),t(54,"div",5),m(55,"input",19),i()(),t(56,"div",2)(57,"div",3)(58,"label",20),s(59,"Progress:"),i()(),t(60,"div",5),m(61,"input",21),i()(),t(62,"div",2)(63,"div",3)(64,"label",22),s(65,"Assigned Staff:"),i()(),t(66,"div",5)(67,"div",23),m(68,"input",24),t(69,"button",25),m(70,"i",26),i()()()(),t(71,"div",2)(72,"div",3)(73,"label",27),s(74,"Completed:"),i()(),t(75,"div",5),m(76,"input",28),i()()()()())},dependencies:[P,J,W,Q,Y]});let a=n;return a})();var Rt=["maintenanceFormComponentReference"],Nt=()=>({name:"All Maintenances",link:"#/home/infrastructure/assets/all-maintenance"}),Lt=()=>({name:"Create Maintenance",link:"#/home/infrastructure/assets/all-maintenance/create-maintenance"}),qt=(a,n)=>[a,n],ze=(()=>{let n=class n{constructor(e,o){this.router=e,this.maintenanceService=o,this.isSavingData=!1}createMaintenance(){this.isSavingData=!0;let e=this.getMaintenanceData();console.log(e),this.maintenanceService.createMaintenance(e).subscribe({next:o=>{console.log(o),localStorage.setItem("hotel_maintenance_id",o.id),this.router.navigateByUrl("/home/infrastructure/assets/mainteance/all-maintenance/edit-view-maintenance/"+o.id)},error:o=>{console.log(o)},complete:()=>{this.isSavingData=!1}})}getMaintenanceData(){return{hotel:localStorage.getItem("hotel_id"),asset:this.maintenanceForm.maintenanceForm.controls.asset.value,maintenance_title:this.maintenanceForm.maintenanceForm.controls.maintenance_title.value,description:this.maintenanceForm.maintenanceForm.controls.description.value,urgency:this.maintenanceForm.maintenanceForm.controls.urgency.value,status:this.maintenanceForm.maintenanceForm.controls.status.value,submitted_at:this.maintenanceForm.maintenanceForm.controls.submitted_at.value,contact_info:this.maintenanceForm.maintenanceForm.controls.contact_info.value,type:this.maintenanceForm.maintenanceForm.controls.type.value,progress:this.maintenanceForm.maintenanceForm.controls.progress.value,assigned_staff:this.maintenanceForm.maintenanceForm.controls.assigned_staff.value,completed_at:this.maintenanceForm.maintenanceForm.controls.completed_at.value}}};n.\u0275fac=function(o){return new(o||n)(F(T),F(I))},n.\u0275cmp=v({type:n,selectors:[["app-create-maintenance"]],viewQuery:function(o,r){if(o&1&&g(Rt,5,oe),o&2){let l;_(l=b())&&(r.maintenanceForm=l.first)}},decls:13,vars:7,consts:[["maintenanceFormComponentReference",""],[3,"pageTitle","navItems"],[1,"row"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"col"],["type","submit",1,"btn","btn-sm","btn-success","float-end","ms-2","form-control-btn",3,"click"],["type","reset",1,"btn","btn-sm","btn-warning","float-end","ms-2","form-control-btn"]],template:function(o,r){if(o&1){let l=E();m(0,"app-topnav",1),t(1,"div",2)(2,"div",3)(3,"div",4)(4,"h5",5),s(5,"Add New Maintenance"),i(),m(6,"app-maintenance-form",null,0),t(8,"div",6)(9,"button",7),p("click",function(){return y(l),C(r.createMaintenance())}),s(10," Save "),i(),t(11,"button",8),s(12," Cancel "),i()()()()()}o&2&&d("pageTitle","Assets")("navItems",L(4,qt,S(2,Nt),S(3,Lt)))},dependencies:[A,oe]});let a=n;return a})();var Ke=(()=>{let n=class n{};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=v({type:n,selectors:[["app-edit-view-maintenance"]],decls:2,vars:0,template:function(o,r){o&1&&(t(0,"p"),s(1,"edit-view-maintenance works!"),i())}});let a=n;return a})();var Qt=[{path:"",component:Qe,children:[{path:"",component:le},{path:"all-assets",component:le},{path:"edit-view-asset/:id",component:Ge},{path:"create-asset",component:$e},{path:":id/track-asset",component:je},{path:"all-maintenance",component:He},{path:"all-maintenance/create-maintenance",component:ze},{path:"all-maintenance/edit-view-maintenance/:id",component:Ke}]}],Ye=(()=>{let n=class n{};n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=H({type:n}),n.\u0275inj=G({imports:[re.forChild(Qt),re]});let a=n;return a})();var un=(()=>{let n=class n{};n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=H({type:n}),n.\u0275inj=G({imports:[_e,Ie,Me,Ye,xe,ke,Ve,ie,ne,Re]});let a=n;return a})();export{un as AssetsModule};
