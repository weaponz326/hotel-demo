import{c as Q,d as he}from"./chunk-FBWHH6JU.js";import{a as C,b as w,c as x,d as ve}from"./chunk-UEPNQQPW.js";import{a as _e}from"./chunk-JRFFUKYU.js";import{a as V}from"./chunk-MFPXOXAK.js";import{a as ce,b as pe,c as de,d as ue,e as fe}from"./chunk-3OLZPOF4.js";import{b as X,c as O,d as Y,e as Z,f as z,h as S,j as ee,k as te,l as oe,m as ie,n as re,o as ne,p as me,r as ae,u as le,v as se}from"./chunk-RQYECNT5.js";import{b as I,c as ge}from"./chunk-IMD2KKFX.js";import{A as N,F as f,G as k,Ha as R,Ia as B,Ja as L,K as g,L as h,V as s,W as y,Za as $,_a as K,aa as H,ca as c,cb as J,da as q,ja as n,ka as r,la as p,lb as W,ma as E,mb as D,na as d,oa as P,qb as G,ta as v,ua as _,va as b,xa as a,ya as M}from"./chunk-TK5UYZ3D.js";var be=(()=>{let o=class o{};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=f({type:o,selectors:[["app-rooms"]],decls:1,vars:0,template:function(t,i){t&1&&p(0,"router-outlet")},dependencies:[W]});let m=o;return m})();var Te=()=>({name:"All Rooms",link:"#/home/infrastructure/rooms/all-rooms"}),Ee=m=>[m];function De(m,o){if(m&1){let F=E();n(0,"tr",19),d("click",function(){let t=g(F).$implicit,i=P();return h(i.viewRoomDetails(t.id))}),n(1,"td"),a(2),r(),n(3,"td"),a(4),r(),n(5,"td"),a(6),r(),n(7,"td"),a(8),r()()}if(m&2){let F=o.$implicit;s(2),M(F.room_number),s(2),M(F.capacity),s(2),M(F.price_per_night),s(2),M(F.status)}}function Ve(m,o){if(m&1&&(n(0,"tr")(1,"td",20),p(2,"app-table-loader",21),r()()),m&2){let F=P();s(2),c("isLoading",F.isFetchingListData)("isNoData",F.isDataAvailable)}}var j=(()=>{let o=class o{constructor(e,t){this.router=e,this.roomsService=t,this.isFetchingListData=!1,this.isDataAvailable=!0,this.filterQuery="",this.pagination={currentPage:0,totalPages:0,totalItems:0},this.sorting={currentField:"created_at",currentDirection:"-"},this.roomListData=[]}ngAfterViewInit(){this.getAllHotelRoom()}getAllHotelRoom(){this.isFetchingListData=!0,this.roomsService.getAllHotelRooms().subscribe({next:e=>{console.log(e),this.roomListData=e.results,this.pagination.currentPage=e.current_page,this.pagination.totalPages=e.total_pages,this.pagination.totalItems=e.count,this.pagination.totalItems==0&&(this.isDataAvailable=!1)},error:e=>{console.log(e)},complete:()=>{this.isFetchingListData=!1}})}pageSelected(){this.getAllHotelRoom()}columnSorted(e){console.log(e),this.sorting.currentField=e.field,this.sorting.currentDirection=e.direction,this.getAllHotelRoom()}tableFiltered(e){this.filterQuery=e,this.getAllHotelRoom()}viewRoomDetails(e){localStorage.setItem("hotel_room_id",e),this.router.navigate(["/home/infrastructure/rooms/edit-view-room/",e])}goToCreateRoom(){this.router.navigate(["/home/infrastructure/rooms/create-room"])}};o.\u0275fac=function(t){return new(t||o)(y(D),y(V))},o.\u0275cmp=f({type:o,selectors:[["app-all-rooms"]],decls:27,vars:27,consts:[[3,"pageTitle","navItems"],[1,"row"],[1,"col-md-9"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"d-inline-block","w-100","mb-3"],[1,"btn","btn-primary","btn-sm","mb-3","grid-add-btn",3,"click"],[3,"tableFiltered","placeholder"],[1,"table-responsive"],[1,"table","table-sm","table-hover","table-bordered"],["width","15%"],[3,"columnSorted","columnTitle","thisField","currentField","currentDirection"],["width","30%"],["width","35%"],["width","20%"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"pageSelected","totalItems","currentPage"],[3,"click"],["colspan","4"],[3,"isLoading","isNoData"]],template:function(t,i){t&1&&(p(0,"app-topnav",0),n(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),a(6,"Rooms"),r(),n(7,"div",6)(8,"button",7),d("click",function(){return i.goToCreateRoom()}),a(9," Add New Room "),r(),n(10,"app-table-filtering",8),d("tableFiltered",function(u){return i.tableFiltered(u)}),r()(),n(11,"div",9)(12,"table",10)(13,"thead")(14,"tr")(15,"th",11)(16,"app-table-sorting",12),d("columnSorted",function(u){return i.columnSorted(u)}),r()(),n(17,"th",13)(18,"app-table-sorting",12),d("columnSorted",function(u){return i.columnSorted(u)}),r()(),n(19,"th",14)(20,"app-table-sorting",12),d("columnSorted",function(u){return i.columnSorted(u)}),r()(),n(21,"th",15)(22,"app-table-sorting",12),d("columnSorted",function(u){return i.columnSorted(u)}),r()()()(),n(23,"tbody"),H(24,De,9,4,"tr",16)(25,Ve,3,2,"tr",17),r()()(),n(26,"app-table-pagination",18),d("pageSelected",function(){return i.pageSelected()}),r()()()()()),t&2&&(c("pageTitle","Rooms")("navItems",B(25,Ee,R(24,Te))),s(10),c("placeholder","Search Rooms"),s(6),c("columnTitle","Room No#")("thisField","room_number")("currentField",i.sorting.currentField)("currentDirection",i.sorting.currentDirection),s(2),c("columnTitle","Capacity")("thisField","capacity")("currentField",i.sorting.currentField)("currentDirection",i.sorting.currentDirection),s(2),c("columnTitle","Price per Night")("thisField","price_per_night")("currentField",i.sorting.currentField)("currentDirection",i.sorting.currentDirection),s(2),c("columnTitle","Status")("thisField","status")("currentField",i.sorting.currentField)("currentDirection",i.sorting.currentDirection),s(2),c("ngForOf",i.roomListData),s(),c("ngIf",i.isFetchingListData||!i.isDataAvailable),s(),c("totalItems",i.pagination.totalItems)("currentPage",i.pagination.currentPage)("totalItems",i.pagination.totalItems))},dependencies:[$,K,I,pe,de,ue,ce]});let m=o;return m})();var T=(()=>{let o=class o{constructor(){this.roomForm=new z({})}ngOnInit(){this.initRoomForm()}initRoomForm(){this.roomForm=new z({room_number:new S("",O.required),capacity:new S(""),type:new S(""),status:new S(""),room_size:new S(""),number_of_beds:new S(""),price_per_night:new S("",O.required),description:new S("")})}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=f({type:o,selectors:[["app-room-form"]],decls:74,vars:5,consts:[[3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"row","mb-1"],[1,"col-md-4"],["for","room_number",1,"float-md-end","float-sm-start","col-form-label"],[1,"text-danger"],[1,"col-sm-8"],["type","text","id","room_number","formControlName","room_number","name","room_number","required","",1,"form-control"],["for","capacity",1,"float-md-end","float-sm-start","col-form-label"],["type","number","id","capacity","formControlName","capacity","name","capacity","required","",1,"form-control"],["for","type",1,"float-md-end","float-sm-start","col-form-label"],["id","type","name","type","formControlName","type","required","",1,"form-select"],["value","suite"],["value","single"],["value","double"],["value","twin"],["value","king"],["value","queen"],["for","room_size",1,"float-md-end","float-sm-start","col-form-label"],["type","number","id","room_size","formControlName","room_size","name","room_size",1,"form-control"],["for","number_of_beds",1,"float-md-end","float-sm-start","col-form-label"],["type","number","id","number_of_beds","formControlName","number_of_beds","name","number_of_beds","required","",1,"form-control"],[1,"col-sm-4"],["for","price_per_night",1,"float-md-end","float-sm-start","col-form-label"],["type","number","id","price_per_night","formControlName","price_per_night","name","price_per_night",1,"form-control"],["for","status",1,"float-md-end","float-sm-start","col-form-label"],["id","status","name","status","formControlName","status","required","",1,"form-select"],["value","available"],["value","occupied"],["value","maintenance"],["for","description",1,"float-md-end","float-sm-start","col-form-label"],["id","description","formControlName","description","name","description","rows","3",1,"form-control"]],template:function(t,i){t&1&&(n(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5)(6,"span",6),a(7,"* "),r(),a(8," Room Number (ID):"),r()(),n(9,"div",7),p(10,"input",8),r()(),n(11,"div",3)(12,"div",4)(13,"label",9),a(14,"Capacity:"),r()(),n(15,"div",7),p(16,"input",10),r()(),n(17,"div",3)(18,"div",4)(19,"label",11),a(20,"Room Type:"),r()(),n(21,"div",7)(22,"select",12)(23,"option",13),a(24,"Suite"),r(),n(25,"option",14),a(26,"Single"),r(),n(27,"option",15),a(28,"Double"),r(),n(29,"option",16),a(30,"Twin"),r(),n(31,"option",17),a(32,"King"),r(),n(33,"option",18),a(34,"Queen"),r()()()(),n(35,"div",3)(36,"div",4)(37,"label",19),a(38,"Room Size (sq ft):"),r()(),n(39,"div",7),p(40,"input",20),r()(),n(41,"div",3)(42,"div",4)(43,"label",21),a(44,"Number of Beds:"),r()(),n(45,"div",7),p(46,"input",22),r()()(),n(47,"div",2)(48,"div",3)(49,"div",23)(50,"label",24)(51,"span",6),a(52,"* "),r(),a(53," Price Per Night:"),r()(),n(54,"div",7),p(55,"input",25),r()(),n(56,"div",3)(57,"div",23)(58,"label",26),a(59,"Status:"),r()(),n(60,"div",7)(61,"select",27)(62,"option",28),a(63,"Available"),r(),n(64,"option",29),a(65,"Occupied"),r(),n(66,"option",30),a(67,"Maintenance"),r()()()(),n(68,"div",3)(69,"div",23)(70,"label",31),a(71,"Description:"),r()(),n(72,"div",7),p(73,"textarea",32),r()()()()()),t&2&&(c("formGroup",i.roomForm),s(10),q("is-invalid",i.roomForm.controls.room_number.invalid&&i.isSubmitted),s(45),q("is-invalid",i.roomForm.controls.price_per_night.invalid&&i.isSubmitted))},dependencies:[ee,ne,me,X,te,re,Y,Z,ae,oe,ie]});let m=o;return m})();var Me=["roomFormComponentReference"],Ne=["successToastComponentReference"],ke=["errorToastComponentReference"],Le=()=>({name:"All Rooms",link:"#/home/infrastructure/rooms"}),xe=()=>({name:"Create Room",link:"#/home/infrastructure/create-room"}),Qe=(m,o)=>[m,o],Re=(()=>{let o=class o{constructor(e,t){this.router=e,this.roomService=t,this.isSavingData=!1}onSave(){this.roomForm.isSubmitted=!0,this.roomForm.roomForm.valid&&this.createRoom()}createRoom(){this.isSavingData=!0;let e=this.getRoomData();console.log(e),this.roomService.createRoom(e).subscribe({next:t=>{console.log(t),localStorage.setItem("hotel_room_id",t.id),this.router.navigateByUrl("/home/infrastructure/rooms/edit-view-room/"+t.id),this.isSavingData=!1},error:t=>{console.log(t),this.isSavingData=!1,this.errorToast.openToast()}})}getRoomData(){return{hotel:localStorage.getItem("hotel_id"),room_number:this.roomForm.roomForm.controls.room_number.value,capacity:this.roomForm.roomForm.controls.capacity.value,type:this.roomForm.roomForm.controls.type.value,status:this.roomForm.roomForm.controls.status.value,room_size:this.roomForm.roomForm.controls.room_size.value,number_of_beds:this.roomForm.roomForm.controls.number_of_beds.value,price_per_night:this.roomForm.roomForm.controls.price_per_night.value,description:this.roomForm.roomForm.controls.description.value}}cancel(){this.router.navigate(["/home/infrastructure/rooms"])}};o.\u0275fac=function(t){return new(t||o)(y(D),y(V))},o.\u0275cmp=f({type:o,selectors:[["app-create-room"]],viewQuery:function(t,i){if(t&1&&(v(Me,5,T),v(Ne,5,C),v(ke,5,w)),t&2){let l;_(l=b())&&(i.roomForm=l.first),_(l=b())&&(i.successToast=l.first),_(l=b())&&(i.errorToast=l.first)}},decls:18,vars:9,consts:[["roomFormComponentReference",""],["errorToastComponentReference",""],["successToastComponentReference",""],[3,"pageTitle","navItems"],[1,"row"],[1,"col"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"mt-3"],["type","submit",1,"btn","btn-sm","btn-success","float-end","ms-2","form-control-btn",3,"click","disabled"],["type","reset",1,"btn","btn-sm","btn-warning","float-end","ms-2","form-control-btn",3,"click","disabled"]],template:function(t,i){if(t&1){let l=E();p(0,"app-topnav",3),n(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"h5",8),a(6,"Add New Room"),r(),p(7,"app-room-form",null,0),n(9,"div",9)(10,"button",10),d("click",function(){return g(l),h(i.onSave())}),a(11," Save "),r(),n(12,"button",11),d("click",function(){return g(l),h(i.cancel())}),a(13," Cancel "),r()()()()()(),p(14,"app-error-toast",null,1)(16,"app-success-toast",null,2)}t&2&&(c("pageTitle","Rooms")("navItems",L(6,Qe,R(4,Le),R(5,xe))),s(10),c("disabled",i.isSavingData),s(2),c("disabled",i.isSavingData))},dependencies:[I,C,w,T]});let m=o;return m})();var qe=["multiImageUploadComponentReference"],Pe=["roomFormComponentReference"],Ge=["successToastComponentReference"],Oe=["errorToastComponentReference"],ze=["deleteModalOneComponentReference"],Ue=()=>({name:"All Rooms",link:"#/home/infrastructure/rooms"}),je=()=>({name:"View-Edit Room",link:"#/home/infrastructure/rooms/view-room"}),He=(m,o)=>[m,o],Ce=(()=>{let o=class o{constructor(e,t){this.router=e,this.roomService=t,this.isLoading=!1,this.galleryListData=[]}ngAfterViewInit(){this.getRoom(),this.getAllRoomGallery()}onSave(){this.roomForm.isSubmitted=!0,this.roomForm.roomForm.valid&&this.updateRoom()}onDelete(){this.deleteModalOne.openModal()}getRoom(){this.isLoading=!0,this.roomService.getRoom().subscribe({next:e=>{console.log(e),this.setRoomData(e),this.isLoading=!1},error:e=>{console.log(e),this.isLoading=!1}})}updateRoom(){let e=this.getRoomData();this.isLoading=!0,this.roomService.updateRoom(e).subscribe({next:t=>{console.log(t),this.isLoading=!1,this.saveGallery(),this.successToast.openToast(),this.router.navigateByUrl("/home/infrastructure/rooms/")},error:t=>{console.log(t),this.isLoading=!1}})}deleteRoom(){this.isLoading=!0,this.roomService.deleteRoom().subscribe({next:e=>{console.log(e),this.isLoading=!1,this.router.navigateByUrl("/home/infrastructure/rooms/")},error:e=>{console.log(e),this.isLoading=!1}})}createRoomGallery(e){this.isLoading=!0,this.roomService.createRoomGallery(e).subscribe({next:t=>{console.log(t),this.isLoading=!1},error:t=>{console.log(t),this.isLoading=!1}})}getAllRoomGallery(){this.roomService.getAllRoomGallery().subscribe({next:e=>{console.log(e),this.imagesUpload.setGallerySrc(e.results)},error:e=>{console.log(e)}})}saveGallery(){for(let e of this.imagesUpload.uploadedFiles)if(e.isChanged){let t=new FormData;t.append("room",localStorage.getItem("hotel_room_id")),t.append("image",e.file),t.append("is_lead","false"),this.createRoomGallery(t)}}cancel(){this.router.navigate(["/home/infrastructure/rooms"])}setRoomData(e){this.roomForm.roomForm.controls.room_number.setValue(e.room_number),this.roomForm.roomForm.controls.capacity.setValue(e.capacity),this.roomForm.roomForm.controls.type.setValue(e.type),this.roomForm.roomForm.controls.status.setValue(e.status),this.roomForm.roomForm.controls.room_size.setValue(e.room_size),this.roomForm.roomForm.controls.number_of_beds.setValue(e.number_of_beds),this.roomForm.roomForm.controls.price_per_night.setValue(e.price_per_night),this.roomForm.roomForm.controls.description.setValue(e.description)}getRoomData(){return{hotel:localStorage.getItem("hotel_id"),room_number:this.roomForm.roomForm.controls.room_number.value,capacity:this.roomForm.roomForm.controls.capacity.value,type:this.roomForm.roomForm.controls.type.value,status:this.roomForm.roomForm.controls.status.value,room_size:this.roomForm.roomForm.controls.room_size.value,number_of_beds:this.roomForm.roomForm.controls.number_of_beds.value,price_per_night:this.roomForm.roomForm.controls.price_per_night.value,description:this.roomForm.roomForm.controls.description.value}}};o.\u0275fac=function(t){return new(t||o)(y(D),y(V))},o.\u0275cmp=f({type:o,selectors:[["app-edit-view-room"]],viewQuery:function(t,i){if(t&1&&(v(qe,5,Q),v(Pe,5,T),v(Ge,5,C),v(Oe,5,w),v(ze,5,x)),t&2){let l;_(l=b())&&(i.imagesUpload=l.first),_(l=b())&&(i.roomForm=l.first),_(l=b())&&(i.successToast=l.first),_(l=b())&&(i.errorToast=l.first),_(l=b())&&(i.deleteModalOne=l.first)}},decls:30,vars:10,consts:[["roomFormComponentReference",""],["multiImageUploadComponentReference",""],["errorToastComponentReference",""],["successToastComponentReference",""],["deleteModalOneComponentReference",""],[3,"pageTitle","navItems"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"col","mt-3"],["type","submit",1,"btn","btn-sm","btn-success","float-end","ms-2","form-control-btn",3,"click","disabled"],["type","reset",1,"btn","btn-sm","btn-warning","float-end","ms-2","form-control-btn",3,"click","disabled"],["type","reset",1,"btn","btn-sm","btn-danger","float-end","ms-2","form-control-btn",3,"click","disabled"],[1,"col"],[3,"confirmEvent"]],template:function(t,i){if(t&1){let l=E();p(0,"app-topnav",5),n(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9)(5,"h5",10),a(6,"View-Edit Room"),r(),p(7,"app-room-form",null,0),n(9,"div",11)(10,"button",12),d("click",function(){return g(l),h(i.onSave())}),a(11," Save "),r(),n(12,"button",13),d("click",function(){return g(l),h(i.cancel())}),a(13," Cancel "),r(),n(14,"button",14),d("click",function(){return g(l),h(i.onDelete())}),a(15," Delete "),r()()()()()(),n(16,"div",6)(17,"div",15)(18,"div",8)(19,"div",9)(20,"h5",10),a(21,"Room Photos"),r(),p(22,"app-multi-images-upload",null,1),r()()()(),p(24,"app-error-toast",null,2)(26,"app-success-toast",null,3),n(28,"app-delete-modal-one",16,4),d("confirmEvent",function(){return g(l),h(i.deleteRoom())}),r()}t&2&&(c("pageTitle","Rooms")("navItems",L(7,He,R(5,Ue),R(6,je))),s(10),c("disabled",i.isLoading),s(2),c("disabled",i.isLoading),s(2),c("disabled",i.isLoading))},dependencies:[I,Q,x,C,w,T]});let m=o;return m})();var Be=[{path:"",component:be,children:[{path:"",component:j},{path:"all-rooms",component:j},{path:"create-room",component:Re},{path:"edit-view-room/:id",component:Ce}]}],we=(()=>{let o=class o{};o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=k({type:o}),o.\u0275inj=N({imports:[G.forChild(Be),G]});let m=o;return m})();var qt=(()=>{let o=class o{};o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=k({type:o}),o.\u0275inj=N({imports:[J,le,se,we,ge,fe,he,_e,ve]});let m=o;return m})();export{qt as a};
