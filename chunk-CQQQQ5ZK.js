import{a as E,b as j}from"./chunk-227JUHIO.js";import{a as k,b as y,c as T,d as Ve}from"./chunk-UEPNQQPW.js";import{a as V}from"./chunk-JRFFUKYU.js";import{a as se,b as ae,c as le,d as me,e as Ge}from"./chunk-3OLZPOF4.js";import{b as Y,c as fe,d as Z,e as ee,f as te,j as ie,k as Se,l as oe,m as ne,t as re,u as Te,v as Ee}from"./chunk-RQYECNT5.js";import{b as Q,c as De}from"./chunk-IMD2KKFX.js";import{A as H,Aa as Ce,F as C,G as $,Ha as D,Ia as K,Ja as P,K as g,L as h,Q as q,R as z,V as m,W as _,Za as W,_a as X,a as B,aa as O,b as x,ca as c,cb as ke,da as ue,fa as J,ja as s,ka as r,kb as ye,la as d,lb as we,ma as w,mb as S,na as u,oa as L,qb as pe,ta as p,ua as f,va as b,xa as l,ya as I}from"./chunk-TK5UYZ3D.js";var Re=(()=>{let o=class o{};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=C({type:o,selectors:[["app-guests"]],decls:1,vars:0,template:function(i,t){i&1&&d(0,"router-outlet")},dependencies:[we]});let a=o;return a})();function Pe(a,o){if(a&1){let F=w();s(0,"tr",7),u("click",function(){let i=g(F).$implicit,t=L(2);return h(t.viewGuestDetails(i.id))}),s(1,"td"),l(2),r(),s(3,"td"),l(4),r(),s(5,"td"),l(6),r(),s(7,"td"),l(8),r()()}if(a&2){let F=o.$implicit;m(2),Ce("",F.guest_name," ",F.last_name,""),m(2),I(F.phone_number),m(2),I(F.email),m(2),I(F.address)}}function je(a,o){if(a&1&&O(0,Pe,9,5,"tr",6),a&2){let F=L();c("ngForOf",F.guests)}}function Ue(a,o){if(a&1&&(s(0,"tr")(1,"td",8),d(2,"app-table-loader",9),r()()),a&2){let F=L();m(2),c("isLoading",F.isFetchingListData)("isNoData",F.isDataAvailable)}}var Ie=(()=>{let o=class o{constructor(e,i){this.router=e,this.guestService=i,this.guests=[],this.guestHeaders=["Guest Type","Guest","Description","Amount"],this.isFetchingListData=!0,this.isDataAvailable=!1,this.filterQuery="",this.pagination={currentPage:0,totalPages:0,totalItems:0},this.sorting={currentField:"created_at",currentDirection:"-"}}pageSelected(){this.getGuests()}columnSorted(e){console.log(e),this.sorting.currentField=e.field,this.sorting.currentDirection=e.direction,this.getGuests()}tableFiltered(e){this.filterQuery=e,this.getGuests()}ngAfterViewInit(){this.getGuests()}getGuests(){this.guestService.getAllHotelGuests().subscribe({next:e=>{console.log(e),this.guests=e.results,this.pagination.currentPage=e.current_page,this.pagination.totalPages=e.total_pages,this.pagination.totalItems=e.count,this.pagination.totalItems==0?this.isDataAvailable=!1:this.isDataAvailable=!0},error:e=>{console.error("Error occurred:",e),this.guests=[],this.isFetchingListData=!1},complete:()=>{console.log("Request completed"),this.isFetchingListData=!1}})}viewGuestDetails(e){localStorage.setItem("hotel_guest_id",e),this.router.navigate(["/home/guests/guests/edit-view-guest/",e])}goToCreateGuest(){this.router.navigate(["/home/guests/guests/create-guest"])}};o.\u0275fac=function(i){return new(i||o)(_(S),_(E))},o.\u0275cmp=C({type:o,selectors:[["app-guests-table"]],decls:16,vars:19,consts:[[1,"table-responsive"],[1,"table","table-sm","table-hover","table-bordered"],["width","25%"],[3,"columnSorted","columnTitle","thisField","currentField","currentDirection"],[4,"ngIf"],[3,"totalItems"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["colspan","5"],[3,"isLoading","isNoData"]],template:function(i,t){i&1&&(s(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th",2)(5,"app-table-sorting",3),u("columnSorted",function(v){return t.columnSorted(v)}),r()(),s(6,"th",2)(7,"app-table-sorting",3),u("columnSorted",function(v){return t.columnSorted(v)}),r()(),s(8,"th",2)(9,"app-table-sorting",3),u("columnSorted",function(v){return t.columnSorted(v)}),r()(),s(10,"th",2)(11,"app-table-sorting",3),u("columnSorted",function(v){return t.columnSorted(v)}),r()()()(),s(12,"tbody"),O(13,je,1,1,"tr")(14,Ue,3,2,"tr",4),r()(),d(15,"app-table-pagination",5),r()),i&2&&(m(5),c("columnTitle","Guest Name")("thisField","name")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),m(2),c("columnTitle","Phone")("thisField","phone")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),m(2),c("columnTitle","Email")("thisField","email")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),m(2),c("columnTitle","Address")("thisField","address")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),m(2),J(13,t.isDataAvailable?13:-1),m(),c("ngIf",t.isFetchingListData||!t.isDataAvailable),m(),c("totalItems",t.guests.length))},dependencies:[W,X,ae,le,se]});let a=o;return a})();var ze=["newGuestComponentReference"],Je=()=>({name:"All Guests",link:"#/home/guests/guests"}),Ke=a=>[a],he=(()=>{let o=class o{constructor(e){this.router=e}goToCreateGuest(){this.router.navigate(["/home/guests/guests/create-guest"])}};o.\u0275fac=function(i){return new(i||o)(_(S))},o.\u0275cmp=C({type:o,selectors:[["app-all-guests"]],viewQuery:function(i,t){if(i&1&&p(ze,5),i&2){let n;f(n=b())&&(t.createGuest=n.first)}},decls:16,vars:6,consts:[[3,"pageTitle","navItems"],[1,"row"],[1,"col-md-9"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"d-inline-block","w-100","mb-3"],["type","button",1,"btn","btn-primary","btn-sm","mb-3","grid-add-btn",3,"click"],[3,"placeholder"],[1,"col-md-3"],["link","/home/guests/guests/feedbacks","name","Go to Feedbacks"]],template:function(i,t){i&1&&(d(0,"app-topnav",0),s(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),l(6,"Guests"),r(),s(7,"div",6)(8,"button",7),u("click",function(){return t.goToCreateGuest()}),l(9," Add New Guest "),r(),d(10,"app-table-filtering",8),r(),d(11,"app-guests-table"),r()()(),s(12,"div",9)(13,"div",3)(14,"div",4),d(15,"app-page-link-button",10),r()()()()),i&2&&(c("pageTitle","Guests")("navItems",K(4,Ke,D(3,Je))),m(10),c("placeholder","Search Guests"))},dependencies:[Q,V,me,Ie]});let a=o;return a})();var M=(()=>{let o=class o{constructor(e){this.formBuilder=e,this.guestForm=new te({}),this.isDisabled=!1,this.isSubmitted=!1}ngOnInit(){this.initializeFormData()}initializeFormData(){this.guestForm=this.formBuilder.group({id:[{value:"",disabled:!0}],created_at:[{value:"",disabled:!0}],updated_at:[{value:"",disabled:!0}],deleted_at:[{value:"",disabled:!0}],hotel:[{value:"",disabled:!0}],guest_name:["",{validators:fe.required}],email:[""],phone_number:["",{validators:fe.required}],address:[""],city:[""],country:[""],note:[""]})}};o.\u0275fac=function(i){return new(i||o)(_(re))},o.\u0275cmp=C({type:o,selectors:[["app-guest-form"]],decls:47,vars:5,consts:[[3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"row","mb-1"],[1,"col-md-4"],["for","guest_name",1,"float-md-end","float-sm-start","col-form-label"],[1,"col-md-8"],["type","text","name","guest_name","id","guest_name","formControlName","guest_name",1,"form-control"],["for","email",1,"float-md-end","float-sm-start","col-form-label"],["type","email","name","email","id","email","formControlName","email",1,"form-control"],["for","phone_number",1,"float-md-end","float-sm-start","col-form-label"],["type","tel","name","phone_number","id","phone_number","formControlName","phone_number",1,"form-control"],["for","address",1,"float-md-end","float-sm-start","col-form-label"],["type","text","name","address","id","address","formControlName","address",1,"form-control"],["for","city",1,"float-md-end","float-sm-start","col-form-label"],["type","text","name","city","id","city","formControlName","city",1,"form-control"],["for","country",1,"float-md-end","float-sm-start","col-form-label"],["type","text","name","country","id","country","formControlName","country",1,"form-control"],["for","note",1,"float-md-end","float-sm-start","col-form-label"],["name","note","id","note","formControlName","note",1,"form-control"]],template:function(i,t){i&1&&(s(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),l(6,"Guest Name"),r()(),s(7,"div",6),d(8,"input",7),r()(),s(9,"div",3)(10,"div",4)(11,"label",8),l(12,"Email"),r()(),s(13,"div",6),d(14,"input",9),r()(),s(15,"div",3)(16,"div",4)(17,"label",10),l(18,"Phone Number"),r()(),s(19,"div",6),d(20,"input",11),r()()(),s(21,"div",2)(22,"div",3)(23,"div",4)(24,"label",12),l(25,"Address"),r()(),s(26,"div",6),d(27,"input",13),r()(),s(28,"div",3)(29,"div",4)(30,"label",14),l(31,"City"),r()(),s(32,"div",6),d(33,"input",15),r()(),s(34,"div",3)(35,"div",4)(36,"label",16),l(37,"Country"),r()(),s(38,"div",6),d(39,"input",17),r()(),s(40,"div",3)(41,"div",4)(42,"label",18),l(43,"Note"),r()(),s(44,"div",6)(45,"textarea",19),l(46,"          "),r()()()()()()),i&2&&(c("formGroup",t.guestForm),m(8),ue("is-invalid",t.guestForm.controls.guest_name.invalid&&t.isSubmitted),m(12),ue("is-invalid",t.guestForm.controls.phone_number.invalid&&t.isSubmitted))},dependencies:[ie,Y,Z,ee,oe,ne],styles:[".modal-footer[_ngcontent-%COMP%]{gap:.25rem}"]});let a=o;return a})();var Ye=["guestForm"],Ze=["successToastComponentReference"],et=["errorToastComponentReference"],tt=["deleteModalOneComponentReference"],it=()=>({name:"All Guests",link:"#/home/guests/guests"}),ot=a=>({name:"View Guest",link:a}),nt=(a,o)=>[a,o],Qe=(()=>{let o=class o{constructor(e,i,t){this.route=e,this.router=i,this.guestService=t,this.guestId="",this.expectedGuestOrder="",this.isLoading=!1}onSave(){this.guestForm.isSubmitted=!0,this.guestForm.guestForm.valid&&this.handleUpdateGuest()}onDelete(){this.deleteModal.openModal()}ngOnInit(){this.guestId=this.route.snapshot.params.guestId}ngAfterViewInit(){this.getGuest()}getGuest(){this.isLoading=!0,this.guestService.getHotelGuestById(this.guestId).subscribe({next:e=>{console.log("Successfully retrieved restaurant guest",e),this.setGuestFormData(e),this.expectedGuest=e,this.expectedGuestOrder=e.order,this.isLoading=!1},error:e=>{console.error(`Error retrieving restaurant guest: ${e.message}`),this.isLoading=!1},complete:()=>{this.isLoading=!1,console.log("Fetching complete")}})}setGuestFormData(e){this.guestForm.guestForm.patchValue(e)}handleUpdateGuest(){this.isLoading=!0;let e=x(B({},this.guestForm.guestForm.value),{hotel:localStorage.getItem("hotel_id")});this.guestService.updateHotelGuestById(this.guestId,e).subscribe({next:i=>{console.log("Guest update successful"),this.router.navigateByUrl("/home/guests/guests"),this.isLoading=!1,this.successToast.openToast()},error:i=>{console.log(i.message),this.isLoading=!1,this.errorToast.openToast()}})}handleDeleteGuest(){this.isLoading=!0,this.guestService.deleteHotelGuestById(this.guestId).subscribe({next:e=>{console.log(e),this.router.navigateByUrl("/home/guests/guests"),this.isLoading=!1,this.successToast.openToast()},error:e=>{console.log(e),this.isLoading=!1,this.errorToast.openToast()}})}handleCancelEvent(){this.router.navigate(["/home/guests/guests"])}};o.\u0275fac=function(i){return new(i||o)(_(ye),_(S),_(E))},o.\u0275cmp=C({type:o,selectors:[["app-edit-view-guest"]],viewQuery:function(i,t){if(i&1&&(p(Ye,5,M),p(Ze,5,k),p(et,5,y),p(tt,5,T)),i&2){let n;f(n=b())&&(t.guestForm=n.first),f(n=b())&&(t.successToast=n.first),f(n=b())&&(t.errorToast=n.first),f(n=b())&&(t.deleteModal=n.first)}},decls:25,vars:13,consts:[["guestForm",""],["errorToastComponentReference",""],["successToastComponentReference",""],["deleteModalOneComponentReference",""],[3,"pageTitle","navItems"],[1,"row"],[1,"col-md-12","row"],[1,"card"],[1,"card-body"],[1,"card-title"],["type","submit",1,"btn","btn-sm","btn-success","float-end","ms-2","form-control-btn",3,"click","disabled"],["type","reset",1,"btn","btn-sm","btn-warning","float-end","ms-2","form-control-btn",3,"click","disabled"],["type","reset",1,"btn","btn-sm","btn-danger","float-end","ms-2","form-control-btn",3,"click","disabled"],[1,"col-md-3"],[3,"link","name"],[3,"confirmEvent"]],template:function(i,t){if(i&1){let n=w();d(0,"app-topnav",4),s(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"h5",9),l(6,"View Guest"),r(),d(7,"app-guest-form",null,0),s(9,"button",10),u("click",function(){return g(n),h(t.onSave())}),l(10," Save "),r(),s(11,"button",11),u("click",function(){return g(n),h(t.handleCancelEvent())}),l(12," Cancel "),r(),s(13,"button",12),u("click",function(){return g(n),h(t.onDelete())}),l(14," Delete "),r()()()(),s(15,"div",13)(16,"div",7)(17,"div",8),d(18,"app-page-link-button",14),r()()()(),d(19,"app-error-toast",null,1)(21,"app-success-toast",null,2),s(23,"app-delete-modal-one",15,3),u("confirmEvent",function(){return g(n),h(t.handleDeleteGuest())}),r()}i&2&&(c("pageTitle","Guests")("navItems",P(10,nt,D(7,it),K(8,ot,"#/home/guests/guests/"+t.guestId))),m(9),c("disabled",t.isLoading),m(2),c("disabled",t.isLoading),m(2),c("disabled",t.isLoading),m(5),c("link","/home/guests/payment")("name","Go to Payment"))},dependencies:[Q,V,T,k,y,M]});let a=o;return a})();var rt=["selectGuestComponentReference"],A=(()=>{let o=class o{constructor(e){this.formBuilder=e,this.feedbackForm=new te({}),this.isDisabled=!1,this.selectedGuestId="",this.isSubmitted=!1}ngOnInit(){this.initializeFormData()}guestRowSelected(e){this.selectedGuestId=e?.id,this.feedbackForm.controls.guest.setValue(e?.guest_name),console.log(e)}initializeFormData(){this.feedbackForm=this.formBuilder.group({id:[{value:"",disabled:!0}],created_at:[{value:"",disabled:!0}],updated_at:[{value:"",disabled:!0}],deleted_at:[{value:"",disabled:!0}],hotel:[{value:"",disabled:!0}],guest:[""],rating:[""],comments:[""]})}};o.\u0275fac=function(i){return new(i||o)(_(re))},o.\u0275cmp=C({type:o,selectors:[["app-feedback-form"]],viewQuery:function(i,t){if(i&1&&p(rt,5,j),i&2){let n;f(n=b())&&(t.selectGuest=n.first)}},decls:24,vars:1,consts:[["selectGuestComponentReference",""],[1,"module-form-control","form-group","row",3,"formGroup"],[1,"row","mb-1"],[1,"col-md-4"],["for","guest",1,"float-md-end","float-sm-start","col-form-label"],[1,"col-md-8"],[1,"input-group","w-100"],["type","text","name","guest","id","guest","formControlName","guest",1,"form-control"],["type","button","title","Select Guest",1,"btn","btn-secondary",3,"click"],[1,"bi","bi-window"],["for","rating",1,"float-md-end","float-sm-start","col-form-label"],["type","number","name","rating","id","rating","formControlName","rating",1,"form-control"],["for","comments",1,"float-md-end","float-sm-start","col-form-label"],["name","comments","id","comments","formControlName","comments",1,"form-control"],[3,"rowSelected"]],template:function(i,t){if(i&1){let n=w();s(0,"form",1)(1,"div",2)(2,"div",3)(3,"label",4),l(4,"Guest"),r()(),s(5,"div",5)(6,"div",6),d(7,"input",7),s(8,"button",8),u("click",function(){return g(n),h(t.selectGuest.openModal())}),d(9,"i",9),r()()()(),s(10,"div",2)(11,"div",3)(12,"label",10),l(13,"Rating"),r()(),s(14,"div",5),d(15,"input",11),r()(),s(16,"div",2)(17,"div",3)(18,"label",12),l(19,"Comments"),r()(),s(20,"div",5),d(21,"textarea",13),r()()(),s(22,"app-select-guest",14,0),u("rowSelected",function(R){return g(n),h(t.guestRowSelected(R))}),r()}i&2&&c("formGroup",t.feedbackForm)},dependencies:[ie,Y,Se,Z,ee,oe,ne,j]});let a=o;return a})();var st=["editFeedbackButtonElementReference"],at=["dismissFeedbackButtonElementReference"],lt=["successToastComponentReference"],mt=["errorToastComponentReference"],dt=["deleteModalOneComponentReference"],de=(()=>{let o=class o{constructor(e,i){this.router=e,this.guestsService=i,this.feedbackId="",this.isLoading=!1,this.onFeedbackUpdate=new z}onSave(){this.feedbackForm.isSubmitted=!0,this.feedbackForm.feedbackForm.valid&&this.handleUpdateFeedback()}onDelete(){this.deleteModal.openModal()}openModal(e){this.getFeedback(e),this.newButton.nativeElement.click(),this.feedbackId=e}closeModal(){this.dismissButton.nativeElement.click()}handleCancelForm(){this.router.navigate(["/home/guests/guests"])}handleDeleteFeedback(){this.router.navigate(["/home/guests/guests"])}getFeedback(e){this.guestsService.getHotelGuestFeedbackById(e).subscribe({next:i=>{console.log("Feedback has been fetched successfully"),this.feedbackForm.feedbackForm.setValue(i)},error:i=>{console.log(`Error fetching feedback: ${i.message}`)},complete:()=>{console.log("Complete feedback fetching action")}})}handleUpdateFeedback(){this.isLoading=!0;let e=this.feedbackForm.feedbackForm.value;this.guestsService.updateHotelGuestFeedbackById(this.feedbackId,e).subscribe({next:i=>{console.log("Feedback has been updated successfully"),this.onFeedbackUpdate.emit(),this.isLoading=!1,this.successToast.openToast()},error:i=>{console.log(`Error fetching feedback: ${i.message}`),this.isLoading=!1,this.errorToast.openToast()},complete:()=>{console.log("Complete feedback fetching action"),this.isLoading=!1}})}deleteFeedback(){this.isLoading=!0,this.guestsService.deleteHotelGuestFeedbackById(this.feedbackId).subscribe({next:e=>{this.isLoading=!1,this.successToast.openToast()},error:e=>{console.log(`Error deleting feedback: ${e.message}`),this.isLoading=!1,this.errorToast.openToast()},complete:()=>{console.log("Complete feedback deleting action"),this.onFeedbackUpdate.emit(),this.isLoading=!1}})}};o.\u0275fac=function(i){return new(i||o)(_(S),_(E))},o.\u0275cmp=C({type:o,selectors:[["app-edit-view-feedback"]],viewQuery:function(i,t){if(i&1&&(p(A,5),p(st,5,q),p(at,5,q),p(lt,5,k),p(mt,5,y),p(dt,5,T)),i&2){let n;f(n=b())&&(t.feedbackForm=n.first),f(n=b())&&(t.newButton=n.first),f(n=b())&&(t.dismissButton=n.first),f(n=b())&&(t.successToast=n.first),f(n=b())&&(t.errorToast=n.first),f(n=b())&&(t.deleteModal=n.first)}},outputs:{onFeedbackUpdate:"onFeedbackUpdate"},decls:26,vars:2,consts:[["editFeedbackButtonElementReference",""],["dismissFeedbackButtonElementReference",""],["errorToastComponentReference",""],["successToastComponentReference",""],["deleteModalOneComponentReference",""],["hidden","true","data-bs-toggle","modal","data-bs-target","#editFeedbackModal"],["id","editFeedbackModal","tabindex","-1","aria-labelledby","editFeedbackLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","editFeedbackLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-danger","form-control-btn",3,"click","disabled"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-warning","form-control-btn"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-success","form-control-btn",3,"click","disabled"],[3,"confirmEvent"]],template:function(i,t){if(i&1){let n=w();s(0,"button",5,0),l(2,` Launch demo modal
`),r(),s(3,"div",6)(4,"div",7)(5,"div",8)(6,"div",9)(7,"h5",10),l(8,"Edit Feedback"),r(),d(9,"button",11,1),r(),s(11,"div",12),d(12,"app-feedback-form"),r(),s(13,"div",13)(14,"button",14),u("click",function(){return g(n),h(t.onDelete())}),l(15," Delete "),r(),s(16,"button",15),l(17," Cancel "),r(),s(18,"button",16),u("click",function(){return g(n),h(t.onSave())}),l(19," Save "),r()()()()(),d(20,"app-error-toast",null,2)(22,"app-success-toast",null,3),s(24,"app-delete-modal-one",17,4),u("confirmEvent",function(){return g(n),h(t.handleDeleteFeedback())}),r()}i&2&&(m(14),c("disabled",t.isLoading),m(4),c("disabled",t.isLoading))},dependencies:[T,k,y,A]});let a=o;return a})();var ut=["successToastComponentReference"],pt=["errorToastComponentReference"],ft=["deleteModalOneComponentReference"],bt=()=>({name:"All Guests",link:"#/home/guests/guests"}),gt=()=>({name:"Create Guest",link:"#/home/guests/guests/create-guest"}),ht=(a,o)=>[a,o],Ae=(()=>{let o=class o{constructor(e,i){this.guestsService=e,this.router=i,this.isLoading=!1}onSave(){this.guestForm.isSubmitted=!0,this.guestForm.guestForm.valid&&this.handleCreateGuest()}handleCreateGuest(){let e=this.getGuestFormData();this.createGuest(e)}handleCancelForm(){this.router.navigate(["/home/guests/guests"])}getGuestFormData(){return this.guestForm.guestForm.value}createGuest(e){this.isLoading=!0;let i=localStorage.getItem("hotel_id"),t=x(B({},e),{hotel:i});console.log(t),this.guestsService.createHotelGuest(t).subscribe({next:()=>{console.log("Guest has been created successfully"),this.isLoading=!1,this.successToast.openToast()},error:n=>{`${n}`,this.isLoading=!1,this.errorToast.openToast()},complete:()=>{console.log("Complete guest posting action"),this.router.navigate(["/home/guests/guests"]),this.isLoading=!1}})}};o.\u0275fac=function(i){return new(i||o)(_(E),_(S))},o.\u0275cmp=C({type:o,selectors:[["app-create-guest"]],viewQuery:function(i,t){if(i&1&&(p(M,5),p(ut,5,k),p(pt,5,y),p(ft,5,T)),i&2){let n;f(n=b())&&(t.guestForm=n.first),f(n=b())&&(t.successToast=n.first),f(n=b())&&(t.errorToast=n.first),f(n=b())&&(t.deleteModal=n.first)}},decls:21,vars:11,consts:[["guestForm",""],["errorToastComponentReference",""],["successToastComponentReference",""],[3,"pageTitle","navItems"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"card-title"],["type","submit",1,"btn","btn-sm","btn-success","float-end","ms-2","form-control-btn",3,"click","disabled"],["type","reset",1,"btn","btn-sm","btn-warning","float-end","ms-2","form-control-btn",3,"click","disabled"],[1,"col-md-3"],[3,"link","name"]],template:function(i,t){if(i&1){let n=w();d(0,"app-topnav",3),s(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"h5",8),l(6,"New Guest"),r(),d(7,"app-guest-form",null,0),s(9,"button",9),u("click",function(){return g(n),h(t.onSave())}),l(10," Save "),r(),s(11,"button",10),u("click",function(){return g(n),h(t.handleCancelForm())}),l(12," Cancel "),r()()()(),s(13,"div",11)(14,"div",6)(15,"div",7),d(16,"app-page-link-button",12),r()()()(),d(17,"app-error-toast",null,1)(19,"app-success-toast",null,2)}i&2&&(c("pageTitle","Guests")("navItems",P(8,ht,D(6,bt),D(7,gt))),m(9),c("disabled",t.isLoading),m(2),c("disabled",t.isLoading),m(5),c("link","/home/guests/guests/feedbacks")("name","Go to Feedbacks"))},dependencies:[Q,V,k,y,M]});let a=o;return a})();var vt=["newFeedbackButtonElementReference"],Ft=["dismissFeedbackButtonElementReference"],_t=["successToastComponentReference"],Ct=["errorToastComponentReference"],kt=["deleteModalOneComponentReference"],ce=(()=>{let o=class o{constructor(e,i){this.router=e,this.guestsService=i,this.isLoading=!1,this.onFeedbackCreation=new z}onSave(){this.feedbackForm.isSubmitted=!0,this.feedbackForm.feedbackForm.valid&&this.handleCreateFeedback()}openModal(){this.newButton.nativeElement.click()}closeModal(){this.dismissButton.nativeElement.click()}handleCreateFeedback(){let e=this.getFeedbackFormData();this.createGuestFeedback(e)}handleCancelForm(){this.router.navigate(["/home/guests/guests/feedbacks"])}getFeedbackFormData(){return this.feedbackForm.feedbackForm.value}createGuestFeedback(e){this.isLoading=!0;let i=localStorage.getItem("hotel_id"),t=x(B({},e),{hotel:i});console.log(t),this.guestsService.createHotelGuestFeedback(t).subscribe({next:()=>{console.log("Guest Feedback has been created successfully"),this.onFeedbackCreation.emit(),this.isLoading=!1,this.successToast.openToast()},error:n=>{console.log(`Error creating feedback: ${n}`),this.isLoading=!1,this.errorToast.openToast()},complete:()=>{console.log("Complete feedback posting action"),this.isLoading=!1}})}};o.\u0275fac=function(i){return new(i||o)(_(S),_(E))},o.\u0275cmp=C({type:o,selectors:[["app-create-feedback"]],viewQuery:function(i,t){if(i&1&&(p(A,5),p(vt,5,q),p(Ft,5,q),p(_t,5,k),p(Ct,5,y),p(kt,5,T)),i&2){let n;f(n=b())&&(t.feedbackForm=n.first),f(n=b())&&(t.newButton=n.first),f(n=b())&&(t.dismissButton=n.first),f(n=b())&&(t.successToast=n.first),f(n=b())&&(t.errorToast=n.first),f(n=b())&&(t.deleteModal=n.first)}},outputs:{onFeedbackCreation:"onFeedbackCreation"},decls:22,vars:1,consts:[["newFeedbackButtonElementReference",""],["dismissFeedbackButtonElementReference",""],["errorToastComponentReference",""],["successToastComponentReference",""],["hidden","true","data-bs-toggle","modal","data-bs-target","#newFeedbackModal"],["id","newFeedbackModal","tabindex","-1","aria-labelledby","newFeedbackLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","newFeedbackLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-warning","form-control-btn"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-success","form-control-btn",3,"click","disabled"]],template:function(i,t){if(i&1){let n=w();s(0,"button",4,0),l(2,` Launch demo modal
`),r(),s(3,"div",5)(4,"div",6)(5,"div",7)(6,"div",8)(7,"h5",9),l(8,"Add Feedback"),r(),d(9,"button",10,1),r(),s(11,"div",11),d(12,"app-feedback-form"),r(),s(13,"div",12)(14,"button",13),l(15," Cancel "),r(),s(16,"button",14),u("click",function(){return g(n),h(t.onSave())}),l(17," Save "),r()()()()(),d(18,"app-error-toast",null,2)(20,"app-success-toast",null,3)}i&2&&(m(16),c("disabled",t.isLoading))},dependencies:[k,y,A]});let a=o;return a})();var wt=["newFeedbackComponentReference"],St=["editFeedbackComponentReference"],Tt=()=>({name:"All Guests",link:"#/home/guests/guests"}),Et=()=>({name:"All Feedbacks",link:"#/home/guests/guests/feedbacks"}),Gt=(a,o)=>[a,o];function Dt(a,o){if(a&1){let F=w();s(0,"tr",23),u("click",function(){let i=g(F).$implicit,t=L(2);return h(t.viewFeedbackDetails(i.id))}),s(1,"td"),l(2),r(),s(3,"td"),l(4),r(),s(5,"td"),l(6),r(),s(7,"td"),l(8),r()()}if(a&2){let F=o.$implicit;m(2),I(F.guest==null?null:F.guest.name),m(2),I(F.comment),m(2),I(F.rating),m(2),I(F.date)}}function Vt(a,o){if(a&1&&O(0,Dt,9,4,"tr",22),a&2){let F=L();c("ngForOf",F.guestFeedbacks)}}function Rt(a,o){if(a&1&&(s(0,"tr")(1,"td",24),d(2,"app-table-loader",25),r()()),a&2){let F=L();m(2),c("isLoading",F.isFetchingListData)("isNoData",F.isDataAvailable)}}var _e=(()=>{let o=class o{constructor(e,i){this.router=e,this.guestsService=i,this.guestFeedbacks=[],this.feedbackHeaders=["Guest","Comment","Rating","Date"],this.isFetchingListData=!0,this.isDataAvailable=!1,this.filterQuery="",this.pagination={currentPage:0,totalPages:0,totalItems:0},this.sorting={currentField:"created_at",currentDirection:"-"}}pageSelected(){this.getGuestsFeedbacks()}columnSorted(e){console.log(e),this.sorting.currentField=e.field,this.sorting.currentDirection=e.direction,this.getGuestsFeedbacks()}tableFiltered(e){this.filterQuery=e,this.getGuestsFeedbacks()}ngAfterViewInit(){this.getGuestsFeedbacks()}getGuestsFeedbacks(){this.guestsService.getAllHotelGuestFeedbacks().subscribe({next:e=>{console.log("Feedback Results: ",e.results),this.guestFeedbacks=e.results,this.pagination.currentPage=e.current_page,this.pagination.totalPages=e.total_pages,this.pagination.totalItems=e.count,this.pagination.totalItems==0?this.isDataAvailable=!1:this.isDataAvailable=!0},error:e=>{console.error("Error occurred:",e),this.guestFeedbacks=[],this.isFetchingListData=!1},complete:()=>{console.log("Request completed"),this.isFetchingListData=!1}})}viewFeedbackDetails(e){this.router.navigate(["/home/guests/guests/feedbacks/edit-view-feedback/",e])}goToCreateFeedback(){this.router.navigate(["/home/guests/guests/feedbacks/create-feedback"])}};o.\u0275fac=function(i){return new(i||o)(_(S),_(E))},o.\u0275cmp=C({type:o,selectors:[["app-all-feedbacks"]],viewQuery:function(i,t){if(i&1&&(p(wt,5),p(St,5)),i&2){let n;f(n=b())&&(t.createFeedback=n.first),f(n=b())&&(t.editViewFeedback=n.first)}},decls:35,vars:27,consts:[["newFeedbackComponentReference",""],["editFeedbackComponentReference",""],[3,"pageTitle","navItems"],[1,"row"],[1,"col-md-9"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"d-inline-block","w-100","mb-3"],[1,"btn","btn-primary","btn-sm","mb-3","grid-add-btn",3,"click"],[3,"placeholder"],[1,"table-responsive"],[1,"table","table-sm","table-hover","table-bordered"],["width","40%"],[3,"columnSorted","columnTitle","thisField","currentField","currentDirection"],["width","20%"],[4,"ngIf"],[3,"totalItems"],[1,"col-md-3"],["link","/home/guests/guests","name","View All Guests"],[3,"onFeedbackCreation"],[3,"onFeedbackUpdate"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["colspan","5"],[3,"isLoading","isNoData"]],template:function(i,t){if(i&1){let n=w();d(0,"app-topnav",2),s(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"h5",7),l(6,"Feedbacks"),r(),s(7,"div",8)(8,"button",9),u("click",function(){return g(n),h(t.createFeedback.openModal())}),l(9," Add New Feedback "),r(),d(10,"app-table-filtering",10),r(),s(11,"div",11)(12,"table",12)(13,"thead")(14,"tr")(15,"th",13)(16,"app-table-sorting",14),u("columnSorted",function(R){return g(n),h(t.columnSorted(R))}),r()(),s(17,"th",15)(18,"app-table-sorting",14),u("columnSorted",function(R){return g(n),h(t.columnSorted(R))}),r()(),s(19,"th",15)(20,"app-table-sorting",14),u("columnSorted",function(R){return g(n),h(t.columnSorted(R))}),r()(),s(21,"th",15)(22,"app-table-sorting",14),u("columnSorted",function(R){return g(n),h(t.columnSorted(R))}),r()()()(),s(23,"tbody"),O(24,Vt,1,1,"tr")(25,Rt,3,2,"tr",16),r()(),d(26,"app-table-pagination",17),r()()()(),s(27,"div",18)(28,"div",5)(29,"div",6),d(30,"app-page-link-button",19),r()()(),s(31,"app-create-feedback",20,0),u("onFeedbackCreation",function(){return g(n),h(t.getGuestsFeedbacks())}),r(),s(33,"app-edit-view-feedback",21,1),u("onFeedbackUpdate",function(){return g(n),h(t.getGuestsFeedbacks())}),r()()}i&2&&(c("pageTitle","Feedbacks")("navItems",P(24,Gt,D(22,Tt),D(23,Et))),m(10),c("placeholder","Search Feedbacks"),m(6),c("columnTitle","Guest Name")("thisField","name")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),m(2),c("columnTitle","Comment")("thisField","comment")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),m(2),c("columnTitle","Rating")("thisField","Rating")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),m(2),c("columnTitle","Date")("thisField","date")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),m(2),J(24,t.isDataAvailable?24:-1),m(),c("ngIf",t.isFetchingListData||!t.isDataAvailable),m(),c("totalItems",t.guestFeedbacks.length))},dependencies:[W,X,Q,V,ae,le,me,se,de,ce]});let a=o;return a})();var It=[{path:"",component:Re,children:[{path:"",component:he},{path:"all-guests",component:he},{path:"edit-view-guest/:guest_id",component:Qe},{path:"create-guest",component:Ae},{path:"feedbacks",component:_e},{path:"all-feedbacks",component:_e},{path:"edit-view-feedback/:feedback_id",component:de},{path:"create-feedback",component:ce}]}],Ne=(()=>{let o=class o{};o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=$({type:o}),o.\u0275inj=H({imports:[pe.forChild(It),pe]});let a=o;return a})();var Yi=(()=>{let o=class o{};o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=$({type:o}),o.\u0275inj=H({imports:[ke,Te,Ee,Ne,De,V,Ge,j,Ve]});let a=o;return a})();export{Yi as GuestsModule};
