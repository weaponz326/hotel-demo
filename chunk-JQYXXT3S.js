import{b as P,d as vt}from"./chunk-FBWHH6JU.js";import{a as T}from"./chunk-GHO2QF7T.js";import{a as st,b as dt,c as R,d as pt,e as ct}from"./chunk-3OLZPOF4.js";import{b as Z,d as tt,e as L,f as G,g as et,h as g,j,l as it,m as at,n as ot,o as nt,p as rt,r as lt,u as ft,v as mt}from"./chunk-RQYECNT5.js";import{b as F,c as ut}from"./chunk-IMD2KKFX.js";import{A as V,Aa as J,F as v,G as A,Ha as h,Ia as $,Ja as M,K as C,Ka as z,L as y,V as s,W as S,Za as K,_a as W,aa as B,ca as m,cb as X,ja as a,ka as o,la as f,lb as Y,ma as w,mb as N,na as c,nb as b,oa as U,qb as q,ta as E,ua as I,va as x,xa as l,ya as k}from"./chunk-TK5UYZ3D.js";var ht=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=v({type:i,selectors:[["app-staff"]],decls:1,vars:0,template:function(e,r){e&1&&f(0,"router-outlet")},dependencies:[Y]});let n=i;return n})();var Dt=()=>({name:"All Staff",link:"#/home/staff/staff/all-staff"}),wt=n=>[n];function Et(n,i){if(n&1){let p=w();a(0,"tr",18),c("click",function(){let e=C(p).$implicit,r=U();return y(r.gotoStaff(e.id))}),a(1,"td"),l(2),o(),a(3,"td"),l(4),o(),a(5,"td"),l(6),o(),a(7,"td"),l(8),o()()}if(n&2){let p=i.$implicit;s(2),k(p==null?null:p.staff_id),s(2),J("",p==null?null:p.first_name," ",p==null?null:p.last_name,""),s(2),k(p==null?null:p.job),s(2),k(p==null?null:p.department)}}function It(n,i){if(n&1&&(a(0,"tr")(1,"td",19),f(2,"app-table-loader",20),o()()),n&2){let p=U();s(2),m("isLoading",p.isFetchingListData)("isNoData",p.isDataAvailable)}}var H=(()=>{let i=class i{constructor(t,e){this.router=t,this.staffService=e,this.isFetchingListData=!1,this.isDataAvailable=!0,this.filterQuery="",this.pagination={currentPage:0,totalPages:0,totalItems:0},this.sorting={currentField:"created_at",currentDirection:"-"},this.staffListData=[]}ngAfterViewInit(){this.getAllHotelStaff()}getAllHotelStaff(){this.isFetchingListData=!0,this.staffService.getAllHotelStaff().subscribe({next:t=>{console.log(t),this.staffListData=t.results,this.pagination.currentPage=t.current_page,this.pagination.totalPages=t.total_pages,this.pagination.totalItems=t.count,this.pagination.totalItems==0&&(this.isDataAvailable=!1)},error:t=>{console.log(t)},complete:()=>{this.isFetchingListData=!1}})}pageSelected(){this.getAllHotelStaff()}columnSorted(t){console.log(t),this.sorting.currentField=t.field,this.sorting.currentDirection=t.direction,this.getAllHotelStaff()}tableFiltered(t){this.filterQuery=t,this.getAllHotelStaff()}gotoStaff(t){localStorage.setItem("hotel_staff_id",t),this.router.navigateByUrl("/home/staff/staff/edit-view-staff/"+t)}};i.\u0275fac=function(e){return new(e||i)(S(N),S(T))},i.\u0275cmp=v({type:i,selectors:[["app-all-staff"]],decls:27,vars:27,consts:[[3,"pageTitle","navItems"],[1,"row"],[1,"col-md-10"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"d-inline-block","w-100","mb-3"],["routerLink","/home/staff/staff/create-staff",1,"btn","btn-primary","grid-add-btn"],[3,"tableFiltered","placeholder"],[1,"table-responsive"],[1,"table","table-sm","table-bordered","table-hover"],["width","15%"],[3,"columnSorted","columnTitle","thisField","currentField","currentDirection"],["width","35%"],["width","25%"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"pageSelected","totalItems","currentPage"],[3,"click"],["colspan","4"],[3,"isLoading","isNoData"]],template:function(e,r){e&1&&(f(0,"app-topnav",0),a(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),l(6,"All Staff"),o(),a(7,"div",6)(8,"a",7),l(9,"Add New Staff "),o(),a(10,"app-table-filtering",8),c("tableFiltered",function(u){return r.tableFiltered(u)}),o()(),a(11,"div",9)(12,"table",10)(13,"thead")(14,"tr")(15,"th",11)(16,"app-table-sorting",12),c("columnSorted",function(u){return r.columnSorted(u)}),o()(),a(17,"th",13)(18,"app-table-sorting",12),c("columnSorted",function(u){return r.columnSorted(u)}),o()(),a(19,"th",14)(20,"app-table-sorting",12),c("columnSorted",function(u){return r.columnSorted(u)}),o()(),a(21,"th",14)(22,"app-table-sorting",12),c("columnSorted",function(u){return r.columnSorted(u)}),o()()()(),a(23,"tbody"),B(24,Et,9,5,"tr",15)(25,It,3,2,"tr",16),o()(),a(26,"app-table-pagination",17),c("pageSelected",function(){return r.pageSelected()}),o()()()()()()),e&2&&(m("pageTitle","Staff")("navItems",$(25,wt,h(24,Dt))),s(10),m("placeholder","search staff"),s(6),m("columnTitle","Staff ID")("thisField","staff_id")("currentField",r.sorting.currentField)("currentDirection",r.sorting.currentDirection),s(2),m("columnTitle","Name")("thisField","first_name")("currentField",r.sorting.currentField)("currentDirection",r.sorting.currentDirection),s(2),m("columnTitle","Job")("thisField","job")("currentField",r.sorting.currentField)("currentDirection",r.sorting.currentDirection),s(2),m("columnTitle","Department")("thisField","department")("currentField",r.sorting.currentField)("currentDirection",r.sorting.currentDirection),s(2),m("ngForOf",r.staffListData),s(),m("ngIf",r.isFetchingListData||!r.isDataAvailable),s(),m("totalItems",r.pagination.totalItems)("currentPage",r.pagination.currentPage)("totalItems",r.pagination.totalItems))},dependencies:[K,W,b,F,dt,R,pt,st]});let n=i;return n})();var Nt=["imageUploadComponentReference"],_=(()=>{let i=class i{constructor(){this.staffForm=new G({})}ngOnInit(){this.initStaffForm()}initStaffForm(){this.staffForm=new G({staffId:new g(""),firstName:new g(""),lastName:new g(""),gender:new g(""),email:new g(""),phone:new g(""),address:new g(""),job:new g(""),department:new g("")})}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=v({type:i,selectors:[["app-staff-form"]],viewQuery:function(e,r){if(e&1&&E(Nt,5,P),e&2){let d;I(d=x())&&(r.imageUpload=d.first)}},decls:70,vars:1,consts:[["imageUploadComponentReference",""],[3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"row","mb-1"],[1,"col-md-4"],["for","staffId",1,"float-md-end","float-sm-start","col-form-label"],[1,"col-md-8"],["formControlName","staffId","type","text","id","staffId","name","staffId","required","",1,"form-control"],["for","first_name",1,"float-md-end","float-sm-start","col-form-label"],["formControlName","firstName","type","text","id","first_name","name","first_name","required","",1,"form-control"],["for","lastName",1,"float-md-end","float-sm-start","col-form-label"],["formControlName","lastName","type","text","id","lastName","name","lastName",1,"form-control"],["for","gender",1,"float-md-end","float-sm-start","col-form-label"],["formControlName","gender","id","gender","name","gender",1,"form-control"],["value",""],["for","job",1,"float-md-end","float-sm-start","col-form-label"],["formControlName","job","type","text","id","job","name","job",1,"form-control"],["for","department",1,"float-md-end","float-sm-start","col-form-label"],["formControlName","department","type","text","id","department","name","department",1,"form-control"],["for","email",1,"float-md-end","float-sm-start","col-form-label"],["formControlName","email","type","email","id","email","name","email",1,"form-control"],["for","phone",1,"float-md-end","float-sm-start","col-form-label"],["formControlName","phone","type","tel","id","phone","name","phone",1,"form-control"],["for","address",1,"float-md-end","float-sm-start","col-form-label"],["formControlName","address","rows","3","id","address","name","address",1,"form-control"]],template:function(e,r){e&1&&(a(0,"form",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"label",6),l(6,"Staff ID:"),o()(),a(7,"div",7),f(8,"input",8),o()(),a(9,"div",4)(10,"div",5)(11,"label",9),l(12,"First Name:"),o()(),a(13,"div",7),f(14,"input",10),o()(),a(15,"div",4)(16,"div",5)(17,"label",11),l(18,"Last Name:"),o()(),a(19,"div",7),f(20,"input",12),o()(),a(21,"div",4)(22,"div",5)(23,"label",13),l(24,"Gender:"),o()(),a(25,"div",7)(26,"select",14),f(27,"option",15),a(28,"option",15),l(29,"Male"),o(),a(30,"option",15),l(31,"Female"),o()()()(),a(32,"div",4)(33,"div",5)(34,"label",16),l(35,"Job:"),o()(),a(36,"div",7),f(37,"input",17),o()(),a(38,"div",4)(39,"div",5)(40,"label",18),l(41,"Department:"),o()(),a(42,"div",7),f(43,"input",19),o()()(),a(44,"div",3)(45,"div",4)(46,"div",5)(47,"label",20),l(48,"Email:"),o()(),a(49,"div",7),f(50,"input",21),o()(),a(51,"div",4)(52,"div",5)(53,"label",22),l(54,"Phone No.:"),o()(),a(55,"div",7),f(56,"input",23),o()(),a(57,"div",4)(58,"div",5)(59,"label",24),l(60,"Address:"),o()(),a(61,"div",7),f(62,"textarea",25),o()(),a(63,"div",4)(64,"div",5)(65,"label",24),l(66,"Photo:"),o()(),a(67,"div",3),f(68,"app-profile-image-upload",null,0),o()()()()()),e&2&&m("formGroup",r.staffForm)},dependencies:[j,nt,rt,Z,ot,tt,L,lt,it,at,P]});let n=i;return n})();var Tt=["staffFormComponentReference"],Vt=()=>({name:"All Staff",link:"#/home/staff/staff/all-staff"}),At=()=>({name:"New Staff",link:"#/home/staff/staff/create-staff"}),kt=(n,i)=>[n,i],bt=(()=>{let i=class i{constructor(t,e){this.router=t,this.staffService=e,this.isSavingData=!1}createStaff(){this.isSavingData=!0;let t=this.getStaffData();this.staffService.createStaff(t).subscribe({next:e=>{console.log(e),localStorage.setItem("hotel_staff_id",e.id),this.staffForm.imageUpload.isFileChanged?this.updateStaffImage():this.router.navigateByUrl("/home/staff/staff/edit-view-staff/"+e.id)},error:e=>{console.log(e)},complete:()=>{this.isSavingData=!1}})}updateStaffImage(){let t=new FormData;t.append("staff_image",this.staffForm.imageUpload.file),t.append("hotel",localStorage.getItem("hotel_id")),this.staffService.updateStaff(t).subscribe({next:e=>{console.log(e),this.router.navigateByUrl("/home/staff/staff/edit-view-staff/"+e.id)},error:e=>{console.log(e)},complete:()=>{this.isSavingData=!1}})}getStaffData(){return{hotel:localStorage.getItem("hotel_id"),staff_id:this.staffForm.staffForm.controls.staffId.value,first_name:this.staffForm.staffForm.controls.firstName.value,last_name:this.staffForm.staffForm.controls.lastName.value,gender:this.staffForm.staffForm.controls.gender.value,email:this.staffForm.staffForm.controls.email.value,phone:this.staffForm.staffForm.controls.phone.value,address:this.staffForm.staffForm.controls.address.value,job:this.staffForm.staffForm.controls.job.value,department:this.staffForm.staffForm.controls.department.value}}};i.\u0275fac=function(e){return new(e||i)(S(N),S(T))},i.\u0275cmp=v({type:i,selectors:[["app-create-staff"]],viewQuery:function(e,r){if(e&1&&E(Tt,5,_),e&2){let d;I(d=x())&&(r.staffForm=d.first)}},decls:15,vars:8,consts:[["staffFormComponentReference",""],[3,"pageTitle","navItems"],[1,"row"],[1,"col"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"mt-3"],["type","submit",1,"btn","btn-sm","btn-success","float-end","ms-2","form-control-btn",3,"click","disabled"],["type","reset","routerLink","/home/staff/staff/all-staff",1,"btn","btn-sm","btn-warning","float-end","ms-2","form-control-btn"]],template:function(e,r){if(e&1){let d=w();a(0,"app-topnav",1),l(1,`
>`),o(),a(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h5",6),l(7,"Add New Staff"),o(),f(8,"app-staff-form",null,0),a(10,"div",7)(11,"button",8),c("click",function(){return C(d),y(r.createStaff())}),l(12,"Save"),o(),a(13,"button",9),l(14,"Cancel"),o()()()()()()}e&2&&(m("pageTitle","Staff")("navItems",M(5,kt,h(3,Vt),h(4,At))),s(11),m("disabled",r.isSavingData))},dependencies:[b,F,_]});let n=i;return n})();var Mt=["staffFormComponentReference"],Lt=()=>({name:"All Staff",link:"#/home/staff/staff/all-staff"}),jt=()=>({name:"View Staff",link:"#/home/staff/staff/view-edit-staff/1"}),Rt=(n,i)=>[n,i],Ft=(()=>{let i=class i{constructor(t,e){this.router=t,this.staffService=e,this.isFetchingData=!1,this.isSavingData=!1,this.isDeletingData=!1}ngAfterViewInit(){this.getStaff()}getStaff(){this.isFetchingData=!0,this.staffService.getStaff().subscribe({next:t=>{console.log(t),this.setStaffData(t)},error:t=>{console.log(t)},complete:()=>{this.isFetchingData=!1}})}updateStaff(){this.isSavingData=!0;let t=this.getStaffData();this.staffService.updateStaff(t).subscribe({next:e=>{console.log(e),this.staffForm.imageUpload.isFileChanged&&this.updateStaffImage()},error:e=>{console.log(e)},complete:()=>{this.isSavingData=!1}})}deleteStaff(){this.isDeletingData=!0,this.staffService.deleteStaff().subscribe({next:t=>{console.log(t),this.router.navigateByUrl("/home/staff/staff/all-staff")},error:t=>{console.log(t)},complete:()=>{this.isDeletingData=!1}})}updateStaffImage(){this.isSavingData=!0;let t=new FormData;t.append("staff_image",this.staffForm.imageUpload.file),t.append("hotel",localStorage.getItem("hotel_id")),this.staffService.updateStaff(t).subscribe({next:e=>{console.log(e)},error:e=>{console.log(e)},complete:()=>{this.isSavingData=!1}})}setStaffData(t){this.staffForm.staffForm.controls.staffId.setValue(t.staff_id),this.staffForm.staffForm.controls.firstName.setValue(t.first_name),this.staffForm.staffForm.controls.lastName.setValue(t.last_name),this.staffForm.staffForm.controls.gender.setValue(t.gender),this.staffForm.staffForm.controls.email.setValue(t.email),this.staffForm.staffForm.controls.phone.setValue(t.phone),this.staffForm.staffForm.controls.address.setValue(t.address),this.staffForm.staffForm.controls.job.setValue(t.job),this.staffForm.staffForm.controls.department.setValue(t.department),this.staffForm.imageUpload.setImageSrc(t.staff_image)}getStaffData(){return{hotel:localStorage.getItem("hotel_id"),staff_id:this.staffForm.staffForm.controls.staffId.value,first_name:this.staffForm.staffForm.controls.firstName.value,last_name:this.staffForm.staffForm.controls.lastName.value,gender:this.staffForm.staffForm.controls.gender.value,email:this.staffForm.staffForm.controls.email.value,phone:this.staffForm.staffForm.controls.phone.value,address:this.staffForm.staffForm.controls.address.value,job:this.staffForm.staffForm.controls.job.value,department:this.staffForm.staffForm.controls.department.value}}};i.\u0275fac=function(e){return new(e||i)(S(N),S(T))},i.\u0275cmp=v({type:i,selectors:[["app-edit-view-staff"]],viewQuery:function(e,r){if(e&1&&E(Mt,5,_),e&2){let d;I(d=x())&&(r.staffForm=d.first)}},decls:16,vars:9,consts:[["staffFormComponentReference",""],[3,"pageTitle","navItems"],[1,"row"],[1,"col"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"mt-3"],["type","submit",1,"btn","btn-sm","btn-success","float-end","ms-2","form-control-btn",3,"click","disabled"],["type","reset","routerLink","/home/staff/staff/all-staff",1,"btn","btn-sm","btn-warning","float-end","ms-2","form-control-btn"],["type","reset",1,"btn","btn-sm","btn-danger","float-end","ms-2","form-control-btn",3,"click","disabled"]],template:function(e,r){if(e&1){let d=w();f(0,"app-topnav",1),a(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h5",6),l(6,"View / Edit Staff"),o(),f(7,"app-staff-form",null,0),a(9,"div",7)(10,"button",8),c("click",function(){return C(d),y(r.updateStaff())}),l(11," Save "),o(),a(12,"button",9),l(13," Cancel "),o(),a(14,"button",10),c("click",function(){return C(d),y(r.deleteStaff())}),l(15," Delete "),o()()()()()()}e&2&&(m("pageTitle","Staff")("navItems",M(6,Rt,h(4,Lt),h(5,jt))),s(10),m("disabled",r.isFetchingData||r.isSavingData),s(4),m("disabled",r.isFetchingData||r.isDeletingData))},dependencies:[b,F,_]});let n=i;return n})();var Pt=()=>({name:"All Staff",link:"#/home/staff/staff/all-staff"}),Qt=()=>({name:"View Staff",link:"#/home/staff/staff/view-edit-staff/1"}),Ut=()=>({name:"Staff Performance",link:"#/home/staff/staff/staff-performance/1"}),qt=(n,i,p)=>[n,i,p],_t=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=v({type:i,selectors:[["app-staff-performance"]],decls:49,vars:11,consts:[[3,"pageTitle","navItems"],[1,"row"],[1,"col-md-6"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"row","mb-1"],[1,"col-md-4"],["for","staffId",1,"float-md-end","float-sm-start","col-form-label"],[1,"col-md-8"],["type","text","id","staffId","name","staffId","required","",1,"form-control"],["for","first_name",1,"float-md-end","float-sm-start","col-form-label"],["type","text","id","first_name","name","first_name","required","",1,"form-control"],["for","lasName",1,"float-md-end","float-sm-start","col-form-label"],["type","text","id","lasName","name","lasName",1,"form-control"],[1,"col-md-7"],[1,"d-inline-block","w-100","mb-3"],["routerLink","/home/staff/staff/staff-performance/1/add-evaluation",1,"btn","btn-primary","grid-add-btn"],[1,"table-responsive"],[1,"table","table-bordered","table-hover"],[3,"columnTitle"],["routerLink","/home/staff/staff/staff-performance/1/view-edit-evaluation/4"]],template:function(e,r){e&1&&(f(0,"app-topnav",0),a(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),l(6,"Staff Details"),o(),a(7,"form")(8,"div",6)(9,"div",7)(10,"label",8),l(11,"Staff ID:"),o()(),a(12,"div",9),f(13,"input",10),o()(),a(14,"div",6)(15,"div",7)(16,"label",11),l(17,"First Name:"),o()(),a(18,"div",9),f(19,"input",12),o()(),a(20,"div",6)(21,"div",7)(22,"label",13),l(23,"Last Name:"),o()(),a(24,"div",9),f(25,"input",14),o()()()()()()(),a(26,"div",1)(27,"div",15)(28,"div",3)(29,"div",4)(30,"h5",5),l(31,"All Performance Evaluations"),o(),a(32,"div",16)(33,"a",17),l(34," Add Evaluation "),o()(),a(35,"div",18)(36,"table",19)(37,"thead")(38,"tr")(39,"th"),f(40,"app-table-sorting",20),o(),a(41,"th"),f(42,"app-table-sorting",20),o()()(),a(43,"tbody")(44,"tr",21)(45,"td"),l(46,"25th April, 2024"),o(),a(47,"td"),l(48,"Lorem Ipsum Evaluation"),o()()()()()()()()()),e&2&&(m("pageTitle","Staff")("navItems",z(7,qt,h(4,Pt),h(5,Qt),h(6,Ut))),s(40),m("columnTitle","Evaluation Date"),s(2),m("columnTitle","Evaluation title"))},dependencies:[j,L,et,b,F,R]});let n=i;return n})();var Gt=[{path:"",component:ht,children:[{path:"",component:H},{path:"all-staff",component:H},{path:"create-staff",component:bt},{path:"edit-view-staff/:id",component:Ft},{path:"staff-performance/:id",component:_t}]}],Ct=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=A({type:i}),i.\u0275inj=V({imports:[q.forChild(Gt),q]});let n=i;return n})();var Re=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=A({type:i}),i.\u0275inj=V({imports:[X,ft,mt,Ct,ut,ct,vt]});let n=i;return n})();export{Re as StaffModule};
