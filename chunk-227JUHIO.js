import{a as M,b as R,c as Q,d as P,e as N}from"./chunk-3OLZPOF4.js";import{C as B,F as E,Ga as $,K as p,L as g,Q as S,R as C,V as s,W as T,Za as L,_a as V,aa as k,ba as v,ca as a,cb as A,fb as H,ja as r,ka as n,la as f,ma as F,na as h,oa as I,rb as U,ta as y,ua as G,va as w,xa as c,ya as b,z as D}from"./chunk-TK5UYZ3D.js";var j=(()=>{let i=class i{constructor(e){this.http=e,this.apiBaseUrl=U.apiBaseUrl}getAllHotelGuests(){return this.http.get(`${this.apiBaseUrl}/hotel/guests/guests/guests?hotel=${localStorage.getItem("hotel_id")}`)}getHotelGuestById(e){return this.http.get(`${this.apiBaseUrl}/hotel/guests/guests/guests/${localStorage.getItem("hotel_guest_id")}`)}updateHotelGuestById(e,l){return this.http.put(`${this.apiBaseUrl}/hotel/guests/guests/guests/${localStorage.getItem("hotel_guest_id")}`,l)}deleteHotelGuestById(e){return this.http.delete(`${this.apiBaseUrl}/hotel/guests/guests/guests/${localStorage.getItem("hotel_guest_id")}
      )}`)}createHotelGuest(e){return this.http.post(`${this.apiBaseUrl}/hotel/guests/guests/guests/`,e)}getAllHotelGuestFeedbacks(){return this.http.get(`${this.apiBaseUrl}/hotel/guests/guests/guests?hotel=${localStorage.getItem("hotel_id")}`)}getHotelGuestFeedbackById(e){return this.http.get(`${this.apiBaseUrl}/hotel/guests/guests/guests/${localStorage.getItem("hotel_feedback_id")}`)}updateHotelGuestFeedbackById(e,l){return this.http.put(`${this.apiBaseUrl}/hotel/guests/guests/guests/feedbacks/${localStorage.getItem("hotel_feedback_id")}`,l)}deleteHotelGuestFeedbackById(e){return this.http.delete(`${this.apiBaseUrl}/hotel/guests/guests/guests/feedbacks/${localStorage.getItem("hotel_feedback_id")}
      )}`)}createHotelGuestFeedback(e){return this.http.post(`${this.apiBaseUrl}/hotel/guests/guests/guests/feedbacks`,e)}};i.\u0275fac=function(l){return new(l||i)(B(H))},i.\u0275prov=D({token:i,factory:i.\u0275fac,providedIn:"root"});let o=i;return o})();var q=["openButtonElementReference"],z=["closeButtonElementReference"];function J(o,i){if(o&1){let u=F();r(0,"tr",22),h("click",function(){let l=p(u).$implicit,t=I();return g(t.selectRow(l))}),r(1,"td"),c(2),n(),r(3,"td"),c(4),n(),r(5,"td"),c(6),n(),r(7,"td"),c(8),n()()}if(o&2){let u=i.$implicit;s(2),b(u.guest_name),s(2),b(u.phone_number),s(2),b(u.email),s(2),b(u.address)}}function K(o,i){if(o&1&&(r(0,"tr")(1,"td",23),f(2,"app-table-loader",24),n()()),o&2){let u=I();s(2),a("isLoading",u.isFetchingListData)("isNoData",u.isDataAvailable)}}var ue=(()=>{let i=class i{constructor(e){this.guestService=e,this.rowSelected=new C,this.closeTarget="",this.guestsListData=[],this.isFetchingListData=!1,this.isDataAvailable=!0,this.filterQuery="",this.pagination={currentPage:0,totalPages:0,totalItems:0},this.sorting={currentField:"created_at",currentDirection:"-"}}openModal(){this.guestsListData=[],this.getAllGuest(),this.openButton.nativeElement.click()}getAllGuest(){this.isFetchingListData=!0,this.guestService.getAllHotelGuests().subscribe({next:e=>{console.log(e),this.guestsListData=e.results,this.pagination.currentPage=e.current_page,this.pagination.totalPages=e.total_pages,this.pagination.totalItems=e.count,this.isFetchingListData=!1,this.pagination.totalItems==0&&(this.isDataAvailable=!1)},error:e=>{console.log(e)}})}pageSelected(){this.getAllGuest()}columnSorted(e){console.log(e),this.sorting.currentField=e.field,this.sorting.currentDirection=e.direction,this.getAllGuest()}tableFiltered(e){this.filterQuery=e,this.getAllGuest()}selectRow(e){this.rowSelected.emit(e),this.closeButton.nativeElement.click(),console.log(e)}};i.\u0275fac=function(l){return new(l||i)(T(j))},i.\u0275cmp=E({type:i,selectors:[["app-select-guest"]],viewQuery:function(l,t){if(l&1&&(y(q,5,S),y(z,5,S)),l&2){let d;G(d=w())&&(t.openButton=d.first),G(d=w())&&(t.closeButton=d.first)}},inputs:{closeTarget:"closeTarget"},outputs:{rowSelected:"rowSelected"},standalone:!0,features:[$],decls:32,vars:24,consts:[["openButtonElementReference",""],["closeButtonElementReference",""],["data-bs-toggle","modal","data-bs-target","#selectGuestModal",3,"hidden"],["id","selectGuestModal","tabindex","-1","aria-labelledby","selectGuestModalLabel","aria-hidden","true",1,"modal","fade","select-table-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header","bg-light"],["id","selectGuestModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close","data-bs-toggle","modal",1,"btn-close"],[1,"modal-body"],[1,"d-inline-block","w-100","mb-2"],[3,"tableFiltered","placeholder"],[1,"table-responsive"],[1,"table","table-sm","table-hover","table-bordered"],["width","30%"],[3,"columnSorted","columnTitle","thisField","currentField","currentDirection"],["width","15%"],["width","25%"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"totalItems"],["data-bs-dismiss","modal","data-bs-toggle","modal",3,"hidden"],[3,"click"],["colspan","5"],[3,"isLoading","isNoData"]],template:function(l,t){if(l&1){let d=F();r(0,"button",2,0),c(2,` Launch demo modal
`),n(),r(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"span",7),c(8,"Select Hotel Guest"),n(),f(9,"button",8),n(),r(10,"div",9)(11,"div",10)(12,"app-table-filtering",11),h("tableFiltered",function(){return p(d),g(t.tableFiltered)}),n()(),r(13,"div",12)(14,"table",13)(15,"thead")(16,"tr")(17,"th",14)(18,"app-table-sorting",15),h("columnSorted",function(m){return p(d),g(t.columnSorted(m))}),n()(),r(19,"th",16)(20,"app-table-sorting",15),h("columnSorted",function(m){return p(d),g(t.columnSorted(m))}),n()(),r(21,"th",14)(22,"app-table-sorting",15),h("columnSorted",function(m){return p(d),g(t.columnSorted(m))}),n()(),r(23,"th",17)(24,"app-table-sorting",15),h("columnSorted",function(m){return p(d),g(t.columnSorted(m))}),n()()()(),r(25,"tbody"),k(26,J,9,4,"tr",18)(27,K,3,2,"tr",19),n()(),f(28,"app-table-pagination",20),n()(),r(29,"button",21,1),c(31," Launch demo modal "),n()()()()}l&2&&(a("hidden",!0),s(9),v("data-bs-target",t.closeTarget),s(3),a("placeholder","Search Guests"),s(6),a("columnTitle","Guest Name")("thisField","name")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),s(2),a("columnTitle","Phone")("thisField","phone")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),s(2),a("columnTitle","Email")("thisField","email")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),s(2),a("columnTitle","Address")("thisField","address")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),s(2),a("ngForOf",t.guestsListData),s(),a("ngIf",!t.isFetchingListData||!t.isDataAvailable),s(),a("totalItems",t.guestsListData.length),s(),a("hidden",!0),v("data-bs-target",t.closeTarget))},dependencies:[A,L,V,N,R,Q,P,M]});let o=i;return o})();export{j as a,ue as b};
