import{a as Vt}from"./chunk-GHO2QF7T.js";import{a as Z,b as Rt,c as Dt,d as wt,e as Et}from"./chunk-3OLZPOF4.js";import{b as z,d as J,e as K,f as Q,h as x,j as W,l as X,m as Y,s as yt,u as Ct,v as Ft}from"./chunk-RQYECNT5.js";import{b as tt,c as xt}from"./chunk-IMD2KKFX.js";import{A as j,Aa as ft,C as mt,F as v,G as P,Ha as L,Ia as pt,Ja as ht,K as p,L as h,La as U,Ma as nt,Na as ut,Q as V,R as $,V as d,W as S,Za as q,_a as H,aa as O,ba as dt,bb as G,ca as f,cb as gt,fb as vt,ga as A,ha as B,ia as N,ja as s,ka as o,la as c,lb as St,ma as F,mb as T,na as u,nb as bt,oa as C,qb as st,rb as _t,ta as b,ua as _,va as y,xa as l,ya as E,z as lt,za as ct}from"./chunk-TK5UYZ3D.js";var Tt=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=v({type:i,selectors:[["app-roster"]],decls:1,vars:0,template:function(e,r){e&1&&c(0,"router-outlet")},dependencies:[St]});let n=i;return n})();var I=(()=>{let i=class i{constructor(){this.rosterForm=new Q({})}ngOnInit(){this.initRosterForm()}initRosterForm(){this.rosterForm=new Q({rosterName:new x(""),startDate:new x,endDate:new x,notes:new x("")})}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=v({type:i,selectors:[["app-roster-form"]],decls:25,vars:1,consts:[[1,"module-form-control",3,"formGroup"],[1,"row","mb-1"],[1,"col-md-4"],["for","rosterName",1,"float-md-end","float-sm-start","col-form-label"],[1,"col-md-8"],["formControlName","rosterName","type","text","id","rosterName",1,"form-control","form-control-sm"],["for","startDate",1,"float-md-end","float-sm-start","col-form-label"],["formControlName","startDate","type","date","id","startDate",1,"form-control","form-control-sm"],["for","endDate",1,"float-md-end","float-sm-start","col-form-label"],["formControlName","endDate","type","date","id","endDate",1,"form-control","form-control-sm"],["for","notes",1,"float-md-end","float-sm-start","col-form-label"],["rows","3","formControlName","notes","id","notes",1,"form-control","form-control-sm"]],template:function(e,r){e&1&&(s(0,"form",0)(1,"div",1)(2,"div",2)(3,"label",3),l(4,"Roster Name"),o()(),s(5,"div",4),c(6,"input",5),o()(),s(7,"div",1)(8,"div",2)(9,"label",6),l(10,"Start Date"),o()(),s(11,"div",4),c(12,"input",7),o()(),s(13,"div",1)(14,"div",2)(15,"label",8),l(16,"End Date"),o()(),s(17,"div",4),c(18,"input",9),o()(),s(19,"div",1)(20,"div",2)(21,"label",10),l(22,"Notes"),o()(),s(23,"div",4),c(24,"textarea",11),o()()()),e&2&&f("formGroup",r.rosterForm)},dependencies:[W,z,J,K,X,Y]});let n=i;return n})();var D=(()=>{let i=class i{constructor(t){this.http=t,this.apiBaseUrl=_t.apiBaseUrl}createRoster(t){return this.http.post(`${this.apiBaseUrl}/hotel/staff/roster/roster/`,t)}getAllHotelRoster(){return this.http.get(`${this.apiBaseUrl}/hotel/staff/roster/roster?hotel=${localStorage.getItem("hotel_id")}`)}getRoster(){return this.http.get(`${this.apiBaseUrl}/hotel/staff/roster/roster/${localStorage.getItem("hotel_roster_id")}`)}updateRoster(t){return this.http.put(`${this.apiBaseUrl}/hotel/staff/roster/roster/${localStorage.getItem("hotel_roster_id")}`,t)}deleteRoster(){return this.http.delete(`${this.apiBaseUrl}/hotel/staff/roster/roster/${localStorage.getItem("hotel_roster_id")}`)}createShift(t){return this.http.post(`${this.apiBaseUrl}/hotel/staff/roster/shifts/`,t)}getAllRosterShift(){return this.http.get(`${this.apiBaseUrl}/hotel/staff/roster/shifts?roster=${localStorage.getItem("hotel_roster_id")}`)}getShift(t){return this.http.get(`${this.apiBaseUrl}/hotel/staff/roster/shifts/${t}`)}updateShift(t,e){return this.http.put(`${this.apiBaseUrl}/hotel/staff/roster/shifts/${t}`,e)}deleteShift(t){return this.http.delete(`${this.apiBaseUrl}/hotel/staff/roster/shifts/${t}`)}createRosterEntry(t){return this.http.post(`${this.apiBaseUrl}/hotel/staff/roster/roster-entries/`,t)}getAllRosterEntry(){return this.http.get(`${this.apiBaseUrl}/hotel/staff/roster/roster-entries?roster=${localStorage.getItem("hotel_roster_id")}`)}getRosterEntry(t){return this.http.get(`${this.apiBaseUrl}/hotel/staff/roster/roster-entries/${t}`)}updateRosterEntry(t,e){return this.http.put(`${this.apiBaseUrl}/hotel/staff/roster/roster-entries/${t}`,e)}deleteRosterEntry(t){return this.http.delete(`${this.apiBaseUrl}/hotel/staff/roster/roster-entries/${t}`)}};i.\u0275fac=function(e){return new(e||i)(mt(vt))},i.\u0275prov=lt({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();var Lt=["rosterFormComponentElementReference"],Ut=["newRosterButtonElementReference"],jt=["dismissRosterButtonElementReference"],it=(()=>{let i=class i{constructor(t,e){this.router=t,this.rosterService=e,this.isSavingData=!1}createRoster(){this.isSavingData=!0;let t=this.getRosterData();this.rosterService.createRoster(t).subscribe({next:e=>{console.log(e),this.closeModal(),localStorage.setItem("hotel_roster_id",e.id),this.router.navigateByUrl("/home/staff/roster/edit-view-roster/"+e.id)},error:e=>{console.log(e)},complete:()=>{this.isSavingData=!1}})}openModal(){this.newButton.nativeElement.click()}closeModal(){this.dismissButton.nativeElement.click()}getRosterData(){return{hotel:localStorage.getItem("hotel_id"),roster_name:this.rosterForm.rosterForm.controls.rosterName.value,start_date:this.rosterForm.rosterForm.controls.startDate.value,end_date:this.rosterForm.rosterForm.controls.endDate.value,notes:this.rosterForm.rosterForm.controls.notes.value}}};i.\u0275fac=function(e){return new(e||i)(S(T),S(D))},i.\u0275cmp=v({type:i,selectors:[["app-create-roster"]],viewQuery:function(e,r){if(e&1&&(b(Lt,5,I),b(Ut,5,V),b(jt,5,V)),e&2){let a;_(a=y())&&(r.rosterForm=a.first),_(a=y())&&(r.newButton=a.first),_(a=y())&&(r.dismissButton=a.first)}},decls:19,vars:1,consts:[["newRosterButtonElementReference",""],["dismissRosterButtonElementReference",""],["rosterFormComponentElementReference",""],["hidden","true","data-bs-toggle","modal","data-bs-target","#newRosterModal"],["id","newRosterModal","tabindex","-1","aria-labelledby","newRosterLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","newRosterLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-warning","form-control-btn"],["type","button",1,"btn","btn-sm","btn-success","form-control-btn",3,"click","disabled"]],template:function(e,r){if(e&1){let a=F();s(0,"button",3,0),l(2,` Launch demo modal
`),o(),s(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7)(7,"h5",8),l(8,"Add New Roster"),o(),c(9,"button",9,1),o(),s(11,"div",10),c(12,"app-roster-form",null,2),o(),s(14,"div",11)(15,"button",12),l(16,"Cancel"),o(),s(17,"button",13),u("click",function(){return p(a),h(r.createRoster())}),l(18,"Save"),o()()()()()}e&2&&(d(17),f("disabled",r.isSavingData))},dependencies:[I]});let n=i;return n})();var Ht=["createRosterComponentReference"],Gt=()=>({name:"All Rosters",link:"#/home/roster/roster/all-roster"}),zt=n=>[n];function Jt(n,i){if(n&1){let m=F();s(0,"tr",18),u("click",function(){let e=p(m).$implicit,r=C();return h(r.gotoRoster(e.id))}),s(1,"td"),l(2),o(),s(3,"td"),l(4),U(5,"date"),o(),s(6,"td"),l(7),U(8,"date"),o()()}if(n&2){let m=i.$implicit;d(2),E(m==null?null:m.roster_name),d(2),E(nt(5,3,m==null?null:m.start_date)),d(3),E(nt(8,5,m==null?null:m.end_date))}}function Kt(n,i){if(n&1&&(s(0,"tr")(1,"td",19),c(2,"app-table-loader",20),o()()),n&2){let m=C();d(2),f("isLoading",m.isFetchingListData)("isNoData",m.isDataAvailable)}}var at=(()=>{let i=class i{constructor(t,e){this.router=t,this.rosterService=e,this.isFetchingListData=!1,this.isDataAvailable=!0,this.filterQuery="",this.pagination={currentPage:0,totalPages:0,totalItems:0},this.sorting={currentField:"created_at",currentDirection:"-"},this.rosterListData=[]}ngAfterViewInit(){this.getAllHotelRoster()}getAllHotelRoster(){this.isFetchingListData=!0,this.rosterService.getAllHotelRoster().subscribe({next:t=>{console.log(t),this.rosterListData=t.results,this.pagination.currentPage=t.current_page,this.pagination.totalPages=t.total_pages,this.pagination.totalItems=t.count,this.pagination.totalItems==0&&(this.isDataAvailable=!1)},error:t=>{console.log(t)},complete:()=>{this.isFetchingListData=!1}})}pageSelected(){this.getAllHotelRoster()}columnSorted(t){console.log(t),this.sorting.currentField=t.field,this.sorting.currentDirection=t.direction,this.getAllHotelRoster()}tableFiltered(t){this.filterQuery=t,this.getAllHotelRoster()}gotoRoster(t){localStorage.setItem("hotel_roster_id",t),this.router.navigateByUrl("/home/staff/roster/edit-view-roster/"+t)}};i.\u0275fac=function(e){return new(e||i)(S(T),S(D))},i.\u0275cmp=v({type:i,selectors:[["app-all-roster"]],viewQuery:function(e,r){if(e&1&&b(Ht,5,it),e&2){let a;_(a=y())&&(r.createRoster=a.first)}},decls:27,vars:23,consts:[["createRosterComponentReference",""],[3,"pageTitle","navItems"],[1,"row"],[1,"col-md-8"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"d-inline-block","w-100","mb-3"],[1,"btn","btn-primary","btn-sm","mb-3","grid-add-btn",3,"click"],[3,"tableFiltered","placeholder"],[1,"table-responsive"],[1,"table","table-sm","table-hover","table-bordered"],["width","50%"],[3,"columnSorted","columnTitle","thisField","currentField","currentDirection"],["width","25%"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"pageSelected","totalItems","currentPage"],[3,"click"],["colspan","3"],[3,"isLoading","isNoData"]],template:function(e,r){if(e&1){let a=F();c(0,"app-topnav",1),s(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h5",6),l(6,"All Rosters"),o(),s(7,"div",7)(8,"button",8),u("click",function(){return p(a),h(r.createRoster.openModal())}),l(9,"Add New Roster"),o(),s(10,"app-table-filtering",9),u("tableFiltered",function(R){return p(a),h(r.tableFiltered(R))}),o()(),s(11,"div",10)(12,"table",11)(13,"thead")(14,"tr")(15,"th",12)(16,"app-table-sorting",13),u("columnSorted",function(R){return p(a),h(r.columnSorted(R))}),o()(),s(17,"th",14)(18,"app-table-sorting",13),u("columnSorted",function(R){return p(a),h(r.columnSorted(R))}),o()(),s(19,"th",14)(20,"app-table-sorting",13),u("columnSorted",function(R){return p(a),h(r.columnSorted(R))}),o()()()(),s(21,"tbody"),O(22,Jt,9,7,"tr",15)(23,Kt,3,2,"tr",16),o()()(),s(24,"app-table-pagination",17),u("pageSelected",function(){return p(a),h(r.pageSelected())}),o()()()()(),c(25,"app-create-roster",null,0)}e&2&&(f("pageTitle","Roster")("navItems",pt(21,zt,L(20,Gt))),d(10),f("placeholder","search roster"),d(6),f("columnTitle","Roster Namre")("thisField","roster_name")("currentField",r.sorting.currentField)("currentDirection",r.sorting.currentDirection),d(2),f("columnTitle","Start Date")("thisField","start_date")("currentField",r.sorting.currentField)("currentDirection",r.sorting.currentDirection),d(2),f("columnTitle","End Date")("thisField","end_date")("currentField",r.sorting.currentField)("currentDirection",r.sorting.currentDirection),d(2),f("ngForOf",r.rosterListData),d(),f("ngIf",r.isFetchingListData||!r.isDataAvailable),d(),f("totalItems",r.pagination.totalItems)("currentPage",r.pagination.currentPage)("totalItems",r.pagination.totalItems))},dependencies:[q,H,tt,Rt,Dt,wt,Z,it,G]});let n=i;return n})();var k=(()=>{let i=class i{constructor(){this.shiftForm=new Q({})}ngOnInit(){this.initShiftForm()}initShiftForm(){this.shiftForm=new Q({shiftName:new x(""),shiftSymbol:new x(""),startTime:new x,endTime:new x})}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=v({type:i,selectors:[["app-shift-form"]],decls:25,vars:1,consts:[[1,"module-form-control",3,"formGroup"],[1,"row","mb-1"],[1,"col-md-4"],["for","shiftName",1,"float-md-end","float-sm-start","col-form-label"],[1,"col-md-8"],["formControlName","shiftName","type","text","id","shiftName",1,"form-control","form-control-sm"],["for","shiftSymbol",1,"float-md-end","float-sm-start","col-form-label"],["formControlName","shiftSymbol","type","text","maxlength","3","id","shiftSymbol",1,"form-control","form-control-sm"],["for","startTime",1,"float-md-end","float-sm-start","col-form-label"],["formControlName","startTime","type","time","id","startTime",1,"form-control","form-control-sm"],["for","endTime",1,"float-md-end","float-sm-start","col-form-label"],["formControlName","endTime","type","time","id","endTime",1,"form-control","form-control-sm"]],template:function(e,r){e&1&&(s(0,"form",0)(1,"div",1)(2,"div",2)(3,"label",3),l(4,"Shift Name"),o()(),s(5,"div",4),c(6,"input",5),o()(),s(7,"div",1)(8,"div",2)(9,"label",6),l(10,"Shift Symbol"),o()(),s(11,"div",4),c(12,"input",7),o()(),s(13,"div",1)(14,"div",2)(15,"label",8),l(16,"Start Time"),o()(),s(17,"div",4),c(18,"input",9),o()(),s(19,"div",1)(20,"div",2)(21,"label",10),l(22,"End Time"),o()(),s(23,"div",4),c(24,"input",11),o()()()),e&2&&f("formGroup",r.shiftForm)},dependencies:[W,z,J,K,yt,X,Y]});let n=i;return n})();var Wt=["shiftFormComponentReference"],Xt=["addShiftButtonElementReference"],Yt=["dismissShiftButtonElementReference"],rt=(()=>{let i=class i{constructor(t){this.rosterService=t,this.shiftCreated=new $,this.isSavingData=!1}createShift(){this.isSavingData=!0;let t=this.getShiftData();this.rosterService.createShift(t).subscribe({next:e=>{console.log(e),this.closeModal(),this.clearShiftData(),this.shiftCreated.emit()},error:e=>{console.log(e)},complete:()=>{this.isSavingData=!1}})}openModal(){this.addButton.nativeElement.click()}closeModal(){this.dismissButton.nativeElement.click()}getShiftData(){return{roster:localStorage.getItem("hotel_roster_id"),shift_name:this.shfitForm.shiftForm.controls.shiftName.value,shift_symbol:this.shfitForm.shiftForm.controls.shiftSymbol.value,start_time:this.shfitForm.shiftForm.controls.startTime.value,end_time:this.shfitForm.shiftForm.controls.endTime.value}}clearShiftData(){this.shfitForm.shiftForm.controls.shiftName.setValue(""),this.shfitForm.shiftForm.controls.shiftSymbol.setValue(""),this.shfitForm.shiftForm.controls.startTime.setValue(null),this.shfitForm.shiftForm.controls.endTime.setValue(null)}};i.\u0275fac=function(e){return new(e||i)(S(D))},i.\u0275cmp=v({type:i,selectors:[["app-create-shift"]],viewQuery:function(e,r){if(e&1&&(b(Wt,5,k),b(Xt,5,V),b(Yt,5,V)),e&2){let a;_(a=y())&&(r.shfitForm=a.first),_(a=y())&&(r.addButton=a.first),_(a=y())&&(r.dismissButton=a.first)}},outputs:{shiftCreated:"shiftCreated"},decls:19,vars:1,consts:[["addShiftButtonElementReference",""],["dismissShiftButtonElementReference",""],["shiftFormComponentReference",""],["hidden","true","data-bs-toggle","modal","data-bs-target","#addShiftModal"],["id","addShiftModal","tabindex","-1","aria-labelledby","addShiftLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","addShiftLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-warning","form-control-btn"],["type","button",1,"btn","btn-sm","btn-success","form-control-btn",3,"click","disabled"]],template:function(e,r){if(e&1){let a=F();s(0,"button",3,0),l(2,` Launch demo modal
`),o(),s(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7)(7,"h5",8),l(8,"Add Shift"),o(),c(9,"button",9,1),o(),s(11,"div",10),c(12,"app-shift-form",null,2),o(),s(14,"div",11)(15,"button",12),l(16,"Cancel"),o(),s(17,"button",13),u("click",function(){return p(a),h(r.createShift())}),l(18,"Save"),o()()()()()}e&2&&(d(17),f("disabled",r.isSavingData))},dependencies:[k]});let n=i;return n})();var te=["shiftFormComponentReference"],ee=["editShiftButtonElementReference"],ie=["dismissShiftButtonElementReference"],ot=(()=>{let i=class i{constructor(t){this.rosterService=t,this.shiftUpdated=new $,this.shiftDeleted=new $,this.isFetchingData=!1,this.isSavingData=!1,this.isDeletingData=!1}getShift(){this.isFetchingData=!0,this.rosterService.getShift(this.shiftId).subscribe({next:t=>{this.setShiftData(t)},error:t=>{console.log(t)},complete:()=>{this.isSavingData=!1}})}updateShift(){this.isSavingData=!0;let t=this.getShiftData();this.rosterService.updateShift(this.shiftId,t).subscribe({next:e=>{console.log(e),this.closeModal(),this.shiftUpdated.emit()},error:e=>{console.log(e)},complete:()=>{this.isSavingData=!1}})}deleteShift(){this.isDeletingData=!0,this.rosterService.deleteShift(this.shiftId).subscribe({next:t=>{console.log(t),this.closeModal(),this.shiftUpdated.emit()},error:t=>{console.log(t)},complete:()=>{this.isSavingData=!1}})}openModal(t){this.shiftId=t,this.editButton.nativeElement.click(),this.getShift()}closeModal(){this.dismissButton.nativeElement.click()}getShiftData(){return{roster:localStorage.getItem("hotel_roster_id"),shift_name:this.shfitForm.shiftForm.controls.shiftName.value,shift_symbol:this.shfitForm.shiftForm.controls.shiftSymbol.value,start_time:this.shfitForm.shiftForm.controls.startTime.value,end_time:this.shfitForm.shiftForm.controls.endTime.value}}setShiftData(t){this.shfitForm.shiftForm.controls.shiftName.setValue(t.shift_name),this.shfitForm.shiftForm.controls.shiftSymbol.setValue(t.shift_symbol),this.shfitForm.shiftForm.controls.startTime.setValue(t.start_time),this.shfitForm.shiftForm.controls.endTime.setValue(t.end_time)}};i.\u0275fac=function(e){return new(e||i)(S(D))},i.\u0275cmp=v({type:i,selectors:[["app-edit-view-shift"]],viewQuery:function(e,r){if(e&1&&(b(te,5,k),b(ee,5,V),b(ie,5,V)),e&2){let a;_(a=y())&&(r.shfitForm=a.first),_(a=y())&&(r.editButton=a.first),_(a=y())&&(r.dismissButton=a.first)}},outputs:{shiftUpdated:"shiftUpdated",shiftDeleted:"shiftDeleted"},decls:21,vars:2,consts:[["editShiftButtonElementReference",""],["dismissShiftButtonElementReference",""],["shiftFormComponentReference",""],["hidden","true","data-bs-toggle","modal","data-bs-target","#editShiftModal"],["id","editShiftModal","tabindex","-1","aria-labelledby","editShiftLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","editShiftLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-sm","btn-danger","form-control-btn",3,"click","disabled"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-warning","form-control-btn"],["type","button",1,"btn","btn-sm","btn-success","form-control-btn",3,"click","disabled"]],template:function(e,r){if(e&1){let a=F();s(0,"button",3,0),l(2,` Launch demo modal
`),o(),s(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7)(7,"h5",8),l(8,"Edit Shift"),o(),c(9,"button",9,1),o(),s(11,"div",10),c(12,"app-shift-form",null,2),o(),s(14,"div",11)(15,"button",12),u("click",function(){return p(a),h(r.deleteShift())}),l(16,"Delete"),o(),s(17,"button",13),l(18,"Cancel"),o(),s(19,"button",14),u("click",function(){return p(a),h(r.updateShift())}),l(20,"Save"),o()()()()()}e&2&&(d(15),f("disabled",r.isDeletingData),d(4),f("disabled",r.isSavingData))},dependencies:[k]});let n=i;return n})();var oe=["createShiftComponentReference"],ne=["editViewShiftComponentReference"];function se(n,i){if(n&1){let m=F();s(0,"tr")(1,"td"),l(2),o(),s(3,"td"),l(4),o(),s(5,"td"),l(6),o(),s(7,"td"),l(8),o(),s(9,"td",19)(10,"button",20),u("click",function(){let e=p(m).$implicit,r=C();return h(r.editViewShift.openModal(e.id))}),c(11,"i",21),o()()()}if(n&2){let m=i.$implicit;d(2),E(m==null?null:m.shift_name),d(2),E(m==null?null:m.shift_symbol),d(2),E(m==null?null:m.start_time),d(2),E(m==null?null:m.end_time)}}function ae(n,i){if(n&1&&(s(0,"tr")(1,"td",22),c(2,"app-table-loader",23),o()()),n&2){let m=C();d(2),f("isLoading",m.isFetchingListData)("isNoData",m.isDataAvailable)}}var Bt=(()=>{let i=class i{constructor(t,e){this.router=t,this.rosterService=e,this.isFetchingListData=!1,this.isDataAvailable=!0,this.shiftListData=[]}ngAfterViewInit(){this.getAllRosterShift()}getAllRosterShift(){this.isFetchingListData=!0,this.rosterService.getAllRosterShift().subscribe({next:t=>{console.log(t),this.shiftListData=t,t.length==0&&(this.isDataAvailable=!1)},error:t=>{console.log(t)},complete:()=>{this.isFetchingListData=!1}})}};i.\u0275fac=function(e){return new(e||i)(S(T),S(D))},i.\u0275cmp=v({type:i,selectors:[["app-shifts"]],viewQuery:function(e,r){if(e&1&&(b(oe,5,rt),b(ne,5,ot)),e&2){let a;_(a=y())&&(r.createShift=a.first),_(a=y())&&(r.editViewShift=a.first)}},decls:28,vars:2,consts:[["createShiftComponentReference",""],["editViewShiftComponentReference",""],[1,"row"],[1,"col"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"table-responsive"],[1,"table","table-sm","border-top"],["width","35%"],["width","15%"],["width","20%"],["width","10%",1,"p-0"],[1,"btn","btn-outline-primary","border","btn-sm","w-100","grid-control-btn",3,"click"],[1,"bi","bi-plus"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"shiftCreated"],[3,"shiftUpdated","shiftDeleted"],[1,"p-0"],[1,"btn","btn-sm","btn-outline-success","border","w-100","grid-control-btn",3,"click"],[1,"bi","bi-pen"],["colspan","5"],[3,"isLoading","isNoData"]],template:function(e,r){if(e&1){let a=F();s(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h5",6),l(5,"Roster Shfits"),o(),s(6,"div",7)(7,"table",8)(8,"thead")(9,"tr")(10,"th",9),l(11,"Shift Name"),o(),s(12,"th",10),l(13,"Shift Symbol"),o(),s(14,"th",11),l(15,"Start Time"),o(),s(16,"th",11),l(17,"End Time"),o(),s(18,"th",12)(19,"button",13),u("click",function(){return p(a),h(r.createShift.openModal())}),c(20,"i",14),o()()()(),s(21,"tbody"),O(22,se,12,4,"tr",15)(23,ae,3,2,"tr",16),o()()()()()()(),s(24,"app-create-shift",17,0),u("shiftCreated",function(){return p(a),h(r.getAllRosterShift())}),o(),s(26,"app-edit-view-shift",18,1),u("shiftUpdated",function(){return p(a),h(r.getAllRosterShift())})("shiftDeleted",function(){return p(a),h(r.getAllRosterShift())}),o()}e&2&&(d(22),f("ngForOf",r.shiftListData),d(),f("ngIf",r.isFetchingListData||!r.isDataAvailable))},dependencies:[q,H,Z,rt,ot]});let n=i;return n})();function me(n,i){if(n&1&&(s(0,"th",6),l(1),U(2,"date"),o()),n&2){let m=i.$implicit,t=C();dt("colspan",t.shiftData.length),d(),ct(" ",ut(2,2,m,"shortDate")," ")}}function de(n,i){if(n&1&&(s(0,"th",7),l(1),o()),n&2){let m=i.$implicit;d(),E(m.shift_symbol)}}function ce(n,i){if(n&1&&B(0,de,2,1,"th",7,A),n&2){let m=C();N(m.shiftData)}}function fe(n,i){if(n&1){let m=F();s(0,"td",9)(1,"input",10),u("change",function(e){let r=p(m).$implicit,a=C().$implicit,g=C().$implicit,R=C();return h(R.entryChanged(e,g.id,r.id,a))}),o()()}if(n&2){let m=i.$implicit,t=C().$implicit,e=C().$implicit,r=C();d(),f("checked",r.isChecked(e.id,m.id,t))}}function pe(n,i){if(n&1&&B(0,fe,2,1,"td",9,A),n&2){let m=C(2);N(m.shiftData)}}function he(n,i){if(n&1&&(s(0,"tr")(1,"td",8),l(2),o(),B(3,pe,2,0,null,null,A),o()),n&2){let m=i.$implicit,t=C();d(2),ft("",m.first_name," ",m.last_name,""),d(),N(t.dates)}}var Nt=(()=>{let i=class i{constructor(t,e){this.rosterService=t,this.staffService=e,this.shiftData=[],this.staffData=[],this.entryData=[],this.dates=[]}ngAfterViewInit(){this.getRoster(),this.getAllRosterShift(),this.getAllHotelStaff(),this.getAllRosterEntry()}getRoster(){this.rosterService.getRoster().subscribe({next:t=>{this.rosterData=t,this.setRosterDates(t.start_date,t.end_date)},error:t=>{console.log(t)}})}getAllRosterShift(){this.rosterService.getAllRosterShift().subscribe({next:t=>{this.shiftData=t},error:t=>{console.log(t)}})}getAllHotelStaff(){this.staffService.getAllHotelStaff().subscribe({next:t=>{this.staffData=t.results},error:t=>{console.log(t)}})}getAllRosterEntry(){this.rosterService.getAllRosterEntry().subscribe({next:t=>{this.entryData=t},error:t=>{console.log(t)}})}createRosterEntry(t){this.rosterService.createRosterEntry(t).subscribe({next:e=>{this.entryData=e},error:e=>{console.log(e)}})}updateRosterEntry(t,e){this.rosterService.updateRosterEntry(t,e).subscribe({next:r=>{this.entryData=r},error:r=>{console.log(r)}})}setRosterDates(t,e){let r=[],a=new Date(t),g=new Date(e);for(;a<=g;)r.push(new Date(a)),a.setDate(a.getDate()+1);this.dates=r}isChecked(t,e,r){this.entryData.forEach(a=>t==a.staff.id&&e==a.shift.id&&r==a.date?a.entry:!1)}entryChanged(t,e,r,a){let g={roster:localStorage.getItem("restaurant_roster_id"),staff:e,shift:r,date:a,entry:t.target.checked};this.entryData.forEach(R=>{e==R.staff.id&&r==R.shift.id&&a==R.date?this.updateRosterEntry(R.id,g):this.createRosterEntry(g)})}};i.\u0275fac=function(e){return new(e||i)(S(D),S(Vt))},i.\u0275cmp=v({type:i,selectors:[["app-full-roster-sheet"]],decls:18,vars:0,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],[1,"table-responsive"],[1,"table","table-hover","table-bordered","table-sm"],["rowspan","2",1,"staff-col"],[1,"text-center","date-col"],[1,"shift-col"],[1,"bold","bg-light"],[1,"text-center"],["type","checkbox",1,"form-check-input",3,"change","checked"]],template:function(e,r){e&1&&(s(0,"div",0)(1,"div",1)(2,"h5",2),l(3,"Full Roster Sheet"),o(),s(4,"div",3)(5,"table",4)(6,"thead")(7,"tr")(8,"th",5),l(9,"Staff"),o(),B(10,me,3,5,"th",6,A),o(),s(12,"tr"),B(13,ce,2,0,null,null,A),o()(),s(15,"tbody"),B(16,he,5,2,"tr",null,A),o()()()()()),e&2&&(d(10),N(r.dates),d(3),N(r.dates),d(3),N(r.staffData))},dependencies:[G],styles:[".staff-col[_ngcontent-%COMP%]{min-width:200px}.date-col[_ngcontent-%COMP%]{min-width:90px}.shift-col[_ngcontent-%COMP%]{max-width:45px}"]});let n=i;return n})();var ge=["rosterFormComponentElementReference"],ve=()=>({name:"All Rosters",link:"#/home/staff/roster/all-roster"}),Se=()=>({name:"View / Edit Roster",link:"#/home/staff/roster/edit-view-roster/2"}),be=(n,i)=>[n,i],Mt=(()=>{let i=class i{constructor(t,e){this.router=t,this.rosterService=e,this.isFetchingData=!1,this.isSavingData=!1,this.isDeletingData=!1}ngAfterViewInit(){this.getRoster()}getRoster(){this.isFetchingData=!0,this.rosterService.getRoster().subscribe({next:t=>{console.log(t),this.setRosterData(t)},error:t=>{console.log(t)},complete:()=>{this.isFetchingData=!1}})}updateRoster(){this.isSavingData=!0;let t=this.getRosterData();this.rosterService.updateRoster(t).subscribe({next:e=>{console.log(e)},error:e=>{console.log(e)},complete:()=>{this.isSavingData=!1}})}deleteRoster(){this.isDeletingData=!0,this.rosterService.deleteRoster().subscribe({next:t=>{console.log(t),this.router.navigateByUrl("/home/staff/roster/all-roster")},error:t=>{console.log(t)},complete:()=>{this.isDeletingData=!1}})}getRosterData(){return{hotel:localStorage.getItem("hotel_id"),roster_name:this.rosterForm.rosterForm.controls.rosterName.value,start_date:this.rosterForm.rosterForm.controls.startDate.value,end_date:this.rosterForm.rosterForm.controls.endDate.value,notes:this.rosterForm.rosterForm.controls.notes.value}}setRosterData(t){this.rosterForm.rosterForm.controls.rosterName.setValue(t.roster_name),this.rosterForm.rosterForm.controls.startDate.setValue(t.start_date),this.rosterForm.rosterForm.controls.endDate.setValue(t.end_date),this.rosterForm.rosterForm.controls.notes.setValue(t.notes)}};i.\u0275fac=function(e){return new(e||i)(S(T),S(D))},i.\u0275cmp=v({type:i,selectors:[["app-edit-view-roster"]],viewQuery:function(e,r){if(e&1&&b(ge,5,I),e&2){let a;_(a=y())&&(r.rosterForm=a.first)}},decls:22,vars:9,consts:[["rosterFormComponentElementReference",""],[3,"pageTitle","navItems"],[1,"row"],[1,"col-md-6"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"row","mt-3"],[1,"col"],["type","submit",1,"btn","btn-sm","btn-success","float-end","ms-2","form-control-btn",3,"click","disabled"],["type","reset","routerLink","/home/staff/roster/all-roster",1,"btn","btn-sm","btn-warning","float-end","ms-2","form-control-btn"],["type","reset",1,"btn","btn-sm","btn-danger","float-end","ms-2","form-control-btn",3,"click","disabled"]],template:function(e,r){if(e&1){let a=F();c(0,"app-topnav",1),s(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h5",6),l(6,"View / Edit Roster"),o(),c(7,"app-roster-form",null,0),s(9,"div",7)(10,"div",8)(11,"button",9),u("click",function(){return p(a),h(r.updateRoster())}),l(12," Save "),o(),s(13,"button",10),l(14," Cancel "),o(),s(15,"button",11),u("click",function(){return p(a),h(r.deleteRoster())}),l(16," Delete "),o()()()()()(),s(17,"div",3),c(18,"app-shifts"),o()(),s(19,"div",2)(20,"div",8),c(21,"app-full-roster-sheet"),o()()}e&2&&(f("pageTitle","Roster")("navItems",ht(6,be,L(4,ve),L(5,Se))),d(11),f("disabled",r.isFetchingData||r.isSavingData),d(4),f("disabled",r.isFetchingData||r.isDeletingData))},dependencies:[bt,tt,Bt,Nt,I]});let n=i;return n})();var _e=[{path:"",component:Tt,children:[{path:"",component:at},{path:"all-roster",component:at},{path:"edit-view-roster/:id",component:Mt}]}],Qt=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=P({type:i}),i.\u0275inj=j({imports:[st.forChild(_e),st]});let n=i;return n})();var wi=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=P({type:i}),i.\u0275inj=j({imports:[gt,Ct,Ft,Qt,xt,Et]});let n=i;return n})();export{wi as RosterModule};
