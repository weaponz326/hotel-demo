import{a as M}from"./chunk-HSAPCYZP.js";import{a as C,b as S,c as F,d as Ae}from"./chunk-UEPNQQPW.js";import{a as N}from"./chunk-JRFFUKYU.js";import{a as re,b as ae,c as se,d as le,e as Le}from"./chunk-3OLZPOF4.js";import{b as J,c as K,d as X,e as Z,f as ee,j as te,k as Fe,l as ie,m as ne,n as De,o as Ve,p as Re,t as oe,u as Qe,v as Me}from"./chunk-RQYECNT5.js";import{b as me,c as Be}from"./chunk-IMD2KKFX.js";import{A as P,C as ke,F as T,G as j,Ha as W,Ia as G,K as h,L as y,La as _e,Na as Te,Q as I,R,V as m,W as b,Za as Y,_a as z,a as O,aa as H,b as $,bb as Ce,ca as c,cb as Se,da as x,fb as we,ja as r,ka as o,la as d,lb as Ie,ma as w,mb as E,na as p,oa as A,qb as fe,rb as Ee,ta as u,ua as f,va as v,xa as l,ya as Q,z as be}from"./chunk-TK5UYZ3D.js";var Ne=(()=>{let a=class a{};a.\u0275fac=function(i){return new(i||a)},a.\u0275cmp=T({type:a,selectors:[["app-housekeeping"]],decls:1,vars:0,template:function(i,t){i&1&&d(0,"router-outlet")},dependencies:[Ie]});let s=a;return s})();var D=(()=>{let a=class a{constructor(e){this.http=e,this.apiBaseUrl=Ee.apiBaseUrl}getAllHotelTasks(){return this.http.get(`${this.apiBaseUrl}/hotel/infrastructure/housekeeping/tasks?hotel=${localStorage.getItem("hotel_id")}`)}getHotelTaskById(e){return this.http.get(`${this.apiBaseUrl}/hotel/infrastructure/housekeeping/tasks/${localStorage.getItem("hotel_task_id")}`)}updateHotelTaskById(e,i){return this.http.put(`${this.apiBaseUrl}/hotel/infrastructure/housekeeping/tasks/${localStorage.getItem("hotel_task_id")}`,i)}deleteHotelTaskById(e){return this.http.delete(`${this.apiBaseUrl}/hotel/infrastructure/housekeeping/tasks/${localStorage.getItem("hotel_task_id")}
      )}`)}createHotelTask(e){return this.http.post(`${this.apiBaseUrl}/hotel/infrastructure/housekeeping/tasks/`,e)}getAllInventories(){return this.http.get(`${this.apiBaseUrl}/hotel/infrastructure/housekeeping/inventories?hotel=${localStorage.getItem("hotel_id")}`)}getInventoryById(e){return this.http.get(`${this.apiBaseUrl}/hotel/infrastructure/housekeeping/inventories/${localStorage.getItem("hotel_inventory_id")}`)}updateInventoryById(e,i){return this.http.put(`${this.apiBaseUrl}/hotel/infrastructure/housekeeping/inventories/${localStorage.getItem("hotel_inventory_id")}`,i)}deleteInventoryById(e){return this.http.delete(`${this.apiBaseUrl}/hotel/infrastructure/housekeeping/inventories/${localStorage.getItem("hotel_inventory_id")}
      )}`)}createInventory(e){return this.http.post(`${this.apiBaseUrl}/hotel/infrastructure/housekeeping/inventories/`,e)}};a.\u0275fac=function(i){return new(i||a)(ke(we))},a.\u0275prov=be({token:a,factory:a.\u0275fac,providedIn:"root"});let s=a;return s})();var L=(()=>{let a=class a{constructor(e){this.formBuilder=e,this.openStaffWindow=new R,this.taskForm=new ee({}),this.isDisabled=!1,this.isSubmitted=!1}ngOnInit(){this.initializeFormData()}initializeFormData(){this.taskForm=this.formBuilder.group({id:[{value:"",disabled:!0}],created_at:[{value:"",disabled:!0}],updated_at:[{value:"",disabled:!0}],deleted_at:[{value:"",disabled:!0}],hotel:[{value:"",disabled:!0}],task_name:["",{valditors:K.required}],description:[""],assigned_to:[{value:"",disabled:!0}],due_date:[""],priority:[""],status:[""],location:[""]})}};a.\u0275fac=function(i){return new(i||a)(b(oe))},a.\u0275cmp=T({type:a,selectors:[["app-task-form"]],outputs:{openStaffWindow:"openStaffWindow"},decls:54,vars:3,consts:[[1,"module-form-control","form-control-sm",3,"formGroup"],[1,"row","mb-1"],[1,"col-md-4"],["for","task_name",1,"float-md-end","float-sm-start","col-form-label"],[1,"col-md-8"],["type","text","name","task_name","id","task_name","formControlName","task_name",1,"form-control","form-control-sm"],[1,"row","mb-2"],["for","description",1,"float-md-end","float-sm-start","col-form-label"],["name","description","id","description","rows","3","formControlName","description",1,"form-control","form-control-sm"],["for","assigned_to",1,"float-md-end","float-sm-start","col-form-label"],[1,"input-group","w-100"],["type","text","name","assigned_to","id","assigned_to","formControlName","assigned_to",1,"form-control","form-control-sm"],["title","Select Staff","type","button",1,"btn","btn-secondary",3,"click"],[1,"bi","bi-window"],["for","due_date",1,"float-md-end","float-sm-start","col-form-label"],["type","date","name","due_date","id","due_date","formControlName","due_date",1,"form-control","form-control-sm"],["for","priority",1,"float-md-end","float-sm-start","col-form-label"],["name","priority","id","priority","formControlName","priority",1,"form-control","form-control-sm"],["value","","disabled",""],["value","low"],["value","medium"],["value","high"],["for","status",1,"float-md-end","float-sm-start","col-form-label"],["type","text","name","status","id","status","formControlName","status",1,"form-control","form-control-sm"],["for","location",1,"float-md-end","float-sm-start","col-form-label"],["type","text","name","location","id","location","formControlName","location",1,"form-control","form-control-sm"]],template:function(i,t){i&1&&(r(0,"form",0)(1,"div",1)(2,"div",2)(3,"label",3),l(4,"Task Name"),o()(),r(5,"div",4),d(6,"input",5),o()(),r(7,"div",6)(8,"div",2)(9,"label",7),l(10,"Description"),o()(),r(11,"div",4),d(12,"textarea",8),o()(),r(13,"div",1)(14,"div",2)(15,"label",9),l(16,"Staff Assigned To"),o()(),r(17,"div",4)(18,"div",10),d(19,"input",11),r(20,"button",12),p("click",function(){return t.openStaffWindow.emit()}),d(21,"i",13),o()()()(),r(22,"div",1)(23,"div",2)(24,"label",14),l(25,"Due Date"),o()(),r(26,"div",4),d(27,"input",15),o()(),r(28,"div",1)(29,"div",2)(30,"label",16),l(31,"Priority"),o()(),r(32,"div",4)(33,"select",17)(34,"option",18),l(35,"Select priority"),o(),r(36,"option",19),l(37,"Low"),o(),r(38,"option",20),l(39,"Medium"),o(),r(40,"option",21),l(41,"High"),o()()()(),r(42,"div",1)(43,"div",2)(44,"label",22),l(45,"Status"),o()(),r(46,"div",4),d(47,"input",23),o()(),r(48,"div",1)(49,"div",2)(50,"label",24),l(51,"Location"),o()(),r(52,"div",4),d(53,"input",25),o()()()),i&2&&(c("formGroup",t.taskForm),m(6),x("is-invalid",t.taskForm.controls.task_name.invalid&&t.isSubmitted))},dependencies:[te,Ve,Re,J,De,X,Z,ie,ne]});let s=a;return s})();var je=["taskFormComponentReference"],He=["selectStaffForEditComponentReference"],We=["editTaskButtonElementReference"],Ge=["dismissTaskButtonElementReference"],Ye=["successToastComponentReference"],ze=["errorToastComponentReference"],Je=["deleteModalOneComponentReference"],de=(()=>{let a=class a{constructor(e,i){this.router=e,this.taskService=i,this.taskId="",this.onTaskUpdate=new R,this.isLoading=!1}onSave(){this.taskForm.isSubmitted=!0,this.taskForm.taskForm.valid&&this.handleUpdateTask()}onDelete(){this.deleteModal.openModal()}openModal(e){localStorage.setItem("hotel_task_id",e),this.getTask(e),this.newButton.nativeElement.click(),this.taskId=e}closeModal(){this.dismissButton.nativeElement.click()}handleDeleteTask(){this.router.navigate(["/home/infrastructure/housekeeping/tasks"])}getTask(e){this.taskService.getHotelTaskById(e).subscribe({next:i=>{console.log(i),this.setFormData(i)},error:i=>{console.log(i)},complete:()=>{console.log("Complete task fetching action")}})}setFormData(e){this.taskForm.taskForm.patchValue(e)}handleUpdateTask(){this.isLoading=!0;let e=this.taskForm.taskForm.value;this.taskService.updateHotelTaskById(this.taskId,e).subscribe({next:i=>{"Task has been updated successfully";console.log("Task has been updated successfully"),this.onTaskUpdate.emit(),this.isLoading=!1,this.successToast.openToast()},error:i=>{console.log(i),this.isLoading=!1,this.errorToast.openToast()},complete:()=>{console.log("Complete task fetching action"),this.isLoading=!1}})}deleteTask(){this.taskService.deleteHotelTaskById(this.taskId).subscribe({next:e=>{console.log(e)},error:e=>{console.log(`Error deleting task: ${e.message}`),this.errorToast.openToast()},complete:()=>{console.log("Complete task deleting action"),this.onTaskUpdate.emit()}})}openStaffWindow(){console.log("You are opening select staff window"),this.selectStaff.openModal()}onStaffRowSelected(e){this.taskForm.selectedStaffId=e?.id,this.taskForm.taskForm.controls.assigned_to.setValue(e?.first_name+" "+e?.last_name),console.log(e)}};a.\u0275fac=function(i){return new(i||a)(b(E),b(D))},a.\u0275cmp=T({type:a,selectors:[["app-edit-view-task"]],viewQuery:function(i,t){if(i&1&&(u(je,5,L),u(He,5,M),u(We,5,I),u(Ge,5,I),u(Ye,5,C),u(ze,5,S),u(Je,5,F)),i&2){let n;f(n=v())&&(t.taskForm=n.first),f(n=v())&&(t.selectStaff=n.first),f(n=v())&&(t.newButton=n.first),f(n=v())&&(t.dismissButton=n.first),f(n=v())&&(t.successToast=n.first),f(n=v())&&(t.errorToast=n.first),f(n=v())&&(t.deleteModal=n.first)}},outputs:{onTaskUpdate:"onTaskUpdate"},decls:29,vars:2,consts:[["editTaskButtonElementReference",""],["dismissTaskButtonElementReference",""],["taskFormComponentReference",""],["selectStaffForEditComponentReference",""],["errorToastComponentReference",""],["successToastComponentReference",""],["deleteModalOneComponentReference",""],["hidden","true","data-bs-toggle","modal","data-bs-target","#editTaskModal"],["id","editTaskModal","tabindex","-1","aria-labelledby","editTaskLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","editTaskLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"openStaffWindow"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-danger","form-control-btn",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-warning","form-control-btn"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-success","form-control-btn",3,"click","disabled"],[3,"rowSelected","closeTarget"],[3,"confirmEvent"]],template:function(i,t){if(i&1){let n=w();r(0,"button",7,0),l(2,` Launch demo modal
`),o(),r(3,"div",8)(4,"div",9)(5,"div",10)(6,"div",11)(7,"h5",12),l(8,"Edit Task"),o(),d(9,"button",13,1),o(),r(11,"div",14)(12,"app-task-form",15,2),p("openStaffWindow",function(){return h(n),y(t.openStaffWindow())}),o()(),r(14,"div",16)(15,"button",17),p("click",function(){return h(n),y(t.onDelete())}),l(16," Delete "),o(),r(17,"button",18),l(18," Cancel "),o(),r(19,"button",19),p("click",function(){return h(n),y(t.onSave())}),l(20," Save "),o()()()()(),r(21,"app-select-staff",20,3),p("rowSelected",function(_){return h(n),y(t.onStaffRowSelected(_))}),o(),d(23,"app-error-toast",null,4)(25,"app-success-toast",null,5),r(27,"app-delete-modal-one",21,6),p("confirmEvent",function(){return h(n),y(t.handleDeleteTask())}),o()}i&2&&(m(19),c("disabled",t.isLoading),m(2),c("closeTarget","#editTaskLabel"))},dependencies:[M,F,C,S,L]});let s=a;return s})();var Xe=["taskFormComponentReference"],Ze=["selectStaffForAddComponentReference"],et=["newTaskButtonElementReference"],tt=["dismissTaskButtonElementReference"],it=["successToastComponentReference"],nt=["errorToastComponentReference"],ot=["deleteModalOneComponentReference"],ce=(()=>{let a=class a{constructor(e,i){this.router=e,this.tasksService=i,this.onTaskCreation=new R,this.isLoading=!1}onSave(){this.taskForm.isSubmitted=!0,this.taskForm.taskForm.valid&&this.handleCreateTask()}openModal(){this.newButton.nativeElement.click()}closeModal(){this.dismissButton.nativeElement.click()}handleCreateTask(){let e=this.getTaskFormData();this.createTaskTask(e)}getTaskFormData(){return this.taskForm.taskForm.value}createTaskTask(e){this.isLoading=!0;let i=localStorage.getItem("hotel_id"),t=$(O({},e),{hotel:i});console.log(t),this.tasksService.createHotelTask(t).subscribe({next:()=>{"Task has been created successfully";this.onTaskCreation.emit(),this.isLoading=!1,this.successToast.openToast()},error:n=>{`${n}`,this.isLoading=!1,this.errorToast.openToast()},complete:()=>{console.log("Complete task posting action"),this.isLoading=!1}})}openStaffWindow(){console.log("You are opening select menu item window"),this.selectStaff.openModal()}onStaffRowSelected(e){this.taskForm.selectedStaffId=e?.id,this.taskForm.taskForm.controls.assigned_to.setValue(e?.first_name+" "+e?.last_name),console.log(e)}};a.\u0275fac=function(i){return new(i||a)(b(E),b(D))},a.\u0275cmp=T({type:a,selectors:[["app-create-task"]],viewQuery:function(i,t){if(i&1&&(u(Xe,5,L),u(Ze,5,M),u(et,5,I),u(tt,5,I),u(it,5,C),u(nt,5,S),u(ot,5,F)),i&2){let n;f(n=v())&&(t.taskForm=n.first),f(n=v())&&(t.selectStaff=n.first),f(n=v())&&(t.newButton=n.first),f(n=v())&&(t.dismissButton=n.first),f(n=v())&&(t.successToast=n.first),f(n=v())&&(t.errorToast=n.first),f(n=v())&&(t.deleteModal=n.first)}},outputs:{onTaskCreation:"onTaskCreation"},decls:25,vars:2,consts:[["newTaskButtonElementReference",""],["dismissTaskButtonElementReference",""],["taskFormComponentReference",""],["selectStaffForAddComponentReference",""],["errorToastComponentReference",""],["successToastComponentReference",""],["hidden","true","data-bs-toggle","modal","data-bs-target","#newTaskModal"],["id","newTaskModal","tabindex","-1","aria-labelledby","newTaskLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","newTaskLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"openStaffWindow"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-warning","form-control-btn"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-success","form-control-btn",3,"click","disabled"],[3,"rowSelected","closeTarget"]],template:function(i,t){if(i&1){let n=w();r(0,"button",6,0),l(2,` Launch demo modal
`),o(),r(3,"div",7)(4,"div",8)(5,"div",9)(6,"div",10)(7,"h5",11),l(8,"Add Task"),o(),d(9,"button",12,1),o(),r(11,"div",13)(12,"app-task-form",14,2),p("openStaffWindow",function(){return h(n),y(t.openStaffWindow())}),o()(),r(14,"div",15)(15,"button",16),l(16," Cancel "),o(),r(17,"button",17),p("click",function(){return h(n),y(t.handleCreateTask())}),l(18," Save "),o()()()()(),r(19,"app-select-staff",18,3),p("rowSelected",function(_){return h(n),y(t.onStaffRowSelected(_))}),o(),d(21,"app-error-toast",null,4)(23,"app-success-toast",null,5)}i&2&&(m(17),c("disabled",t.isLoading),m(2),c("closeTarget","#newTaskModal"))},dependencies:[M,C,S,L]});let s=a;return s})();var ut=["newTaskComponentReference"],ft=["editTaskComponentReference"],vt=()=>({name:"All Tasks",link:"#/home/infrastructure/housekeeping"}),ht=s=>[s];function yt(s,a){if(s&1){let k=w();r(0,"tr",23),p("click",function(){let i=h(k).$implicit,t=A();return y(t.editViewTask.openModal(i.id))}),r(1,"td"),l(2),o(),r(3,"td"),l(4),o(),r(5,"td"),l(6),_e(7,"date"),o(),r(8,"td"),l(9),o()()}if(s&2){let k=a.$implicit;m(2),Q(k.task_name),m(2),Q(k.staff_assigned_to),m(2),Q(Te(7,4,k.due_date,"dd-MM-YYYY")),m(3),Q(k.priority)}}function gt(s,a){if(s&1&&(r(0,"tr")(1,"td",24),d(2,"app-table-loader",25),o()()),s&2){let k=A();m(2),c("isLoading",k.isFetchingListData)("isNoData",k.isDataAvailable)}}var ye=(()=>{let a=class a{constructor(e,i){this.router=e,this.taskService=i,this.tasks=[],this.taskHeaders=["Name","Priority","Location","Staff In-Charge"],this.isFetchingListData=!0,this.isDataAvailable=!0,this.filterQuery="",this.pagination={currentPage:0,totalPages:0,totalItems:0},this.sorting={currentField:"created_at",currentDirection:"-"}}pageSelected(){this.getTasks()}columnSorted(e){console.log(e),this.sorting.currentField=e.field,this.sorting.currentDirection=e.direction,this.getTasks()}tableFiltered(e){this.filterQuery=e,this.getTasks()}ngAfterViewInit(){this.getTasks()}getTasks(){this.taskService.getAllHotelTasks().subscribe({next:e=>{console.log(e.results),this.tasks=e.results,this.pagination.currentPage=e.current_page,this.pagination.totalPages=e.total_pages,this.pagination.totalItems=e.count,this.pagination.totalItems==0?this.isDataAvailable=!1:this.isDataAvailable=!0},error:e=>{console.log(e.message),this.isFetchingListData=!1},complete:()=>{console.log("Request completed"),this.isFetchingListData=!1}})}viewTaskDetails(e){this.router.navigate(["/home/infrastructure/housekeeping/tasks/edit-view-task/",e])}goToCreateTask(){this.router.navigate(["/home/infrastructure/housekeeping/tasks/create-task"])}};a.\u0275fac=function(i){return new(i||a)(b(E),b(D))},a.\u0275cmp=T({type:a,selectors:[["app-all-tasks"]],viewQuery:function(i,t){if(i&1&&(u(ut,5),u(ft,5)),i&2){let n;f(n=v())&&(t.createTask=n.first),f(n=v())&&(t.editViewTask=n.first)}},decls:35,vars:25,consts:[["newTaskComponentReference",""],["editTaskComponentReference",""],[3,"pageTitle","navItems"],[1,"row"],[1,"col-md-9"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"d-inline-block","w-100","mb-3"],[1,"btn","btn-primary","btn-sm","mb-3","grid-add-btn",3,"click"],[3,"placeholder"],[1,"table-responsive"],[1,"table","table-sm","table-hover","table-bordered"],["width","30%"],[3,"columnSorted","columnTitle","thisField","currentField","currentDirection"],["width","20%"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"totalItems"],[1,"col-md-3"],["link","/home/infrastructure/housekeeping/inventories","name","Go to Inventories"],[3,"onTaskCreation"],[3,"onTaskUpdate"],[3,"click"],["colspan","4"],[3,"isLoading","isNoData"]],template:function(i,t){if(i&1){let n=w();d(0,"app-topnav",2),r(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"h5",7),l(6,"Tasks"),o(),r(7,"div",8)(8,"button",9),p("click",function(){return h(n),y(t.createTask.openModal())}),l(9," Add New Task "),o(),d(10,"app-table-filtering",10),o(),r(11,"div",11)(12,"table",12)(13,"thead")(14,"tr")(15,"th",13)(16,"app-table-sorting",14),p("columnSorted",function(_){return h(n),y(t.columnSorted(_))}),o()(),r(17,"th",13)(18,"app-table-sorting",14),p("columnSorted",function(_){return h(n),y(t.columnSorted(_))}),o()(),r(19,"th",15)(20,"app-table-sorting",14),p("columnSorted",function(_){return h(n),y(t.columnSorted(_))}),o()(),r(21,"th",15)(22,"app-table-sorting",14),p("columnSorted",function(_){return h(n),y(t.columnSorted(_))}),o()()()(),r(23,"tbody"),H(24,yt,10,7,"tr",16)(25,gt,3,2,"tr",17),o()()(),d(26,"app-table-pagination",18),o()()(),r(27,"div",19)(28,"div",5)(29,"div",6),d(30,"app-page-link-button",20),o()()(),r(31,"app-create-task",21,0),p("onTaskCreation",function(){return h(n),y(t.getTasks())}),o(),r(33,"app-edit-view-task",22,1),p("onTaskUpdate",function(){return h(n),y(t.getTasks())}),o()()}i&2&&(c("pageTitle","Housekeeping")("navItems",G(23,ht,W(22,vt))),m(10),c("placeholder","Search Tasks"),m(6),c("columnTitle","Task Name")("thisField","task_name")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),m(2),c("columnTitle","Assigned To")("thisField","assigned_to")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),m(2),c("columnTitle","Due Date")("thisField","due_date")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),m(2),c("columnTitle","Priority")("thisField","priority")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),m(2),c("ngForOf",t.tasks),m(),c("ngIf",t.isFetchingListData||!t.isDataAvailable),m(),c("totalItems",t.tasks.length))},dependencies:[Y,z,me,ae,se,le,re,N,de,ce,Ce],styles:[".form-select[_ngcontent-%COMP%]{border:none;outline:none}.card-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]});let s=a;return s})();var B=(()=>{let a=class a{constructor(e){this.formBuilder=e,this.inventoryForm=new ee({}),this.isDisabled=!1,this.isSubmitted=!1}ngOnInit(){this.initializeFormData()}initializeFormData(){this.inventoryForm=this.formBuilder.group({id:[""],restaurant:[""],name:["",{validators:K.required}],inventory:[""],category:[""],quantity:[0],unit:[""],unit_price:[0],expiration_date:[new Date]})}};a.\u0275fac=function(i){return new(i||a)(b(oe))},a.\u0275cmp=T({type:a,selectors:[["app-inventory-form"]],decls:37,vars:5,consts:[[1,"module-form-control",3,"formGroup"],[1,"row","mb-1"],[1,"col-md-4"],["for","name",1,"float-md-end","float-sm-start","col-form-label"],[1,"col-md-8"],["type","text","name","name","id","name","formControlName","name",1,"form-control"],["for","category",1,"float-md-end","float-sm-start","col-form-label"],["type","text","name","category","id","category","formControlName","category",1,"form-control"],["for","quantity",1,"float-md-end","float-sm-start","col-form-label"],["type","number","name","quantity","id","quantity","formControlName","quantity",1,"form-control"],["for","unit",1,"float-md-end","float-sm-start","col-form-label"],["name","unit","type","text","id","unit","formControlName","unit",1,"form-control"],["for","unit_price",1,"float-md-end","float-sm-start","col-form-label"],["type","number","name","unit_price","id","unit_price","formControlName","unit_price",1,"form-control"],["for","expiration_date",1,"float-md-end","float-sm-start","col-form-label"],["type","date","name","expiration_date","id","expiration_date","formControlName","expiration_date",1,"form-control"]],template:function(i,t){i&1&&(r(0,"form",0)(1,"div",1)(2,"div",2)(3,"label",3),l(4,"Name"),o()(),r(5,"div",4),d(6,"input",5),o()(),r(7,"div",1)(8,"div",2)(9,"label",6),l(10,"Category"),o()(),r(11,"div",4),d(12,"input",7),o()(),r(13,"div",1)(14,"div",2)(15,"label",8),l(16,"Quantity"),o()(),r(17,"div",4),d(18,"input",9),o()(),r(19,"div",1)(20,"div",2)(21,"label",10),l(22,"Unit"),o()(),r(23,"div",4),d(24,"input",11),o()(),r(25,"div",1)(26,"div",2)(27,"label",12),l(28,"Unit Price"),o()(),r(29,"div",4),d(30,"input",13),o()(),r(31,"div",1)(32,"div",2)(33,"label",14),l(34,"Expiration Date"),o()(),r(35,"div",4),d(36,"input",15),o()()()),i&2&&(c("formGroup",t.inventoryForm),m(6),x("is-invalid",t.inventoryForm.controls.name.invalid&&t.isSubmitted),m(6),x("is-invalid",t.inventoryForm.controls.category.invalid&&t.isSubmitted))},dependencies:[te,J,Fe,X,Z,ie,ne]});let s=a;return s})();var bt=["newInventoryButtonElementReference"],kt=["dismissInventoryButtonElementReference"],_t=["successToastComponentReference"],Tt=["errorToastComponentReference"],Ct=["deleteModalOneComponentReference"],pe=(()=>{let a=class a{constructor(e,i){this.router=e,this.tasksService=i,this.onInventoryCreation=new R,this.isLoading=!1}onSave(){this.inventoryForm.isSubmitted=!0,this.inventoryForm.inventoryForm.valid&&this.handleCreateInventory()}openModal(){this.newButton.nativeElement.click()}closeModal(){this.dismissButton.nativeElement.click()}handleCreateInventory(){let e=this.getInventoryFormData();this.createInventory(e)}handleCancelForm(){this.closeModal()}getInventoryFormData(){return this.inventoryForm.inventoryForm.value}createInventory(e){this.isLoading=!0;let i=localStorage.getItem("hotel_id"),t=$(O({},e),{hotel:i});console.log(t),this.tasksService.createInventory(t).subscribe({next:()=>{console.log("Inventory has been created successfully"),this.onInventoryCreation.emit(),this.isLoading=!1,this.successToast.openToast()},error:n=>{console.log(`Error creating kitchenStock inventory: ${n}`),this.isLoading=!1},complete:()=>{console.log("Complete kitchenStock inventory creating action"),this.isLoading=!1}})}};a.\u0275fac=function(i){return new(i||a)(b(E),b(D))},a.\u0275cmp=T({type:a,selectors:[["app-create-inventory"]],viewQuery:function(i,t){if(i&1&&(u(B,5),u(bt,5,I),u(kt,5,I),u(_t,5,C),u(Tt,5,S),u(Ct,5,F)),i&2){let n;f(n=v())&&(t.inventoryForm=n.first),f(n=v())&&(t.newButton=n.first),f(n=v())&&(t.dismissButton=n.first),f(n=v())&&(t.successToast=n.first),f(n=v())&&(t.errorToast=n.first),f(n=v())&&(t.deleteModal=n.first)}},outputs:{onInventoryCreation:"onInventoryCreation"},decls:22,vars:1,consts:[["newInventoryButtonElementReference",""],["dismissInventoryButtonElementReference",""],["errorToastComponentReference",""],["successToastComponentReference",""],["hidden","true","data-bs-toggle","modal","data-bs-target","#newInventoryModal"],["id","newInventoryModal","tabindex","-1","aria-labelledby","newInventoryLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","newInventoryLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-warning","form-control-btn"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-success","form-control-btn",3,"click","disabled"]],template:function(i,t){if(i&1){let n=w();r(0,"button",4,0),l(2,` Launch demo modal
`),o(),r(3,"div",5)(4,"div",6)(5,"div",7)(6,"div",8)(7,"h5",9),l(8,"Add Inventory"),o(),d(9,"button",10,1),o(),r(11,"div",11),d(12,"app-inventory-form"),o(),r(13,"div",12)(14,"button",13),l(15," Cancel "),o(),r(16,"button",14),p("click",function(){return h(n),y(t.onSave())}),l(17," Save "),o()()()()(),d(18,"app-error-toast",null,2)(20,"app-success-toast",null,3)}i&2&&(m(16),c("disabled",t.isLoading))},dependencies:[C,S,B]});let s=a;return s})();var wt=["editInventoryButtonElementReference"],It=["dismissInventoryButtonElementReference"],Et=["successToastComponentReference"],Ft=["errorToastComponentReference"],Dt=["deleteModalOneComponentReference"],ue=(()=>{let a=class a{constructor(e,i){this.router=e,this.tasksService=i,this.inventoryId="",this.isLoading=!1,this.onInventoryUpdate=new R}onSave(){this.inventoryForm.isSubmitted=!0,this.inventoryForm.inventoryForm.valid&&this.handleUpdateInventory()}onDelete(){this.deleteModal.openModal()}openModal(e){this.getInventory(e),this.newButton.nativeElement.click(),this.inventoryId=e}closeModal(){this.dismissButton.nativeElement.click()}handleCancelForm(){this.router.navigate(["/home/infrastructure/housekeeping/inventories"])}handleDeleteInventory(){this.router.navigate(["/home/infrastructure/housekeeping/inventories"])}getInventory(e){this.tasksService.getInventoryById(e).subscribe({next:i=>{console.log("Inventory has been fetched successfully"),this.inventoryForm.inventoryForm.setValue(i)},error:i=>{console.log(`Error fetching inventory: ${i.message}`)},complete:()=>{console.log("Complete inventory fetching action")}})}handleUpdateInventory(){this.isLoading=!0;let e=this.inventoryForm.inventoryForm.value;this.tasksService.updateInventoryById(this.inventoryId,e).subscribe({next:i=>{console.log("Inventory has been updated successfully"),this.onInventoryUpdate.emit(),this.isLoading=!1,this.successToast.openToast()},error:i=>{console.log(`Error fetching inventory: ${i.message}`),this.isLoading=!1,this.errorToast.openToast()},complete:()=>{console.log("Complete inventory fetching action"),this.isLoading=!1}})}deleteInventory(){this.isLoading=!0,this.tasksService.deleteInventoryById(this.inventoryId).subscribe({next:e=>{console.log("Inventory has been deleted successfully"),console.log("Inventory has been deleted successfully"),this.isLoading=!1,this.successToast.openToast()},error:e=>{console.log(`Error deleting inventory: ${e.message}`),this.isLoading=!1,this.errorToast.openToast()},complete:()=>{console.log("Complete inventory deleting action"),this.onInventoryUpdate.emit(),this.isLoading=!1}})}};a.\u0275fac=function(i){return new(i||a)(b(E),b(D))},a.\u0275cmp=T({type:a,selectors:[["app-edit-view-inventory"]],viewQuery:function(i,t){if(i&1&&(u(B,5),u(wt,5,I),u(It,5,I),u(Et,5,C),u(Ft,5,S),u(Dt,5,F)),i&2){let n;f(n=v())&&(t.inventoryForm=n.first),f(n=v())&&(t.newButton=n.first),f(n=v())&&(t.dismissButton=n.first),f(n=v())&&(t.successToast=n.first),f(n=v())&&(t.errorToast=n.first),f(n=v())&&(t.deleteModal=n.first)}},outputs:{onInventoryUpdate:"onInventoryUpdate"},decls:26,vars:2,consts:[["editInventoryButtonElementReference",""],["dismissInventoryButtonElementReference",""],["errorToastComponentReference",""],["successToastComponentReference",""],["deleteModalOneComponentReference",""],["hidden","true","data-bs-toggle","modal","data-bs-target","#editInventoryModal"],["id","editInventoryModal","tabindex","-1","aria-labelledby","editInventoryLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","editInventoryLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-danger","form-control-btn",3,"click","disabled"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-warning","form-control-btn"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-success","form-control-btn",3,"click","disabled"],[3,"confirmEvent"]],template:function(i,t){if(i&1){let n=w();r(0,"button",5,0),l(2,` Launch demo modal
`),o(),r(3,"div",6)(4,"div",7)(5,"div",8)(6,"div",9)(7,"h5",10),l(8,"Edit Inventory"),o(),d(9,"button",11,1),o(),r(11,"div",12),d(12,"app-inventory-form"),o(),r(13,"div",13)(14,"button",14),p("click",function(){return h(n),y(t.onDelete())}),l(15," Delete "),o(),r(16,"button",15),l(17," Cancel "),o(),r(18,"button",16),p("click",function(){return h(n),y(t.onSave())}),l(19," Save "),o()()()()(),d(20,"app-error-toast",null,2)(22,"app-success-toast",null,3),r(24,"app-delete-modal-one",17,4),p("confirmEvent",function(){return h(n),y(t.handleDeleteInventory())}),o()}i&2&&(m(14),c("disabled",t.isLoading),m(4),c("disabled",t.isLoading))},dependencies:[F,C,S,B]});let s=a;return s})();var Rt=["newInventoryComponentReference"],Qt=["editInventoryComponentReference"],Mt=()=>({name:"All Inventories",link:"#/home/infrastructure/inventories"}),Lt=s=>[s];function Bt(s,a){if(s&1){let k=w();r(0,"tr",24),p("click",function(){let i=h(k).$implicit,t=A();return y(t.viewInventoryDetails(i.id))}),r(1,"td"),l(2),o(),r(3,"td"),l(4),o(),r(5,"td"),l(6),o(),r(7,"td"),l(8),o()()}if(s&2){let k=a.$implicit;m(2),Q(k.name),m(2),Q(k.category),m(2),Q(k.quantity),m(2),Q(k.unit)}}function At(s,a){if(s&1&&(r(0,"tr")(1,"td",25),d(2,"app-table-loader",26),o()()),s&2){let k=A();m(2),c("isLoading",k.isFetchingListData)("isNoData",k.isDataAvailable)}}var ge=(()=>{let a=class a{constructor(e,i){this.router=e,this.tasksService=i,this.inventories=[],this.inventoryHeaders=["Name","Category","Quantity","Unit"],this.isLoading=!0,this.isFetchingListData=!0,this.isDataAvailable=!1,this.filterQuery="",this.pagination={currentPage:0,totalPages:0,totalItems:0},this.sorting={currentField:"created_at",currentDirection:"-"}}pageSelected(){this.getInventories()}columnSorted(e){console.log(e),this.sorting.currentField=e.field,this.sorting.currentDirection=e.direction,this.getInventories()}tableFiltered(e){this.filterQuery=e,this.getInventories()}ngAfterViewInit(){this.getInventories()}getInventories(){this.tasksService.getAllInventories().subscribe({next:e=>{console.log(e.results),this.inventories=e.results,this.pagination.currentPage=e.current_page,this.pagination.totalPages=e.total_pages,this.pagination.totalItems=e.count,this.pagination.totalItems==0&&(this.isDataAvailable=!1),this.isDataAvailable=!0,this.isFetchingListData=!1},error:e=>{console.log(e.message),this.isFetchingListData=!1},complete:()=>{console.log("Request completed"),this.isFetchingListData=!1}})}viewInventoryDetails(e){this.router.navigate(["/home/infrastructure/housekeeping/inventories/edit-view-inventory/",e])}goToCreateInventory(){this.router.navigate(["/home/infrastructure/housekeeping/inventories/create-inventory"])}};a.\u0275fac=function(i){return new(i||a)(b(E),b(D))},a.\u0275cmp=T({type:a,selectors:[["app-all-inventories"]],viewQuery:function(i,t){if(i&1&&(u(Rt,5),u(Qt,5)),i&2){let n;f(n=v())&&(t.createInventory=n.first),f(n=v())&&(t.editViewInventory=n.first)}},decls:35,vars:25,consts:[["newInventoryComponentReference",""],["editInventoryComponentReference",""],[3,"pageTitle","navItems"],[1,"row"],[1,"col-md-9"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"d-inline-block","w-100","mb-3"],[1,"btn","btn-primary","btn-sm","mb-3","grid-add-btn",3,"click"],[3,"placeholder"],[1,"table-responsive"],[1,"table","table-sm","table-hover","table-bordered"],["width","30%"],[3,"columnSorted","columnTitle","thisField","currentField","currentDirection"],["width","15%"],["width","25%"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"totalItems"],[1,"col-md-3"],["link","/home/infrastructure/housekeeping","name","Go to Tasks"],[3,"onInventoryCreation"],[3,"onInventoryUpdate"],[3,"click"],["colspan","4"],[3,"isLoading","isNoData"]],template:function(i,t){if(i&1){let n=w();d(0,"app-topnav",2),r(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"h5",7),l(6,"Inventories"),o(),r(7,"div",8)(8,"button",9),p("click",function(){return h(n),y(t.createInventory.openModal())}),l(9," Add New Inventory "),o(),d(10,"app-table-filtering",10),o(),r(11,"div",11)(12,"table",12)(13,"thead")(14,"tr")(15,"th",13)(16,"app-table-sorting",14),p("columnSorted",function(_){return h(n),y(t.columnSorted(_))}),o()(),r(17,"th",13)(18,"app-table-sorting",14),p("columnSorted",function(_){return h(n),y(t.columnSorted(_))}),o()(),r(19,"th",15)(20,"app-table-sorting",14),p("columnSorted",function(_){return h(n),y(t.columnSorted(_))}),o()(),r(21,"th",16)(22,"app-table-sorting",14),p("columnSorted",function(_){return h(n),y(t.columnSorted(_))}),o()()()(),r(23,"tbody"),H(24,Bt,9,4,"tr",17)(25,At,3,2,"tr",18),o()()(),d(26,"app-table-pagination",19),o()()(),r(27,"div",20)(28,"div",5)(29,"div",6),d(30,"app-page-link-button",21),o()()(),r(31,"app-create-inventory",22,0),p("onInventoryCreation",function(){return h(n),y(t.getInventories())}),o(),r(33,"app-edit-view-inventory",23,1),p("onInventoryUpdate",function(){return h(n),y(t.getInventories())}),o()()}i&2&&(c("pageTitle","Inventories")("navItems",G(23,Lt,W(22,Mt))),m(10),c("placeholder","Search Inventories"),m(6),c("columnTitle","Inventory Name")("thisField","name")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),m(2),c("columnTitle","Category")("thisField","category")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),m(2),c("columnTitle","Quantity")("thisField","quantity")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),m(2),c("columnTitle","Unit")("thisField","unit")("currentField",t.sorting.currentField)("currentDirection",t.sorting.currentDirection),m(2),c("ngForOf",t.inventories),m(),c("ngIf",t.isFetchingListData||!t.isDataAvailable),m(),c("totalItems",t.inventories.length))},dependencies:[Y,z,me,ae,se,le,re,N,pe,ue]});let s=a;return s})();var Nt=[{path:"",component:Ne,children:[{path:"",component:ye},{path:"all-tasks",component:ye},{path:"create-tasks",component:ce},{path:"edit-view-task/:taskId",component:de},{path:"inventories",component:ge},{path:"all-inventories",component:ge},{path:"create-inventory",component:pe},{path:"edit-view-inventory/:inventoryId",component:ue}]}],xe=(()=>{let a=class a{};a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=j({type:a}),a.\u0275inj=P({imports:[fe.forChild(Nt),fe]});let s=a;return s})();var pn=(()=>{let a=class a{};a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=j({type:a}),a.\u0275inj=P({imports:[Se,Qe,Me,xe,Be,Le,N,M,Ae]});let s=a;return s})();export{pn as a};
