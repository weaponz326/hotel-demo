import{a as H}from"./chunk-GHO2QF7T.js";import{a as k,b as N,c as O,d as Y,e as q}from"./chunk-3OLZPOF4.js";import{F as E,Ga as V,K as m,L as f,La as M,Na as A,Q as h,R as T,V as n,W as I,Za as B,_a as P,aa as L,ba as b,bb as R,ca as r,cb as Q,ja as i,ka as a,la as v,ma as F,na as p,oa as w,ta as D,ua as y,va as C,xa as u,ya as _}from"./chunk-TK5UYZ3D.js";var $=["openButtonElementReference"],j=["closeButtonElementReference"];function x(o,s){if(o&1){let d=F();i(0,"tr",22),p("click",function(){let c=m(d).$implicit,e=w();return f(e.selectRow(c))}),i(1,"td"),u(2),a(),i(3,"td"),u(4),a(),i(5,"td"),u(6),M(7,"date"),a()()}if(o&2){let d=s.$implicit;n(2),_(d.first_name+" "+d.last_name),n(2),_(d.staff_id),n(2),_(A(7,3,d.created_at,"dd-MM-YYYY"))}}function z(o,s){if(o&1&&(i(0,"tr")(1,"td",23),v(2,"app-table-loader",24),a()()),o&2){let d=w();n(2),r("isLoading",d.isFetchingListData)("isNoData",d.isDataAvailable)}}var oe=(()=>{let s=class s{constructor(t){this.staffService=t,this.rowSelected=new T,this.closeTarget="",this.staffListData=[],this.isFetchingListData=!1,this.isDataAvailable=!0,this.filterQuery="",this.pagination={currentPage:0,totalPages:0,totalItems:0},this.sorting={currentField:"created_at",currentDirection:"-"}}openModal(){this.staffListData=[],this.getAllStaff(),this.openButton.nativeElement.click()}getAllStaff(){console.log("getting all staff"),this.isFetchingListData=!0,this.staffService.getAllHotelStaff().subscribe({next:t=>{console.log(t.results),this.staffListData=t.results,this.pagination.currentPage=t.current_page,this.pagination.totalPages=t.total_pages,this.pagination.totalItems=t.count,this.isFetchingListData=!1,this.pagination.totalItems==0&&(this.isDataAvailable=!1)},error:t=>{console.log(t)}})}pageSelected(){this.getAllStaff()}columnSorted(t){console.log(t),this.sorting.currentField=t.field,this.sorting.currentDirection=t.direction,this.getAllStaff()}tableFiltered(t){this.filterQuery=t,this.getAllStaff()}selectRow(t){this.rowSelected.emit(t),this.closeButton.nativeElement.click(),console.log({row:t})}};s.\u0275fac=function(c){return new(c||s)(I(H))},s.\u0275cmp=E({type:s,selectors:[["app-select-staff"]],viewQuery:function(c,e){if(c&1&&(D($,5,h),D(j,5,h)),c&2){let l;y(l=C())&&(e.openButton=l.first),y(l=C())&&(e.closeButton=l.first)}},inputs:{closeTarget:"closeTarget"},outputs:{rowSelected:"rowSelected"},standalone:!0,features:[V],decls:30,vars:22,consts:[["openButtonElementReference",""],["closeButtonElementReference",""],["data-bs-toggle","modal","data-bs-target","#selectStaffModal",3,"hidden"],["id","selectStaffModal","tabindex","-1","aria-labelledby","selectStaffModalLabel","aria-hidden","true",1,"modal","fade","select-table-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header","bg-light"],["id","selectStaffModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close","data-bs-toggle","modal",1,"btn-close"],[1,"modal-body"],[1,"d-inline-block","w-100","mb-2"],[3,"tableFiltered","placeholder"],[1,"table-responsive"],[1,"table","table-sm","table-hover","table-bordered"],["width","30%"],[3,"columnSorted","columnTitle","thisField","currentField","currentDirection"],["width","45"],["width","25%"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"pageSelected","totalItems","currentPage"],["data-bs-dismiss","modal","data-bs-toggle","modal",3,"hidden"],[3,"click"],["colspan","3"],[3,"isLoading","isNoData"]],template:function(c,e){if(c&1){let l=F();i(0,"button",2,0),u(2,` Launch demo modal
`),a(),i(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"span",7),u(8,"Select Hotel Staff"),a(),v(9,"button",8),a(),i(10,"div",9)(11,"div",10)(12,"app-table-filtering",11),p("tableFiltered",function(){return m(l),f(e.tableFiltered)}),a()(),i(13,"div",12)(14,"table",13)(15,"thead")(16,"tr")(17,"th",14)(18,"app-table-sorting",15),p("columnSorted",function(g){return m(l),f(e.columnSorted(g))}),a()(),i(19,"th",16)(20,"app-table-sorting",15),p("columnSorted",function(g){return m(l),f(e.columnSorted(g))}),a()(),i(21,"th",17)(22,"app-table-sorting",15),p("columnSorted",function(g){return m(l),f(e.columnSorted(g))}),a()()()(),i(23,"tbody"),L(24,x,8,6,"tr",18)(25,z,3,2,"tr",19),a()()(),i(26,"app-table-pagination",20),p("pageSelected",function(){return m(l),f(e.pageSelected())}),a()(),i(27,"button",21,1),u(29," Launch demo modal "),a()()()()}c&2&&(r("hidden",!0),n(9),b("data-bs-target",e.closeTarget),n(3),r("placeholder","Search Staffs"),n(6),r("columnTitle","Staff Name")("thisField","staff")("currentField",e.sorting.currentField)("currentDirection",e.sorting.currentDirection),n(2),r("columnTitle","Staff ID")("thisField","staff_id")("currentField",e.sorting.currentField)("currentDirection",e.sorting.currentDirection),n(2),r("columnTitle","Date Created")("thisField","created_at")("currentField",e.sorting.currentField)("currentDirection",e.sorting.currentDirection),n(2),r("ngForOf",e.staffListData),n(),r("ngIf",e.isFetchingListData||!e.isDataAvailable),n(),r("totalItems",e.pagination.totalItems)("currentPage",e.pagination.currentPage)("totalItems",e.pagination.totalItems),n(),r("hidden",!0),b("data-bs-target",e.closeTarget))},dependencies:[Q,B,P,R,q,N,O,Y,k]});let o=s;return o})();export{oe as a};
